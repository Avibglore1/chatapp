(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function uS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tm={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function cS(){if(rv)return Ol;rv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ol.Fragment=e,Ol.jsx=n,Ol.jsxs=n,Ol}var sv;function hS(){return sv||(sv=1,tm.exports=cS()),tm.exports}var $=hS(),nm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function fS(){if(av)return Re;av=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,F={};function L(k,ie,de){this.props=k,this.context=ie,this.refs=F,this.updater=de||N}L.prototype.isReactComponent={},L.prototype.setState=function(k,ie){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ie,"setState")},L.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function K(){}K.prototype=L.prototype;function ee(k,ie,de){this.props=k,this.context=ie,this.refs=F,this.updater=de||N}var Q=ee.prototype=new K;Q.constructor=ee,M(Q,L.prototype),Q.isPureReactComponent=!0;var J=Array.isArray,re={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function O(k,ie,de,oe,le,Ce){return de=Ce.ref,{$$typeof:r,type:k,key:ie,ref:de!==void 0?de:null,props:Ce}}function w(k,ie){return O(k.type,ie,void 0,void 0,void 0,k.props)}function b(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function I(k){var ie={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(de){return ie[de]})}var x=/\/+/g;function U(k,ie){return typeof k=="object"&&k!==null&&k.key!=null?I(""+k.key):ie.toString(36)}function D(){}function Je(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(D,D):(k.status="pending",k.then(function(ie){k.status==="pending"&&(k.status="fulfilled",k.value=ie)},function(ie){k.status==="pending"&&(k.status="rejected",k.reason=ie)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Ke(k,ie,de,oe,le){var Ce=typeof k;(Ce==="undefined"||Ce==="boolean")&&(k=null);var we=!1;if(k===null)we=!0;else switch(Ce){case"bigint":case"string":case"number":we=!0;break;case"object":switch(k.$$typeof){case r:case e:we=!0;break;case E:return we=k._init,Ke(we(k._payload),ie,de,oe,le)}}if(we)return le=le(k),we=oe===""?"."+U(k,0):oe,J(le)?(de="",we!=null&&(de=we.replace(x,"$&/")+"/"),Ke(le,ie,de,"",function(lt){return lt})):le!=null&&(b(le)&&(le=w(le,de+(le.key==null||k&&k.key===le.key?"":(""+le.key).replace(x,"$&/")+"/")+we)),ie.push(le)),1;we=0;var _t=oe===""?".":oe+":";if(J(k))for(var ze=0;ze<k.length;ze++)oe=k[ze],Ce=_t+U(oe,ze),we+=Ke(oe,ie,de,Ce,le);else if(ze=R(k),typeof ze=="function")for(k=ze.call(k),ze=0;!(oe=k.next()).done;)oe=oe.value,Ce=_t+U(oe,ze++),we+=Ke(oe,ie,de,Ce,le);else if(Ce==="object"){if(typeof k.then=="function")return Ke(Je(k),ie,de,oe,le);throw ie=String(k),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function ae(k,ie,de){if(k==null)return k;var oe=[],le=0;return Ke(k,oe,"","",function(Ce){return ie.call(de,Ce,le++)}),oe}function ve(k){if(k._status===-1){var ie=k._result;ie=ie(),ie.then(function(de){(k._status===0||k._status===-1)&&(k._status=1,k._result=de)},function(de){(k._status===0||k._status===-1)&&(k._status=2,k._result=de)}),k._status===-1&&(k._status=0,k._result=ie)}if(k._status===1)return k._result.default;throw k._result}var ge=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function He(){}return Re.Children={map:ae,forEach:function(k,ie,de){ae(k,function(){ie.apply(this,arguments)},de)},count:function(k){var ie=0;return ae(k,function(){ie++}),ie},toArray:function(k){return ae(k,function(ie){return ie})||[]},only:function(k){if(!b(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Re.Component=L,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=ee,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Re.act=function(){throw Error("act(...) is not supported in production builds of React.")},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cloneElement=function(k,ie,de){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var oe=M({},k.props),le=k.key,Ce=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(le=""+ie.key),ie)!ce.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(oe[we]=ie[we]);var we=arguments.length-2;if(we===1)oe.children=de;else if(1<we){for(var _t=Array(we),ze=0;ze<we;ze++)_t[ze]=arguments[ze+2];oe.children=_t}return O(k.type,le,void 0,void 0,Ce,oe)},Re.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Re.createElement=function(k,ie,de){var oe,le={},Ce=null;if(ie!=null)for(oe in ie.key!==void 0&&(Ce=""+ie.key),ie)ce.call(ie,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(le[oe]=ie[oe]);var we=arguments.length-2;if(we===1)le.children=de;else if(1<we){for(var _t=Array(we),ze=0;ze<we;ze++)_t[ze]=arguments[ze+2];le.children=_t}if(k&&k.defaultProps)for(oe in we=k.defaultProps,we)le[oe]===void 0&&(le[oe]=we[oe]);return O(k,Ce,void 0,void 0,null,le)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:m,render:k}},Re.isValidElement=b,Re.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:ve}},Re.memo=function(k,ie){return{$$typeof:_,type:k,compare:ie===void 0?null:ie}},Re.startTransition=function(k){var ie=re.T,de={};re.T=de;try{var oe=k(),le=re.S;le!==null&&le(de,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(He,ge)}catch(Ce){ge(Ce)}finally{re.T=ie}},Re.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Re.use=function(k){return re.H.use(k)},Re.useActionState=function(k,ie,de){return re.H.useActionState(k,ie,de)},Re.useCallback=function(k,ie){return re.H.useCallback(k,ie)},Re.useContext=function(k){return re.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,ie){return re.H.useDeferredValue(k,ie)},Re.useEffect=function(k,ie){return re.H.useEffect(k,ie)},Re.useId=function(){return re.H.useId()},Re.useImperativeHandle=function(k,ie,de){return re.H.useImperativeHandle(k,ie,de)},Re.useInsertionEffect=function(k,ie){return re.H.useInsertionEffect(k,ie)},Re.useLayoutEffect=function(k,ie){return re.H.useLayoutEffect(k,ie)},Re.useMemo=function(k,ie){return re.H.useMemo(k,ie)},Re.useOptimistic=function(k,ie){return re.H.useOptimistic(k,ie)},Re.useReducer=function(k,ie,de){return re.H.useReducer(k,ie,de)},Re.useRef=function(k){return re.H.useRef(k)},Re.useState=function(k){return re.H.useState(k)},Re.useSyncExternalStore=function(k,ie,de){return re.H.useSyncExternalStore(k,ie,de)},Re.useTransition=function(){return re.H.useTransition()},Re.version="19.0.0",Re}var ov;function Xm(){return ov||(ov=1,nm.exports=fS()),nm.exports}var q=Xm();const dS=uS(q);var xl={},lv;function mS(){if(lv)return xl;lv=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.parse=f,xl.serialize=_;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function f(R,N){const M=new u,F=R.length;if(F<2)return M;const L=(N==null?void 0:N.decode)||E;let K=0;do{const ee=R.indexOf("=",K);if(ee===-1)break;const Q=R.indexOf(";",K),J=Q===-1?F:Q;if(ee>J){K=R.lastIndexOf(";",ee-1)+1;continue}const re=m(R,K,ee),ce=p(R,ee,re),O=R.slice(re,ce);if(M[O]===void 0){let w=m(R,ee+1,J),b=p(R,J,w);const I=L(R.slice(w,b));M[O]=I}K=J+1}while(K<F);return M}function m(R,N,M){do{const F=R.charCodeAt(N);if(F!==32&&F!==9)return N}while(++N<M);return M}function p(R,N,M){for(;N>M;){const F=R.charCodeAt(--N);if(F!==32&&F!==9)return N+1}return M}function _(R,N,M){const F=(M==null?void 0:M.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const L=F(N);if(!e.test(L))throw new TypeError(`argument val is invalid: ${N}`);let K=R+"="+L;if(!M)return K;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);K+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);K+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);K+="; Path="+M.path}if(M.expires){if(!S(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);K+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(K+="; HttpOnly"),M.secure&&(K+="; Secure"),M.partitioned&&(K+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":K+="; Priority=Low";break;case"medium":K+="; Priority=Medium";break;case"high":K+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":K+="; SameSite=Strict";break;case"lax":K+="; SameSite=Lax";break;case"none":K+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return K}function E(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function S(R){return o.call(R)==="[object Date]"}return xl}mS();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uv="popstate";function pS(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Sm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:$l(o)}return _S(e,n,null,r)}function nt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gS(){return Math.random().toString(36).substring(2,10)}function cv(r,e){return{usr:r.state,key:r.key,idx:e}}function Sm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||s||gS()}}function $l({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function _o(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function _S(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,_=E();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function E(){return(f.state||{idx:null}).idx}function S(){m="POP";let L=E(),K=L==null?null:L-_;_=L,p&&p({action:m,location:F.location,delta:K})}function R(L,K){m="PUSH";let ee=Sm(F.location,L,K);_=E()+1;let Q=cv(ee,_),J=F.createHref(ee);try{f.pushState(Q,"",J)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;o.location.assign(J)}u&&p&&p({action:m,location:F.location,delta:1})}function N(L,K){m="REPLACE";let ee=Sm(F.location,L,K);_=E();let Q=cv(ee,_),J=F.createHref(ee);f.replaceState(Q,"",J),u&&p&&p({action:m,location:F.location,delta:0})}function M(L){let K=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof L=="string"?L:$l(L);return ee=ee.replace(/ $/,"%20"),nt(K,`No window.location.(origin|href) available to create URL for href: ${ee}`),new URL(ee,K)}let F={get action(){return m},get location(){return r(o,f)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(uv,S),p=L,()=>{o.removeEventListener(uv,S),p=null}},createHref(L){return e(o,L)},createURL:M,encodeLocation(L){let K=M(L);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:R,replace:N,go(L){return f.go(L)}};return F}function jE(r,e,n="/"){return yS(r,e,n,!1)}function yS(r,e,n,s){let o=typeof e=="string"?_o(e):e,u=ss(o.pathname||"/",n);if(u==null)return null;let f=qE(r);vS(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let _=NS(u);m=IS(f[p],_,s)}return m}function qE(r,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(nt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let _=sr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(nt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),qE(u.children,e,E,_)),!(u.path==null&&!u.index)&&e.push({path:_,score:RS(_,u.index),routesMeta:E})};return r.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of HE(u.path))o(u,f,p)}),e}function HE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=HE(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function vS(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:CS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var ES=/^:[\w-]+$/,TS=3,AS=2,bS=1,SS=10,wS=-2,hv=r=>r==="*";function RS(r,e){let n=r.split("/"),s=n.length;return n.some(hv)&&(s+=wS),e&&(s+=AS),n.filter(o=>!hv(o)).reduce((o,u)=>o+(ES.test(u)?TS:u===""?bS:SS),s)}function CS(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function IS(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],_=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",S=lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:_},E),R=p.route;if(!S&&_&&n&&!s[s.length-1].route.index&&(S=lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:sr([u,S.pathname]),pathnameBase:MS(sr([u,S.pathnameBase])),route:R}),S.pathnameBase!=="/"&&(u=sr([u,S.pathnameBase]))}return f}function lh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=DS(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((_,{paramName:E,isOptional:S},R)=>{if(E==="*"){let M=m[R]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const N=m[R];return S&&!N?_[E]=void 0:_[E]=(N||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:f,pattern:r}}function DS(r,e=!1,n=!0){Yn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function NS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ss(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function OS(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?_o(r):r;return{pathname:n?n.startsWith("/")?n:xS(n,e):e,search:VS(s),hash:PS(o)}}function xS(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function im(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wm(r){let e=kS(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Zm(r,e,n,s=!1){let o;typeof r=="string"?o=_o(r):(o={...r},nt(!o.pathname||!o.pathname.includes("?"),im("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),im("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),im("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let S=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),S-=1;o.pathname=R.join("/")}m=S>=0?e[S]:"/"}let p=OS(o,m),_=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(_||E)&&(p.pathname+="/"),p}var sr=r=>r.join("/").replace(/\/\/+/g,"/"),MS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),VS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,PS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function US(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var FE=["POST","PUT","PATCH","DELETE"];new Set(FE);var LS=["GET",...FE];new Set(LS);var yo=q.createContext(null);yo.displayName="DataRouter";var Ih=q.createContext(null);Ih.displayName="DataRouterState";var GE=q.createContext({isTransitioning:!1});GE.displayName="ViewTransition";var zS=q.createContext(new Map);zS.displayName="Fetchers";var BS=q.createContext(null);BS.displayName="Await";var Xn=q.createContext(null);Xn.displayName="Navigation";var ru=q.createContext(null);ru.displayName="Location";var Si=q.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var Jm=q.createContext(null);Jm.displayName="RouteError";function jS(r,{relative:e}={}){nt(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=q.useContext(Xn),{hash:o,pathname:u,search:f}=su(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:sr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function vo(){return q.useContext(ru)!=null}function fs(){return nt(vo(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(ru).location}var KE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QE(r){q.useContext(Xn).static||q.useLayoutEffect(r)}function Dh(){let{isDataRoute:r}=q.useContext(Si);return r?ew():qS()}function qS(){nt(vo(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(yo),{basename:e,navigator:n}=q.useContext(Xn),{matches:s}=q.useContext(Si),{pathname:o}=fs(),u=JSON.stringify(Wm(s)),f=q.useRef(!1);return QE(()=>{f.current=!0}),q.useCallback((p,_={})=>{if(Yn(f.current,KE),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=Zm(p,JSON.parse(u),o,_.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:sr([e,E.pathname])),(_.replace?n.replace:n.push)(E,_.state,_)},[e,n,u,o,r])}q.createContext(null);function su(r,{relative:e}={}){let{matches:n}=q.useContext(Si),{pathname:s}=fs(),o=JSON.stringify(Wm(n));return q.useMemo(()=>Zm(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function HS(r,e){return $E(r,e)}function $E(r,e,n,s){var ee;nt(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=q.useContext(Xn),{matches:f}=q.useContext(Si),m=f[f.length-1],p=m?m.params:{},_=m?m.pathname:"/",E=m?m.pathnameBase:"/",S=m&&m.route;{let Q=S&&S.path||"";YE(_,!S||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let R=fs(),N;if(e){let Q=typeof e=="string"?_o(e):e;nt(E==="/"||((ee=Q.pathname)==null?void 0:ee.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),N=Q}else N=R;let M=N.pathname||"/",F=M;if(E!=="/"){let Q=E.replace(/^\//,"").split("/");F="/"+M.replace(/^\//,"").split("/").slice(Q.length).join("/")}let L=!u&&n&&n.matches&&n.matches.length>0?n.matches:jE(r,{pathname:F});Yn(S||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yn(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=$S(L&&L.map(Q=>Object.assign({},Q,{params:Object.assign({},p,Q.params),pathname:sr([E,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?E:sr([E,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),f,n,s);return e&&K?q.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},K):K}function FS(){let r=JS(),e=US(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:u},"ErrorBoundary")," or"," ",q.createElement("code",{style:u},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:o},n):null,f)}var GS=q.createElement(FS,null),KS=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(Si.Provider,{value:this.props.routeContext},q.createElement(Jm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QS({routeContext:r,match:e,children:n}){let s=q.useContext(yo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Si.Provider,{value:r},n)}function $S(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);nt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let _=o[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=p),_.route.id){let{loaderData:E,errors:S}=n,R=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||R){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,_,E)=>{let S,R=!1,N=null,M=null;n&&(S=u&&_.route.id?u[_.route.id]:void 0,N=_.route.errorElement||GS,f&&(m<0&&E===0?(YE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,M=null):m===E&&(R=!0,M=_.route.hydrateFallbackElement||null)));let F=e.concat(o.slice(0,E+1)),L=()=>{let K;return S?K=N:R?K=M:_.route.Component?K=q.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=p,q.createElement(QS,{match:_,routeContext:{outlet:p,matches:F,isDataRoute:n!=null},children:K})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?q.createElement(KS,{location:n.location,revalidation:n.revalidation,component:N,error:S,children:L(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):L()},null)}function ep(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YS(r){let e=q.useContext(yo);return nt(e,ep(r)),e}function XS(r){let e=q.useContext(Ih);return nt(e,ep(r)),e}function WS(r){let e=q.useContext(Si);return nt(e,ep(r)),e}function tp(r){let e=WS(r),n=e.matches[e.matches.length-1];return nt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function ZS(){return tp("useRouteId")}function JS(){var s;let r=q.useContext(Jm),e=XS("useRouteError"),n=tp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function ew(){let{router:r}=YS("useNavigate"),e=tp("useNavigate"),n=q.useRef(!1);return QE(()=>{n.current=!0}),q.useCallback(async(o,u={})=>{Yn(n.current,KE),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var fv={};function YE(r,e,n){!e&&!fv[r]&&(fv[r]=!0,Yn(!1,n))}q.memo(tw);function tw({routes:r,future:e,state:n}){return $E(r,void 0,n,e)}function nw({to:r,replace:e,state:n,relative:s}){nt(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=q.useContext(Xn);Yn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=q.useContext(Si),{pathname:f}=fs(),m=Dh(),p=Zm(r,Wm(u),f,s==="path"),_=JSON.stringify(p);return q.useEffect(()=>{m(JSON.parse(_),{replace:e,state:n,relative:s})},[m,_,s,e,n]),null}function Pl(r){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){nt(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=_o(n));let{pathname:p="/",search:_="",hash:E="",state:S=null,key:R="default"}=n,N=q.useMemo(()=>{let M=ss(p,f);return M==null?null:{location:{pathname:M,search:_,hash:E,state:S,key:R},navigationType:s}},[f,p,_,E,S,R,s]);return Yn(N!=null,`<Router basename="${f}"> is not able to match the URL "${p}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:q.createElement(Xn.Provider,{value:m},q.createElement(ru.Provider,{children:e,value:N}))}function rw({children:r,location:e}){return HS(wm(r),e)}function wm(r,e=[]){let n=[];return q.Children.forEach(r,(s,o)=>{if(!q.isValidElement(s))return;let u=[...e,o];if(s.type===q.Fragment){n.push.apply(n,wm(s.props.children,u));return}nt(s.type===Pl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=wm(s.props.children,u)),n.push(f)}),n}var Xc="get",Wc="application/x-www-form-urlencoded";function Nh(r){return r!=null&&typeof r.tagName=="string"}function sw(r){return Nh(r)&&r.tagName.toLowerCase()==="button"}function aw(r){return Nh(r)&&r.tagName.toLowerCase()==="form"}function ow(r){return Nh(r)&&r.tagName.toLowerCase()==="input"}function lw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uw(r,e){return r.button===0&&(!e||e==="_self")&&!lw(r)}var jc=null;function cw(){if(jc===null)try{new FormData(document.createElement("form"),0),jc=!1}catch{jc=!0}return jc}var hw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rm(r){return r!=null&&!hw.has(r)?(Yn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wc}"`),null):r}function fw(r,e){let n,s,o,u,f;if(aw(r)){let m=r.getAttribute("action");s=m?ss(m,e):null,n=r.getAttribute("method")||Xc,o=rm(r.getAttribute("enctype"))||Wc,u=new FormData(r)}else if(sw(r)||ow(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?ss(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||Xc,o=rm(r.getAttribute("formenctype"))||rm(m.getAttribute("enctype"))||Wc,u=new FormData(m,r),!cw()){let{name:_,type:E,value:S}=r;if(E==="image"){let R=_?`${_}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else _&&u.append(_,S)}}else{if(Nh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xc,s=null,o=Wc,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function np(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function dw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function pw(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await dw(u,n);return f.links?f.links():[]}return[]}));return vw(s.flat(1).filter(mw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function dv(r,e,n,s,o,u){let f=(p,_)=>n[_]?p.route.id!==n[_].route.id:!0,m=(p,_)=>{var E;return n[_].pathname!==p.pathname||((E=n[_].route.path)==null?void 0:E.endsWith("*"))&&n[_].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,_)=>f(p,_)||m(p,_)):u==="data"?e.filter((p,_)=>{var S;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,_)||m(p,_))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function gw(r,e){return _w(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function _w(r){return[...new Set(r)]}function yw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function vw(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(yw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function Ew(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Tw(){let r=q.useContext(yo);return np(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Aw(){let r=q.useContext(Ih);return np(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ip=q.createContext(void 0);ip.displayName="FrameworkContext";function XE(){let r=q.useContext(ip);return np(r,"You must render this element inside a <HydratedRouter> element"),r}function bw(r,e){let n=q.useContext(ip),[s,o]=q.useState(!1),[u,f]=q.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:_,onMouseLeave:E,onTouchStart:S}=e,R=q.useRef(null);q.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let F=K=>{K.forEach(ee=>{f(ee.isIntersecting)})},L=new IntersectionObserver(F,{threshold:.5});return R.current&&L.observe(R.current),()=>{L.disconnect()}}},[r]),q.useEffect(()=>{if(s){let F=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(F)}}},[s]);let N=()=>{o(!0)},M=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,R,{}]:[u,R,{onFocus:kl(m,N),onBlur:kl(p,M),onMouseEnter:kl(_,N),onMouseLeave:kl(E,M),onTouchStart:kl(S,N)}]:[!1,R,{}]}function kl(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Sw({page:r,...e}){let{router:n}=Tw(),s=q.useMemo(()=>jE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?q.createElement(Rw,{page:r,matches:s,...e}):null}function ww(r){let{manifest:e,routeModules:n}=XE(),[s,o]=q.useState([]);return q.useEffect(()=>{let u=!1;return pw(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function Rw({page:r,matches:e,...n}){let s=fs(),{manifest:o,routeModules:u}=XE(),{loaderData:f,matches:m}=Aw(),p=q.useMemo(()=>dv(r,e,m,o,s,"data"),[r,e,m,o,s]),_=q.useMemo(()=>dv(r,e,m,o,s,"assets"),[r,e,m,o,s]),E=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let N=new Set,M=!1;if(e.forEach(L=>{var ee;let K=o.routes[L.route.id];!K||!K.hasLoader||(!p.some(Q=>Q.route.id===L.route.id)&&L.route.id in f&&((ee=u[L.route.id])!=null&&ee.shouldRevalidate)||K.hasClientLoader?M=!0:N.add(L.route.id))}),N.size===0)return[];let F=Ew(r);return M&&N.size>0&&F.searchParams.set("_routes",e.filter(L=>N.has(L.route.id)).map(L=>L.route.id).join(",")),[F.pathname+F.search]},[f,s,o,p,e,r,u]),S=q.useMemo(()=>gw(_,o),[_,o]),R=ww(_);return q.createElement(q.Fragment,null,E.map(N=>q.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),S.map(N=>q.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),R.map(({key:N,link:M})=>q.createElement("link",{key:N,...M})))}function Cw(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var WE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WE&&(window.__reactRouterVersion="7.1.5")}catch{}function Iw({basename:r,children:e,window:n}){let s=q.useRef();s.current==null&&(s.current=pS({window:n,v5Compat:!0}));let o=s.current,[u,f]=q.useState({action:o.action,location:o.location}),m=q.useCallback(p=>{q.startTransition(()=>f(p))},[f]);return q.useLayoutEffect(()=>o.listen(m),[o,m]),q.createElement(iw,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var ZE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=q.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:_,preventScrollReset:E,viewTransition:S,...R},N){let{basename:M}=q.useContext(Xn),F=typeof _=="string"&&ZE.test(_),L,K=!1;if(typeof _=="string"&&F&&(L=_,WE))try{let b=new URL(window.location.href),I=_.startsWith("//")?new URL(b.protocol+_):new URL(_),x=ss(I.pathname,M);I.origin===b.origin&&x!=null?_=x+I.search+I.hash:K=!0}catch{Yn(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=jS(_,{relative:o}),[Q,J,re]=bw(s,R),ce=xw(_,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:S});function O(b){e&&e(b),b.defaultPrevented||ce(b)}let w=q.createElement("a",{...R,...re,href:L||ee,onClick:K||u?e:O,ref:Cw(N,J),target:p,"data-discover":!F&&n==="render"?"true":void 0});return Q&&!F?q.createElement(q.Fragment,null,w,q.createElement(Sw,{page:ee})):w});JE.displayName="Link";var Dw=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,..._},E){let S=su(f,{relative:_.relative}),R=fs(),N=q.useContext(Ih),{navigator:M,basename:F}=q.useContext(Xn),L=N!=null&&Uw(S)&&m===!0,K=M.encodeLocation?M.encodeLocation(S).pathname:S.pathname,ee=R.pathname,Q=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(ee=ee.toLowerCase(),Q=Q?Q.toLowerCase():null,K=K.toLowerCase()),Q&&F&&(Q=ss(Q,F)||Q);const J=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let re=ee===K||!o&&ee.startsWith(K)&&ee.charAt(J)==="/",ce=Q!=null&&(Q===K||!o&&Q.startsWith(K)&&Q.charAt(K.length)==="/"),O={isActive:re,isPending:ce,isTransitioning:L},w=re?e:void 0,b;typeof s=="function"?b=s(O):b=[s,re?"active":null,ce?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(O):u;return q.createElement(JE,{..._,"aria-current":w,className:b,ref:E,style:I,to:f,viewTransition:m},typeof p=="function"?p(O):p)});Dw.displayName="NavLink";var Nw=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Xc,action:m,onSubmit:p,relative:_,preventScrollReset:E,viewTransition:S,...R},N)=>{let M=Vw(),F=Pw(m,{relative:_}),L=f.toLowerCase()==="get"?"get":"post",K=typeof m=="string"&&ZE.test(m),ee=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let J=Q.nativeEvent.submitter,re=(J==null?void 0:J.getAttribute("formmethod"))||f;M(J||Q.currentTarget,{fetcherKey:e,method:re,navigate:n,replace:o,state:u,relative:_,preventScrollReset:E,viewTransition:S})};return q.createElement("form",{ref:N,method:L,action:F,onSubmit:s?p:ee,...R,"data-discover":!K&&r==="render"?"true":void 0})});Nw.displayName="Form";function Ow(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(r){let e=q.useContext(yo);return nt(e,Ow(r)),e}function xw(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Dh(),p=fs(),_=su(r,{relative:u});return q.useCallback(E=>{if(uw(E,e)){E.preventDefault();let S=n!==void 0?n:$l(p)===$l(_);m(r,{replace:S,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,_,n,s,e,r,o,u,f])}var kw=0,Mw=()=>`__${String(++kw)}__`;function Vw(){let{router:r}=eT("useSubmit"),{basename:e}=q.useContext(Xn),n=ZS();return q.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:_}=fw(s,e);if(o.navigate===!1){let E=o.fetcherKey||Mw();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:_,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:_,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function Pw(r,{relative:e}={}){let{basename:n}=q.useContext(Xn),s=q.useContext(Si);nt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...su(r||".",{relative:e})},f=fs();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(S=>S).forEach(S=>m.append("index",S));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:sr([n,u.pathname])),$l(u)}function Uw(r,e={}){let n=q.useContext(GE);nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eT("useViewTransitionState"),o=su(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=ss(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=ss(n.nextLocation.pathname,s)||n.nextLocation.pathname;return lh(o.pathname,f)!=null||lh(o.pathname,u)!=null}new TextEncoder;var sm={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function Lw(){if(mv)return $t;mv=1;var r=Xm();function e(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,_,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:_,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(p,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(p,_,null,E)},$t.flushSync=function(p){var _=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=_,s.p=E,s.d.f()}},$t.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(p,_))},$t.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},$t.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin),R=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?s.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:R,fetchPriority:N}):E==="script"&&s.d.X(p,{crossOrigin:S,integrity:R,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$t.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(p)},$t.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin);s.d.L(p,E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$t.preloadModule=function(p,_){if(typeof p=="string")if(_){var E=m(_.as,_.crossOrigin);s.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(p)},$t.requestFormReset=function(p){s.d.r(p)},$t.unstable_batchedUpdates=function(p,_){return p(_)},$t.useFormState=function(p,_,E){return f.H.useFormState(p,_,E)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.0.0",$t}var pv;function zw(){if(pv)return sm.exports;pv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sm.exports=Lw(),sm.exports}var am={exports:{}},Ml={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function Bw(){return gv||(gv=1,function(r){function e(ae,ve){var ge=ae.length;ae.push(ve);e:for(;0<ge;){var He=ge-1>>>1,k=ae[He];if(0<o(k,ve))ae[He]=ve,ae[ge]=k,ge=He;else break e}}function n(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var ve=ae[0],ge=ae.pop();if(ge!==ve){ae[0]=ge;e:for(var He=0,k=ae.length,ie=k>>>1;He<ie;){var de=2*(He+1)-1,oe=ae[de],le=de+1,Ce=ae[le];if(0>o(oe,ge))le<k&&0>o(Ce,oe)?(ae[He]=Ce,ae[le]=ge,He=le):(ae[He]=oe,ae[de]=ge,He=de);else if(le<k&&0>o(Ce,ge))ae[He]=Ce,ae[le]=ge,He=le;else break e}}return ve}function o(ae,ve){var ge=ae.sortIndex-ve.sortIndex;return ge!==0?ge:ae.id-ve.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],_=[],E=1,S=null,R=3,N=!1,M=!1,F=!1,L=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function Q(ae){for(var ve=n(_);ve!==null;){if(ve.callback===null)s(_);else if(ve.startTime<=ae)s(_),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=n(_)}}function J(ae){if(F=!1,Q(ae),!M)if(n(p)!==null)M=!0,Je();else{var ve=n(_);ve!==null&&Ke(J,ve.startTime-ae)}}var re=!1,ce=-1,O=5,w=-1;function b(){return!(r.unstable_now()-w<O)}function I(){if(re){var ae=r.unstable_now();w=ae;var ve=!0;try{e:{M=!1,F&&(F=!1,K(ce),ce=-1),N=!0;var ge=R;try{t:{for(Q(ae),S=n(p);S!==null&&!(S.expirationTime>ae&&b());){var He=S.callback;if(typeof He=="function"){S.callback=null,R=S.priorityLevel;var k=He(S.expirationTime<=ae);if(ae=r.unstable_now(),typeof k=="function"){S.callback=k,Q(ae),ve=!0;break t}S===n(p)&&s(p),Q(ae)}else s(p);S=n(p)}if(S!==null)ve=!0;else{var ie=n(_);ie!==null&&Ke(J,ie.startTime-ae),ve=!1}}break e}finally{S=null,R=ge,N=!1}ve=void 0}}finally{ve?x():re=!1}}}var x;if(typeof ee=="function")x=function(){ee(I)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,D=U.port2;U.port1.onmessage=I,x=function(){D.postMessage(null)}}else x=function(){L(I,0)};function Je(){re||(re=!0,x())}function Ke(ae,ve){ce=L(function(){ae(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){M||N||(M=!0,Je())},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return n(p)},r.unstable_next=function(ae){switch(R){case 1:case 2:case 3:var ve=3;break;default:ve=R}var ge=R;R=ve;try{return ae()}finally{R=ge}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ge=R;R=ae;try{return ve()}finally{R=ge}},r.unstable_scheduleCallback=function(ae,ve,ge){var He=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?He+ge:He):ge=He,ae){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ge+k,ae={id:E++,callback:ve,priorityLevel:ae,startTime:ge,expirationTime:k,sortIndex:-1},ge>He?(ae.sortIndex=ge,e(_,ae),n(p)===null&&ae===n(_)&&(F?(K(ce),ce=-1):F=!0,Ke(J,ge-He))):(ae.sortIndex=k,e(p,ae),M||N||(M=!0,Je())),ae},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(ae){var ve=R;return function(){var ge=R;R=ve;try{return ae.apply(this,arguments)}finally{R=ge}}}}(lm)),lm}var _v;function jw(){return _v||(_v=1,om.exports=Bw()),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function qw(){if(yv)return Ml;yv=1;var r=jw(),e=Xm(),n=zw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),J=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=re&&t[re]||t["@@iterator"],typeof t=="function"?t:null)}var O=Symbol.for("react.client.reference");function w(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case p:return"Fragment";case m:return"Portal";case E:return"Profiler";case _:return"StrictMode";case F:return"Suspense";case L:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Provider";case R:return(t._context.displayName||"Context")+".Consumer";case M:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K:return i=t.displayName||null,i!==null?i:w(t.type)||"Memo";case ee:i=t._payload,t=t._init;try{return w(t(i))}catch{}}return null}var b=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,x,U;function D(t){if(x===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);x=i&&i[1]||"",U=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+x+t+U}var Je=!1;function Ke(t,i){if(!t||Je)return"";Je=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var H=Y}Reflect.construct(t,[],te)}else{try{te.call()}catch(Y){H=Y}t.call(te.prototype)}}else{try{throw Error()}catch(Y){H=Y}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var C=v.split(`
`),P=T.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===P.length)for(l=C.length-1,h=P.length-1;1<=l&&0<=h&&C[l]!==P[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==P[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==P[h]){var X=`
`+C[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Je=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?D(a):""}function ae(t){switch(t.tag){case 26:case 27:case 5:return D(t.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return t=Ke(t.type,!1),t;case 11:return t=Ke(t.type.render,!1),t;case 1:return t=Ke(t.type,!0),t;default:return""}}function ve(t){try{var i="";do i+=ae(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ge(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,i.flags&4098&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function He(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function k(t){if(ge(t)!==t)throw Error(s(188))}function ie(t){var i=t.alternate;if(!i){if(i=ge(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return k(h),t;if(d===l)return k(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function de(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=de(t),i!==null)return i;t=t.sibling}return null}var oe=Array.isArray,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},we=[],_t=-1;function ze(t){return{current:t}}function lt(t){0>_t||(t.current=we[_t],we[_t]=null,_t--)}function Qe(t,i){_t++,we[_t]=t.current,t.current=i}var Jt=ze(null),Ri=ze(null),Sn=ze(null),fr=ze(null);function dr(t,i){switch(Qe(Sn,i),Qe(Ri,t),Qe(Jt,null),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?ky(i):0;break;default:if(t=t===8?i.parentNode:i,i=t.tagName,t=t.namespaceURI)t=ky(t),i=My(t,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}lt(Jt),Qe(Jt,i)}function Ci(){lt(Jt),lt(Ri),lt(Sn)}function Ro(t){t.memoizedState!==null&&Qe(fr,t);var i=Jt.current,a=My(i,t.type);i!==a&&(Qe(Ri,t),Qe(Jt,a))}function aa(t){Ri.current===t&&(lt(Jt),lt(Ri)),fr.current===t&&(lt(fr),Rl._currentValue=Ce)}var oa=Object.prototype.hasOwnProperty,ps=r.unstable_scheduleCallback,la=r.unstable_cancelCallback,nf=r.unstable_shouldYield,Co=r.unstable_requestPaint,ln=r.unstable_now,Eu=r.unstable_getCurrentPriorityLevel,At=r.unstable_ImmediatePriority,Ot=r.unstable_UserBlockingPriority,Ii=r.unstable_NormalPriority,Tu=r.unstable_LowPriority,Io=r.unstable_IdlePriority,rf=r.log,gs=r.unstable_setDisableYieldValue,mr=null,Kt=null;function Do(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(mr,t,void 0,(t.current.flags&128)===128)}catch{}}function Wn(t){if(typeof rf=="function"&&gs(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(mr,t)}catch{}}var en=Math.clz32?Math.clz32:bu,No=Math.log,Au=Math.LN2;function bu(t){return t>>>=0,t===0?32:31-(No(t)/Au|0)|0}var Zn=128,pr=4194304;function qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wn(t,i){var a=t.pendingLanes;if(a===0)return 0;var l=0,h=t.suspendedLanes,d=t.pingedLanes,v=t.warmLanes;t=t.finishedLanes!==0;var T=a&134217727;return T!==0?(a=T&~h,a!==0?l=qn(a):(d&=T,d!==0?l=qn(d):t||(v=T&~v,v!==0&&(l=qn(v))))):(T=a&~h,T!==0?l=qn(T):d!==0?l=qn(d):t||(v=a&~v,v!==0&&(l=qn(v)))),l===0?0:i!==0&&i!==l&&!(i&h)&&(h=l&-l,v=i&-i,h>=v||h===32&&(v&4194176)!==0)?i:l}function gr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ua(t,i){switch(t){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var t=Zn;return Zn<<=1,!(Zn&4194176)&&(Zn=128),t}function _r(){var t=pr;return pr<<=1,!(pr&62914560)&&(pr=4194304),t}function ca(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function dt(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Su(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,P=t.hiddenUpdates;for(a=v&~a;0<a;){var X=31-en(a),te=1<<X;T[X]=0,C[X]=-1;var H=P[X];if(H!==null)for(P[X]=null,X=0;X<H.length;X++){var Y=H[X];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&yr(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function yr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-en(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194218}function vr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-en(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function wu(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Ru(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Zy(t.type))}function Er(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var Jn=Math.random().toString(36).slice(2),xt="__reactFiber$"+Jn,bt="__reactProps$"+Jn,Di="__reactContainer$"+Jn,_s="__reactEvents$"+Jn,ha="__reactListeners$"+Jn,ei="__reactHandles$"+Jn,xo="__reactResources$"+Jn,Tr="__reactMarker$"+Jn;function ys(t){delete t[xt],delete t[bt],delete t[_s],delete t[ha],delete t[ei]}function Hn(t){var i=t[xt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Di]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Uy(t);t!==null;){if(a=t[xt])return a;t=Uy(t)}return i}t=a,a=t.parentNode}return null}function Ni(t){if(t=t[xt]||t[Di]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Ar(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function br(t){var i=t[xo];return i||(i=t[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function it(t){t[Tr]=!0}var ko=new Set,fa={};function mn(t,i){un(t,i),un(t+"Capture",i)}function un(t,i){for(fa[t]=i,t=0;t<i.length;t++)ko.add(i[t])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mo={},Vo={};function Cu(t){return oa.call(Vo,t)?!0:oa.call(Mo,t)?!1:sf.test(t)?Vo[t]=!0:(Mo[t]=!0,!1)}function Sr(t,i,a){if(Cu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function wr(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Rn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iu(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function af(t){var i=Iu(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function vs(t){t._valueTracker||(t._valueTracker=af(t))}function Po(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Iu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function da(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Oi=/[\n"\\]/g;function ut(t){return t.replace(Oi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Rr(t,i,a,l,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+tn(i)):t.value!==""+tn(i)&&(t.value=""+tn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?ma(t,v,tn(i)):a!=null?ma(t,v,tn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+tn(T):t.removeAttribute("name")}function Es(t,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function ma(t,i,a){i==="number"&&da(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Be(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ts(t,i,a){if(i!=null&&(i=""+tn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+tn(a):""}function Cr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=tn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Cn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var of=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||of.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Du(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Uo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Uo(t,d,i[d])}function Lo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ti(t){return uf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var In=null;function pa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xi=null,ki=null;function Mi(t){var i=Ni(t);if(i&&(t=i.stateNode)){var a=t[bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Rr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ut(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[bt]||null;if(!h)throw Error(s(90));Rr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Po(l)}break e;case"textarea":Ts(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Be(t,!!a.multiple,i,!1)}}}var zo=!1;function Nu(t,i,a){if(zo)return t(i,a);zo=!0;try{var l=t(i);return l}finally{if(zo=!1,(xi!==null||ki!==null)&&(Tc(),xi&&(i=xi,t=ki,ki=xi=null,Mi(i),t)))for(i=0;i<t.length;i++)Mi(t[i])}}function As(t,i){var a=t.stateNode;if(a===null)return null;var l=a[bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Dn=!1;if(pn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Dn=!1}var ni=null,Ir=null,Vi=null;function Bo(){if(Vi)return Vi;var t,i=Ir,a=i.length,l,h="value"in ni?ni.value:ni.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Vi=h.slice(t,1<l?1-l:void 0)}function ii(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function jo(){return!1}function kt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ri:jo,this.isPropagationStopped=jo,this}return I(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),i}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=kt(Fe),Ss=I({},Fe,{view:0,detail:0}),Ou=kt(Ss),_a,ya,si,ws=I({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(_a=t.screenX-si.screenX,ya=t.screenY-si.screenY):ya=_a=0,si=t),_a)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),Nn=kt(ws),xu=I({},ws,{dataTransfer:0}),cf=kt(xu),Rs=I({},Ss,{relatedTarget:0}),va=kt(Rs),qo=I({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),Ea=kt(qo),ku=I({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ta=kt(ku),hf=I({},Fe,{data:0}),Ho=kt(hf),Cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Vu[t])?!!i[t]:!1}function Is(){return Fo}var Pu=I({},Ss,{key:function(t){if(t.key){var i=Cs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Aa=kt(Pu),Uu=I({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Go=kt(Uu),Pi=I({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),Lu=kt(Pi),zu=I({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=kt(zu),ju=I({},ws,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ba=kt(ju),nn=I({},Fe,{newState:0,oldState:0}),qu=kt(nn),Hu=[9,13,27,32],ai=pn&&"CompositionEvent"in window,c=null;pn&&"documentMode"in document&&(c=document.documentMode);var g=pn&&"TextEvent"in window&&!c,y=pn&&(!ai||c&&8<c&&11>=c),A=" ",B=!1;function G(t,i){switch(t){case"keyup":return Hu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ve=!1;function St(t,i){switch(t){case"compositionend":return se(i);case"keypress":return i.which!==32?null:(B=!0,A);case"textInput":return t=i.data,t===A&&B?null:t;default:return null}}function Pe(t,i){if(Ve)return t==="compositionend"||!ai&&G(t,i)?(t=Bo(),Vi=Ir=ni=null,Ve=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Mt[t.type]:i==="textarea"}function Ui(t,i,a,l){xi?ki?ki.push(l):ki=[l]:xi=l,i=Rc(i,"onChange"),0<i.length&&(a=new ga("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var zt=null,oi=null;function Ko(t){Iy(t,0)}function Fu(t){var i=Ar(t);if(Po(i))return t}function ig(t,i){if(t==="change")return i}var rg=!1;if(pn){var ff;if(pn){var df="oninput"in document;if(!df){var sg=document.createElement("div");sg.setAttribute("oninput","return;"),df=typeof sg.oninput=="function"}ff=df}else ff=!1;rg=ff&&(!document.documentMode||9<document.documentMode)}function ag(){zt&&(zt.detachEvent("onpropertychange",og),oi=zt=null)}function og(t){if(t.propertyName==="value"&&Fu(oi)){var i=[];Ui(i,oi,t,pa(t)),Nu(Ko,i)}}function zA(t,i,a){t==="focusin"?(ag(),zt=i,oi=a,zt.attachEvent("onpropertychange",og)):t==="focusout"&&ag()}function BA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fu(oi)}function jA(t,i){if(t==="click")return Fu(i)}function qA(t,i){if(t==="input"||t==="change")return Fu(i)}function HA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var gn=typeof Object.is=="function"?Object.is:HA;function Qo(t,i){if(gn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!oa.call(i,h)||!gn(t[h],i[h]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ug(t,i){var a=lg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lg(a)}}function cg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?cg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function hg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=da(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=da(t.document)}return i}function mf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function FA(t,i){var a=hg(i);i=t.focusedElem;var l=t.selectionRange;if(a!==i&&i&&i.ownerDocument&&cg(i.ownerDocument.documentElement,i)){if(l!==null&&mf(i)){if(t=l.start,a=l.end,a===void 0&&(a=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(a,i.value.length);else if(a=(t=i.ownerDocument||document)&&t.defaultView||window,a.getSelection){a=a.getSelection();var h=i.textContent.length,d=Math.min(l.start,h);l=l.end===void 0?d:Math.min(l.end,h),!a.extend&&d>l&&(h=l,l=d,d=h),h=ug(i,d);var v=ug(i,l);h&&v&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),a.removeAllRanges(),d>l?(a.addRange(t),a.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),a.addRange(t)))}}for(t=[],a=i;a=a.parentNode;)a.nodeType===1&&t.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)a=t[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var GA=pn&&"documentMode"in document&&11>=document.documentMode,Sa=null,pf=null,$o=null,gf=!1;function fg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gf||Sa==null||Sa!==da(l)||(l=Sa,"selectionStart"in l&&mf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$o&&Qo($o,l)||($o=l,l=Rc(pf,"onSelect"),0<l.length&&(i=new ga("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Sa)))}function Ds(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var wa={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},_f={},dg={};pn&&(dg=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Ns(t){if(_f[t])return _f[t];if(!wa[t])return t;var i=wa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in dg)return _f[t]=i[a];return t}var mg=Ns("animationend"),pg=Ns("animationiteration"),gg=Ns("animationstart"),KA=Ns("transitionrun"),QA=Ns("transitionstart"),$A=Ns("transitioncancel"),_g=Ns("transitionend"),yg=new Map,vg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Fn(t,i){yg.set(t,i),mn(i,[t])}var On=[],Ra=0,yf=0;function Gu(){for(var t=Ra,i=yf=Ra=0;i<t;){var a=On[i];On[i++]=null;var l=On[i];On[i++]=null;var h=On[i];On[i++]=null;var d=On[i];if(On[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Eg(a,h,d)}}function Ku(t,i,a,l){On[Ra++]=t,On[Ra++]=i,On[Ra++]=a,On[Ra++]=l,yf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function vf(t,i,a,l){return Ku(t,i,a,l),Qu(t)}function Dr(t,i){return Ku(t,null,null,i),Qu(t)}function Eg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;h&&i!==null&&t.tag===3&&(d=t.stateNode,h=31-en(a),d=d.hiddenUpdates,t=d[h],t===null?d[h]=[i]:t.push(i),i.lane=a|536870912)}function Qu(t){if(50<vl)throw vl=0,wd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ca={},Tg=new WeakMap;function xn(t,i){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ve(i)},Tg.set(t,i),i)}return{value:t,source:i,stack:ve(i)}}var Ia=[],Da=0,$u=null,Yu=0,kn=[],Mn=0,Os=null,Li=1,zi="";function xs(t,i){Ia[Da++]=Yu,Ia[Da++]=$u,$u=t,Yu=i}function Ag(t,i,a){kn[Mn++]=Li,kn[Mn++]=zi,kn[Mn++]=Os,Os=t;var l=Li;t=zi;var h=32-en(l)-1;l&=~(1<<h),a+=1;var d=32-en(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Li=1<<32-en(i)+h|a<<h|l,zi=d+t}else Li=1<<d|a<<h|l,zi=t}function Ef(t){t.return!==null&&(xs(t,1),Ag(t,1,0))}function Tf(t){for(;t===$u;)$u=Ia[--Da],Ia[Da]=null,Yu=Ia[--Da],Ia[Da]=null;for(;t===Os;)Os=kn[--Mn],kn[Mn]=null,zi=kn[--Mn],kn[Mn]=null,Li=kn[--Mn],kn[Mn]=null}var rn=null,Bt=null,je=!1,Gn=null,li=!1,Af=Error(s(519));function ks(t){var i=Error(s(418,""));throw Wo(xn(i,t)),Af}function bg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[xt]=t,i[bt]=l,a){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(a=0;a<Tl.length;a++)ke(Tl[a],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),Es(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),vs(i);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),Cr(i,l.value,l.defaultValue,l.children),vs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||xy(i.textContent,a)?(l.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),l.onScroll!=null&&ke("scroll",i),l.onScrollEnd!=null&&ke("scrollend",i),l.onClick!=null&&(i.onclick=Cc),i=!0):i=!1,i||ks(t)}function Sg(t){for(rn=t.return;rn;)switch(rn.tag){case 3:case 27:li=!0;return;case 5:case 13:li=!1;return;default:rn=rn.return}}function Yo(t){if(t!==rn)return!1;if(!je)return Sg(t),je=!0,!1;var i=!1,a;if((a=t.tag!==3&&t.tag!==27)&&((a=t.tag===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qd(t.type,t.memoizedProps)),a=!a),a&&(i=!0),i&&Bt&&ks(t),Sg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Bt=Qn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Bt=null}}else Bt=rn?Qn(t.stateNode.nextSibling):null;return!0}function Xo(){Bt=rn=null,je=!1}function Wo(t){Gn===null?Gn=[t]:Gn.push(t)}var Zo=Error(s(460)),wg=Error(s(474)),bf={then:function(){}};function Rg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xu(){}function Cg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Xu,Xu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,t===Zo?Error(s(483)):t;default:if(typeof i.status=="string")i.then(Xu,Xu);else{if(t=We,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,t===Zo?Error(s(483)):t}throw Jo=i,Zo}}var Jo=null;function Ig(){if(Jo===null)throw Error(s(459));var t=Jo;return Jo=null,t}var Na=null,el=0;function Wu(t){var i=el;return el+=1,Na===null&&(Na=[]),Cg(Na,t,i)}function tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Zu(t,i){throw i.$$typeof===u?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Dg(t){var i=t._init;return i(t._payload)}function Ng(t){function i(z,V){if(t){var j=z.deletions;j===null?(z.deletions=[V],z.flags|=16):j.push(V)}}function a(z,V){if(!t)return null;for(;V!==null;)i(z,V),V=V.sibling;return null}function l(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function h(z,V){return z=jr(z,V),z.index=0,z.sibling=null,z}function d(z,V,j){return z.index=j,t?(j=z.alternate,j!==null?(j=j.index,j<V?(z.flags|=33554434,V):j):(z.flags|=33554434,V)):(z.flags|=1048576,V)}function v(z){return t&&z.alternate===null&&(z.flags|=33554434),z}function T(z,V,j,W){return V===null||V.tag!==6?(V=_d(j,z.mode,W),V.return=z,V):(V=h(V,j),V.return=z,V)}function C(z,V,j,W){var he=j.type;return he===p?X(z,V,j.props.children,W,j.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ee&&Dg(he)===V.type)?(V=h(V,j.props),tl(V,j),V.return=z,V):(V=gc(j.type,j.key,j.props,null,z.mode,W),tl(V,j),V.return=z,V)}function P(z,V,j,W){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=yd(j,z.mode,W),V.return=z,V):(V=h(V,j.children||[]),V.return=z,V)}function X(z,V,j,W,he){return V===null||V.tag!==7?(V=Hs(j,z.mode,W,he),V.return=z,V):(V=h(V,j),V.return=z,V)}function te(z,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=_d(""+V,z.mode,j),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case f:return j=gc(V.type,V.key,V.props,null,z.mode,j),tl(j,V),j.return=z,j;case m:return V=yd(V,z.mode,j),V.return=z,V;case ee:var W=V._init;return V=W(V._payload),te(z,V,j)}if(oe(V)||ce(V))return V=Hs(V,z.mode,j,null),V.return=z,V;if(typeof V.then=="function")return te(z,Wu(V),j);if(V.$$typeof===N)return te(z,dc(z,V),j);Zu(z,V)}return null}function H(z,V,j,W){var he=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return he!==null?null:T(z,V,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case f:return j.key===he?C(z,V,j,W):null;case m:return j.key===he?P(z,V,j,W):null;case ee:return he=j._init,j=he(j._payload),H(z,V,j,W)}if(oe(j)||ce(j))return he!==null?null:X(z,V,j,W,null);if(typeof j.then=="function")return H(z,V,Wu(j),W);if(j.$$typeof===N)return H(z,V,dc(z,j),W);Zu(z,j)}return null}function Y(z,V,j,W,he){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(j)||null,T(V,z,""+W,he);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case f:return z=z.get(W.key===null?j:W.key)||null,C(V,z,W,he);case m:return z=z.get(W.key===null?j:W.key)||null,P(V,z,W,he);case ee:var De=W._init;return W=De(W._payload),Y(z,V,j,W,he)}if(oe(W)||ce(W))return z=z.get(j)||null,X(V,z,W,he,null);if(typeof W.then=="function")return Y(z,V,j,Wu(W),he);if(W.$$typeof===N)return Y(z,V,j,dc(V,W),he);Zu(V,W)}return null}function fe(z,V,j,W){for(var he=null,De=null,pe=V,ye=V=0,Ut=null;pe!==null&&ye<j.length;ye++){pe.index>ye?(Ut=pe,pe=null):Ut=pe.sibling;var qe=H(z,pe,j[ye],W);if(qe===null){pe===null&&(pe=Ut);break}t&&pe&&qe.alternate===null&&i(z,pe),V=d(qe,V,ye),De===null?he=qe:De.sibling=qe,De=qe,pe=Ut}if(ye===j.length)return a(z,pe),je&&xs(z,ye),he;if(pe===null){for(;ye<j.length;ye++)pe=te(z,j[ye],W),pe!==null&&(V=d(pe,V,ye),De===null?he=pe:De.sibling=pe,De=pe);return je&&xs(z,ye),he}for(pe=l(pe);ye<j.length;ye++)Ut=Y(pe,z,ye,j[ye],W),Ut!==null&&(t&&Ut.alternate!==null&&pe.delete(Ut.key===null?ye:Ut.key),V=d(Ut,V,ye),De===null?he=Ut:De.sibling=Ut,De=Ut);return t&&pe.forEach(function($r){return i(z,$r)}),je&&xs(z,ye),he}function be(z,V,j,W){if(j==null)throw Error(s(151));for(var he=null,De=null,pe=V,ye=V=0,Ut=null,qe=j.next();pe!==null&&!qe.done;ye++,qe=j.next()){pe.index>ye?(Ut=pe,pe=null):Ut=pe.sibling;var $r=H(z,pe,qe.value,W);if($r===null){pe===null&&(pe=Ut);break}t&&pe&&$r.alternate===null&&i(z,pe),V=d($r,V,ye),De===null?he=$r:De.sibling=$r,De=$r,pe=Ut}if(qe.done)return a(z,pe),je&&xs(z,ye),he;if(pe===null){for(;!qe.done;ye++,qe=j.next())qe=te(z,qe.value,W),qe!==null&&(V=d(qe,V,ye),De===null?he=qe:De.sibling=qe,De=qe);return je&&xs(z,ye),he}for(pe=l(pe);!qe.done;ye++,qe=j.next())qe=Y(pe,z,ye,qe.value,W),qe!==null&&(t&&qe.alternate!==null&&pe.delete(qe.key===null?ye:qe.key),V=d(qe,V,ye),De===null?he=qe:De.sibling=qe,De=qe);return t&&pe.forEach(function(lS){return i(z,lS)}),je&&xs(z,ye),he}function ft(z,V,j,W){if(typeof j=="object"&&j!==null&&j.type===p&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case f:e:{for(var he=j.key;V!==null;){if(V.key===he){if(he=j.type,he===p){if(V.tag===7){a(z,V.sibling),W=h(V,j.props.children),W.return=z,z=W;break e}}else if(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ee&&Dg(he)===V.type){a(z,V.sibling),W=h(V,j.props),tl(W,j),W.return=z,z=W;break e}a(z,V);break}else i(z,V);V=V.sibling}j.type===p?(W=Hs(j.props.children,z.mode,W,j.key),W.return=z,z=W):(W=gc(j.type,j.key,j.props,null,z.mode,W),tl(W,j),W.return=z,z=W)}return v(z);case m:e:{for(he=j.key;V!==null;){if(V.key===he)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(z,V.sibling),W=h(V,j.children||[]),W.return=z,z=W;break e}else{a(z,V);break}else i(z,V);V=V.sibling}W=yd(j,z.mode,W),W.return=z,z=W}return v(z);case ee:return he=j._init,j=he(j._payload),ft(z,V,j,W)}if(oe(j))return fe(z,V,j,W);if(ce(j)){if(he=ce(j),typeof he!="function")throw Error(s(150));return j=he.call(j),be(z,V,j,W)}if(typeof j.then=="function")return ft(z,V,Wu(j),W);if(j.$$typeof===N)return ft(z,V,dc(z,j),W);Zu(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(z,V.sibling),W=h(V,j),W.return=z,z=W):(a(z,V),W=_d(j,z.mode,W),W.return=z,z=W),v(z)):a(z,V)}return function(z,V,j,W){try{el=0;var he=ft(z,V,j,W);return Na=null,he}catch(pe){if(pe===Zo)throw pe;var De=Ln(29,pe,null,z.mode);return De.lanes=W,De.return=z,De}finally{}}}var Ms=Ng(!0),Og=Ng(!1),Oa=ze(null),Ju=ze(0);function xg(t,i){t=Xi,Qe(Ju,t),Qe(Oa,i),Xi=t|i.baseLanes}function Sf(){Qe(Ju,Xi),Qe(Oa,Oa.current)}function wf(){Xi=Ju.current,lt(Oa),lt(Ju)}var Vn=ze(null),ui=null;function Nr(t){var i=t.alternate;Qe(Rt,Rt.current&1),Qe(Vn,t),ui===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(ui=t)}function kg(t){if(t.tag===22){if(Qe(Rt,Rt.current),Qe(Vn,t),ui===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ui=t)}}else Or()}function Or(){Qe(Rt,Rt.current),Qe(Vn,Vn.current)}function Bi(t){lt(Vn),ui===t&&(ui=null),lt(Rt)}var Rt=ze(0);function ec(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var YA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},XA=r.unstable_scheduleCallback,WA=r.unstable_NormalPriority,Ct={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new YA,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&XA(WA,function(){t.controller.abort()})}var il=null,Cf=0,xa=0,ka=null;function ZA(t,i){if(il===null){var a=il=[];Cf=0,xa=kd(),ka={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Cf++,i.then(Mg,Mg),i}function Mg(){if(--Cf===0&&il!==null){ka!==null&&(ka.status="fulfilled");var t=il;il=null,xa=0,ka=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function JA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Vg=b.S;b.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&ZA(t,i),Vg!==null&&Vg(t,i)};var Vs=ze(null);function If(){var t=Vs.current;return t!==null?t:We.pooledCache}function tc(t,i){i===null?Qe(Vs,Vs.current):Qe(Vs,i.pool)}function Pg(){var t=If();return t===null?null:{parent:Ct._currentValue,pool:t}}var xr=0,Ie=null,$e=null,yt=null,nc=!1,Ma=!1,Ps=!1,ic=0,rl=0,Va=null,eb=0;function mt(){throw Error(s(321))}function Df(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!gn(t[a],i[a]))return!1;return!0}function Nf(t,i,a,l,h,d){return xr=d,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,b.H=t===null||t.memoizedState===null?Us:kr,Ps=!1,d=a(l,h),Ps=!1,Ma&&(d=Lg(i,a,l,h)),Ug(t),d}function Ug(t){b.H=ci;var i=$e!==null&&$e.next!==null;if(xr=0,yt=$e=Ie=null,nc=!1,rl=0,Va=null,i)throw Error(s(300));t===null||Vt||(t=t.dependencies,t!==null&&fc(t)&&(Vt=!0))}function Lg(t,i,a,l){Ie=t;var h=0;do{if(Ma&&(Va=null),rl=0,Ma=!1,25<=h)throw Error(s(301));if(h+=1,yt=$e=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}b.H=Ls,d=i(a,l)}while(Ma);return d}function tb(){var t=b.H,i=t.useState()[0];return i=typeof i.then=="function"?sl(i):i,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ie.flags|=1024),i}function Of(){var t=ic!==0;return ic=0,t}function xf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function kf(t){if(nc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}nc=!1}xr=0,yt=$e=Ie=null,Ma=!1,rl=ic=0,Va=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ie.memoizedState=yt=t:yt=yt.next=t,yt}function vt(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var i=yt===null?Ie.memoizedState:yt.next;if(i!==null)yt=i,$e=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},yt===null?Ie.memoizedState=yt=t:yt=yt.next=t}return yt}var rc;rc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function sl(t){var i=rl;return rl+=1,Va===null&&(Va=[]),t=Cg(Va,t,i),i=Ie,(yt===null?i.memoizedState:yt.next)===null&&(i=i.alternate,b.H=i===null||i.memoizedState===null?Us:kr),t}function sc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===N)return Qt(t)}throw Error(s(438,String(t)))}function Mf(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=rc(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=J;return i.index++,a}function ji(t,i){return typeof i=="function"?i(t):i}function ac(t){var i=vt();return Vf(i,$e,t)}function Vf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,C=null,P=i,X=!1;do{var te=P.lane&-536870913;if(te!==P.lane?(Ue&te)===te:(xr&te)===te){var H=P.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),te===xa&&(X=!0);else if((xr&H)===H){P=P.next,H===xa&&(X=!0);continue}else te={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(T=C=te,v=d):C=C.next=te,Ie.lanes|=H,qr|=H;te=P.action,Ps&&a(d,te),d=P.hasEagerState?P.eagerState:a(d,te)}else H={lane:te,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(T=C=H,v=d):C=C.next=H,Ie.lanes|=te,qr|=te;P=P.next}while(P!==null&&P!==i);if(C===null?v=d:C.next=T,!gn(d,t.memoizedState)&&(Vt=!0,X&&(a=ka,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Pf(t){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);gn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function zg(t,i,a){var l=Ie,h=vt(),d=je;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!gn(($e||h).memoizedState,a);if(v&&(h.memoizedState=a,Vt=!0),h=h.queue,zf(qg.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||yt!==null&&yt.memoizedState.tag&1){if(l.flags|=2048,Pa(9,jg.bind(null,l,h,a,i),{destroy:void 0},null),We===null)throw Error(s(349));d||xr&60||Bg(l,i,a)}return a}function Bg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=rc(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function jg(t,i,a,l){i.value=a,i.getSnapshot=l,Hg(i)&&Fg(t)}function qg(t,i,a){return a(function(){Hg(i)&&Fg(t)})}function Hg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!gn(t,a)}catch{return!0}}function Fg(t){var i=Dr(t,2);i!==null&&sn(i,t,2)}function Uf(t){var i=cn();if(typeof t=="function"){var a=t;if(t=a(),Ps){Wn(!0);try{a()}finally{Wn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},i}function Gg(t,i,a,l){return t.baseState=a,Vf(t,$e,typeof l=="function"?l:ji)}function nb(t,i,a,l,h){if(uc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};b.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Kg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Kg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=b.T,v={};b.T=v;try{var T=a(h,l),C=b.S;C!==null&&C(v,T),Qg(t,i,T)}catch(P){Lf(t,i,P)}finally{b.T=d}}else try{d=a(h,l),Qg(t,i,d)}catch(P){Lf(t,i,P)}}function Qg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){$g(t,i,l)},function(l){return Lf(t,i,l)}):$g(t,i,a)}function $g(t,i,a){i.status="fulfilled",i.value=a,Yg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Kg(t,a)))}function Lf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Yg(i),i=i.next;while(i!==l)}t.action=null}function Yg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Xg(t,i){return i}function Wg(t,i){if(je){var a=We.formState;if(a!==null){e:{var l=Ie;if(je){if(Bt){t:{for(var h=Bt,d=li;h.nodeType!==8;){if(!d){h=null;break t}if(h=Qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Bt=Qn(h.nextSibling),l=h.data==="F!";break e}}ks(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xg,lastRenderedState:i},a.queue=l,a=p_.bind(null,Ie,l),l.dispatch=a,l=Uf(!1),d=Ff.bind(null,Ie,!1,l.queue),l=cn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=nb.bind(null,Ie,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Zg(t){var i=vt();return Jg(i,$e,t)}function Jg(t,i,a){i=Vf(t,i,Xg)[0],t=ac(ji)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?sl(i):i;var l=vt(),h=l.queue,d=h.dispatch;return a!==l.memoizedState&&(Ie.flags|=2048,Pa(9,ib.bind(null,h,a),{destroy:void 0},null)),[i,d,t]}function ib(t,i){t.action=i}function e_(t){var i=vt(),a=$e;if(a!==null)return Jg(i,a,t);vt(),i=i.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Pa(t,i,a,l){return t={tag:t,create:i,inst:a,deps:l,next:null},i=Ie.updateQueue,i===null&&(i=rc(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function t_(){return vt().memoizedState}function oc(t,i,a,l){var h=cn();Ie.flags|=t,h.memoizedState=Pa(1|i,a,{destroy:void 0},l===void 0?null:l)}function lc(t,i,a,l){var h=vt();l=l===void 0?null:l;var d=h.memoizedState.inst;$e!==null&&l!==null&&Df(l,$e.memoizedState.deps)?h.memoizedState=Pa(i,a,d,l):(Ie.flags|=t,h.memoizedState=Pa(1|i,a,d,l))}function n_(t,i){oc(8390656,8,t,i)}function zf(t,i){lc(2048,8,t,i)}function i_(t,i){return lc(4,2,t,i)}function r_(t,i){return lc(4,4,t,i)}function s_(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function a_(t,i,a){a=a!=null?a.concat([t]):null,lc(4,4,s_.bind(null,i,t),a)}function Bf(){}function o_(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Df(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function l_(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Df(i,l[1]))return l[0];if(l=t(),Ps){Wn(!0);try{t()}finally{Wn(!1)}}return a.memoizedState=[l,i],l}function jf(t,i,a){return a===void 0||xr&1073741824?t.memoizedState=i:(t.memoizedState=a,t=cy(),Ie.lanes|=t,qr|=t,a)}function u_(t,i,a,l){return gn(a,i)?a:Oa.current!==null?(t=jf(t,a,l),gn(t,i)||(Vt=!0),t):xr&42?(t=cy(),Ie.lanes|=t,qr|=t,i):(Vt=!0,t.memoizedState=a)}function c_(t,i,a,l,h){var d=le.p;le.p=d!==0&&8>d?d:8;var v=b.T,T={};b.T=T,Ff(t,!1,i,a);try{var C=h(),P=b.S;if(P!==null&&P(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var X=JA(C,l);al(t,i,X,En(t))}else al(t,i,l,En(t))}catch(te){al(t,i,{then:function(){},status:"rejected",reason:te},En())}finally{le.p=d,b.T=v}}function rb(){}function qf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=h_(t).queue;c_(t,h,i,Ce,a===null?rb:function(){return f_(t),a(l)})}function h_(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:Ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function f_(t){var i=h_(t).next.queue;al(t,i,{},En())}function Hf(){return Qt(Rl)}function d_(){return vt().memoizedState}function m_(){return vt().memoizedState}function sb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();t=Pr(a);var l=Ur(i,t,a);l!==null&&(sn(l,i,a),ul(l,i,a)),i={cache:Rf()},t.payload=i;return}i=i.return}}function ab(t,i,a){var l=En();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},uc(t)?g_(i,a):(a=vf(t,i,a,l),a!==null&&(sn(a,t,l),__(a,i,l)))}function p_(t,i,a){var l=En();al(t,i,a,l)}function al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(t))g_(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,gn(T,v))return Ku(t,i,h,0),We===null&&Gu(),!1}catch{}finally{}if(a=vf(t,i,h,l),a!==null)return sn(a,t,l),__(a,i,l),!0}return!1}function Ff(t,i,a,l){if(l={lane:2,revertLane:kd(),action:l,hasEagerState:!1,eagerState:null,next:null},uc(t)){if(i)throw Error(s(479))}else i=vf(t,a,l,2),i!==null&&sn(i,t,2)}function uc(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function g_(t,i){Ma=nc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function __(t,i,a){if(a&4194176){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,vr(t,a)}}var ci={readContext:Qt,use:sc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt};ci.useCacheRefresh=mt,ci.useMemoCache=mt,ci.useHostTransitionStatus=mt,ci.useFormState=mt,ci.useActionState=mt,ci.useOptimistic=mt;var Us={readContext:Qt,use:sc,useCallback:function(t,i){return cn().memoizedState=[t,i===void 0?null:i],t},useContext:Qt,useEffect:n_,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,oc(4194308,4,s_.bind(null,i,t),a)},useLayoutEffect:function(t,i){return oc(4194308,4,t,i)},useInsertionEffect:function(t,i){oc(4,2,t,i)},useMemo:function(t,i){var a=cn();i=i===void 0?null:i;var l=t();if(Ps){Wn(!0);try{t()}finally{Wn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=cn();if(a!==void 0){var h=a(i);if(Ps){Wn(!0);try{a(i)}finally{Wn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ab.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=cn();return t={current:t},i.memoizedState=t},useState:function(t){t=Uf(t);var i=t.queue,a=p_.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(t,i){var a=cn();return jf(a,t,i)},useTransition:function(){var t=Uf(!1);return t=c_.bind(null,Ie,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,h=cn();if(je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),We===null)throw Error(s(349));Ue&60||Bg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,n_(qg.bind(null,l,d,t),[t]),l.flags|=2048,Pa(9,jg.bind(null,l,d,a,i),{destroy:void 0},null),a},useId:function(){var t=cn(),i=We.identifierPrefix;if(je){var a=zi,l=Li;a=(l&~(1<<32-en(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=ic++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=eb++,i=":"+i+"r"+a.toString(32)+":";return t.memoizedState=i},useCacheRefresh:function(){return cn().memoizedState=sb.bind(null,Ie)}};Us.useMemoCache=Mf,Us.useHostTransitionStatus=Hf,Us.useFormState=Wg,Us.useActionState=Wg,Us.useOptimistic=function(t){var i=cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ff.bind(null,Ie,!0,a),a.dispatch=i,[t,i]};var kr={readContext:Qt,use:sc,useCallback:o_,useContext:Qt,useEffect:zf,useImperativeHandle:a_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:ac,useRef:t_,useState:function(){return ac(ji)},useDebugValue:Bf,useDeferredValue:function(t,i){var a=vt();return u_(a,$e.memoizedState,t,i)},useTransition:function(){var t=ac(ji)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:zg,useId:d_};kr.useCacheRefresh=m_,kr.useMemoCache=Mf,kr.useHostTransitionStatus=Hf,kr.useFormState=Zg,kr.useActionState=Zg,kr.useOptimistic=function(t,i){var a=vt();return Gg(a,$e,t,i)};var Ls={readContext:Qt,use:sc,useCallback:o_,useContext:Qt,useEffect:zf,useImperativeHandle:a_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:Pf,useRef:t_,useState:function(){return Pf(ji)},useDebugValue:Bf,useDeferredValue:function(t,i){var a=vt();return $e===null?jf(a,t,i):u_(a,$e.memoizedState,t,i)},useTransition:function(){var t=Pf(ji)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:zg,useId:d_};Ls.useCacheRefresh=m_,Ls.useMemoCache=Mf,Ls.useHostTransitionStatus=Hf,Ls.useFormState=e_,Ls.useActionState=e_,Ls.useOptimistic=function(t,i){var a=vt();return $e!==null?Gg(a,$e,t,i):(a.baseState=t,[t,a.queue.dispatch])};function Gf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:I({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={isMounted:function(t){return(t=t._reactInternals)?ge(t)===t:!1},enqueueSetState:function(t,i,a){t=t._reactInternals;var l=En(),h=Pr(l);h.payload=i,a!=null&&(h.callback=a),i=Ur(t,h,l),i!==null&&(sn(i,t,l),ul(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=En(),h=Pr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ur(t,h,l),i!==null&&(sn(i,t,l),ul(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=En(),l=Pr(a);l.tag=2,i!=null&&(l.callback=i),i=Ur(t,l,a),i!==null&&(sn(i,t,a),ul(i,t,a))}};function y_(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Qo(a,l)||!Qo(h,d):!0}function v_(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Kf.enqueueReplaceState(i,i.state,null)}function zs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=I({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var cc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function E_(t){cc(t)}function T_(t){console.error(t)}function A_(t){cc(t)}function hc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function b_(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Qf(t,i,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){hc(t,i)},a}function S_(t){return t=Pr(t),t.tag=3,t}function w_(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){b_(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){b_(i,a,l),typeof h!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ob(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ll(i,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 13:return ui===null?Id():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===bf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Nd(t,l,h)),!1;case 22:return a.flags|=65536,l===bf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Nd(t,l,h)),!1}throw Error(s(435,a.tag))}return Nd(t,l,h),Id(),!1}if(je)return i=Vn.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Af&&(t=Error(s(422),{cause:l}),Wo(xn(t,a)))):(l!==Af&&(i=Error(s(423),{cause:l}),Wo(xn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=xn(l,a),h=Qf(t.stateNode,l,h),ld(t,h),ht!==4&&(ht=2)),!1;var d=Error(s(520),{cause:l});if(d=xn(d,a),_l===null?_l=[d]:_l.push(d),ht!==4&&(ht=2),i===null)return!0;l=xn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Qf(a.stateNode,l,t),ld(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hr===null||!Hr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=S_(h),w_(h,t,a,l),ld(a,h),!1}a=a.return}while(a!==null);return!1}var R_=Error(s(461)),Vt=!1;function jt(t,i,a,l){i.child=t===null?Og(i,null,a,l):Ms(i,t.child,a,l)}function C_(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return js(i),l=Nf(t,i,a,v,d,h),T=Of(),t!==null&&!Vt?(xf(t,i,h),qi(t,i,h)):(je&&T&&Ef(i),i.flags|=1,jt(t,i,l,h),i.child)}function I_(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!gd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,D_(t,i,d,l,h)):(t=gc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!nd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(v,l)&&t.ref===i.ref)return qi(t,i,h)}return i.flags|=1,t=jr(d,l),t.ref=i.ref,t.return=i,i.child=t}function D_(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Qo(d,l)&&t.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,nd(t,h))t.flags&131072&&(Vt=!0);else return i.lanes=t.lanes,qi(t,i,h)}return $f(t,i,a,l,h)}function N_(t,i,a){var l=i.pendingProps,h=l.children,d=(i.stateNode._pendingVisibility&2)!==0,v=t!==null?t.memoizedState:null;if(ol(t,i),l.mode==="hidden"||d){if(i.flags&128){if(l=v!==null?v.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return O_(t,i,l,a)}if(a&536870912)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&tc(i,v!==null?v.cachePool:null),v!==null?xg(i,v):Sf(),kg(i);else return i.lanes=i.childLanes=536870912,O_(t,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(tc(i,v.cachePool),xg(i,v),Or(),i.memoizedState=null):(t!==null&&tc(i,null),Sf(),Or());return jt(t,i,h,a),i.child}function O_(t,i,a,l){var h=If();return h=h===null?null:{parent:Ct._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&tc(i,null),Sf(),kg(i),t!==null&&ll(t,i,l,!0),null}function ol(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=2097664)}}function $f(t,i,a,l,h){return js(i),a=Nf(t,i,a,l,void 0,h),l=Of(),t!==null&&!Vt?(xf(t,i,h),qi(t,i,h)):(je&&l&&Ef(i),i.flags|=1,jt(t,i,a,h),i.child)}function x_(t,i,a,l,h,d){return js(i),i.updateQueue=null,a=Lg(i,l,a,h),Ug(t),l=Of(),t!==null&&!Vt?(xf(t,i,d),qi(t,i,d)):(je&&l&&Ef(i),i.flags|=1,jt(t,i,a,d),i.child)}function k_(t,i,a,l,h){if(js(i),i.stateNode===null){var d=Ca,v=a.contextType;typeof v=="object"&&v!==null&&(d=Qt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},ad(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Qt(v):Ca,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Gf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Kf.enqueueReplaceState(d,d.state,null),hl(i,l,d,h),cl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,C=zs(a,T);d.props=C;var P=d.context,X=a.contextType;v=Ca,typeof X=="object"&&X!==null&&(v=Qt(X));var te=a.getDerivedStateFromProps;X=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||P!==v)&&v_(i,d,l,v),Vr=!1;var H=i.memoizedState;d.state=H,hl(i,l,d,h),cl(),P=i.memoizedState,T||H!==P||Vr?(typeof te=="function"&&(Gf(i,a,te,l),P=i.memoizedState),(C=Vr||y_(i,a,C,l,H,P,v))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=P),d.props=l,d.state=P,d.context=v,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,od(t,i),v=i.memoizedProps,X=zs(a,v),d.props=X,te=i.pendingProps,H=d.context,P=a.contextType,C=Ca,typeof P=="object"&&P!==null&&(C=Qt(P)),T=a.getDerivedStateFromProps,(P=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==te||H!==C)&&v_(i,d,l,C),Vr=!1,H=i.memoizedState,d.state=H,hl(i,l,d,h),cl();var Y=i.memoizedState;v!==te||H!==Y||Vr||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof T=="function"&&(Gf(i,a,T,l),Y=i.memoizedState),(X=Vr||y_(i,a,X,l,H,Y,C)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=C,l=X):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,ol(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ms(i,t.child,null,h),i.child=Ms(i,null,a,h)):jt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=qi(t,i,h),t}function M_(t,i,a,l){return Xo(),i.flags|=256,jt(t,i,a,l),i.child}var Yf={dehydrated:null,treeContext:null,retryLane:0};function Xf(t){return{baseLanes:t,cachePool:Pg()}}function Wf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=zn),t}function V_(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Rt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(je){if(h?Nr(i):Or(),je){var T=Bt,C;if(C=T){e:{for(C=T,T=li;C.nodeType!==8;){if(!T){T=null;break e}if(C=Qn(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(i.memoizedState={dehydrated:T,treeContext:Os!==null?{id:Li,overflow:zi}:null,retryLane:536870912},C=Ln(18,null,null,0),C.stateNode=T,C.return=i,i.child=C,rn=i,Bt=null,C=!0):C=!1}C||ks(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?i.lanes=16:i.lanes=536870912,null;Bi(i)}return T=l.children,l=l.fallback,h?(Or(),h=i.mode,T=Jf({mode:"hidden",children:T},h),l=Hs(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=Xf(a),h.childLanes=Wf(t,v,a),i.memoizedState=Yf,l):(Nr(i),Zf(i,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(d)i.flags&256?(Nr(i),i.flags&=-257,i=ed(t,i,a)):i.memoizedState!==null?(Or(),i.child=t.child,i.flags|=128,i=null):(Or(),h=l.fallback,T=i.mode,l=Jf({mode:"visible",children:l.children},T),h=Hs(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ms(i,t.child,null,a),l=i.child,l.memoizedState=Xf(a),l.childLanes=Wf(t,v,a),i.memoizedState=Yf,i=h);else if(Nr(i),T.data==="$!"){if(v=T.nextSibling&&T.nextSibling.dataset,v)var P=v.dgst;v=P,l=Error(s(419)),l.stack="",l.digest=v,Wo({value:l,source:null,stack:null}),i=ed(t,i,a)}else if(Vt||ll(t,i,a,!1),v=(a&t.childLanes)!==0,Vt||v){if(v=We,v!==null){if(l=a&-a,l&42)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=l&(v.suspendedLanes|a)?0:l,l!==0&&l!==C.retryLane)throw C.retryLane=l,Dr(t,l),sn(v,t,l),R_}T.data==="$?"||Id(),i=ed(t,i,a)}else T.data==="$?"?(i.flags|=128,i.child=t.child,i=Ab.bind(null,t),T._reactRetry=i,i=null):(t=C.treeContext,Bt=Qn(T.nextSibling),rn=i,je=!0,Gn=null,li=!1,t!==null&&(kn[Mn++]=Li,kn[Mn++]=zi,kn[Mn++]=Os,Li=t.id,zi=t.overflow,Os=i),i=Zf(i,l.children),i.flags|=4096);return i}return h?(Or(),h=l.fallback,T=i.mode,C=t.child,P=C.sibling,l=jr(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&31457280,P!==null?h=jr(P,h):(h=Hs(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=Xf(a):(C=T.cachePool,C!==null?(P=Ct._currentValue,C=C.parent!==P?{parent:P,pool:P}:C):C=Pg(),T={baseLanes:T.baseLanes|a,cachePool:C}),h.memoizedState=T,h.childLanes=Wf(t,v,a),i.memoizedState=Yf,l):(Nr(i),a=t.child,t=a.sibling,a=jr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Zf(t,i){return i=Jf({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Jf(t,i){return oy(t,i,0,null)}function ed(t,i,a){return Ms(i,t.child,null,a),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function P_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),rd(t.return,i,a)}function td(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function U_(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(jt(t,i,l.children,a),l=Rt.current,l&2)l=l&1|2,i.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P_(t,a,i);else if(t.tag===19)P_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Qe(Rt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&ec(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),td(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&ec(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}td(i,!0,a,null,d);break;case"together":td(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),qr|=i.lanes,!(a&i.childLanes))if(t!==null){if(ll(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=jr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=jr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function nd(t,i){return t.lanes&i?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function lb(t,i,a){switch(i.tag){case 3:dr(i,i.stateNode.containerInfo),Mr(i,Ct,t.memoizedState.cache),Xo();break;case 27:case 5:Ro(i);break;case 4:dr(i,i.stateNode.containerInfo);break;case 10:Mr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Nr(i),i.flags|=128,null):a&i.child.childLanes?V_(t,i,a):(Nr(i),t=qi(t,i,a),t!==null?t.sibling:null);Nr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ll(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return U_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Qe(Rt,Rt.current),l)break;return null;case 22:case 23:return i.lanes=0,N_(t,i,a);case 24:Mr(i,Ct,t.memoizedState.cache)}return qi(t,i,a)}function L_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Vt=!0;else{if(!nd(t,a)&&!(i.flags&128))return Vt=!1,lb(t,i,a);Vt=!!(t.flags&131072)}else Vt=!1,je&&i.flags&1048576&&Ag(i,Yu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")gd(l)?(t=zs(l,t),i.tag=1,i=k_(null,i,l,t,a)):(i.tag=0,i=$f(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===M){i.tag=11,i=C_(null,i,l,t,a);break e}else if(h===K){i.tag=14,i=I_(null,i,l,t,a);break e}}throw i=w(l)||l,Error(s(306,i,""))}}return i;case 0:return $f(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=zs(l,i.pendingProps),k_(t,i,l,h,a);case 3:e:{if(dr(i,i.stateNode.containerInfo),t===null)throw Error(s(387));var d=i.pendingProps;h=i.memoizedState,l=h.element,od(t,i),hl(i,d,null,a);var v=i.memoizedState;if(d=v.cache,Mr(i,Ct,d),d!==h.cache&&sd(i,[Ct],a,!0),cl(),d=v.element,h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=M_(t,i,d,a);break e}else if(d!==l){l=xn(Error(s(424)),i),Wo(l),i=M_(t,i,d,a);break e}else for(Bt=Qn(i.stateNode.containerInfo.firstChild),rn=i,je=!0,Gn=null,li=!0,a=Og(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xo(),d===l){i=qi(t,i,a);break e}jt(t,i,d,a)}i=i.child}return i;case 26:return ol(t,i),t===null?(a=jy(i.type,null,i.pendingProps,null))?i.memoizedState=a:je||(a=i.type,t=i.pendingProps,l=Ic(Sn.current).createElement(a),l[xt]=i,l[bt]=t,qt(l,a,t),it(l),i.stateNode=l):i.memoizedState=jy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ro(i),t===null&&je&&(l=i.stateNode=Ly(i.type,i.pendingProps,Sn.current),rn=i,li=!0,Bt=Qn(l.firstChild)),l=i.pendingProps.children,t!==null||je?jt(t,i,l,a):i.child=Ms(i,null,l,a),ol(t,i),i.child;case 5:return t===null&&je&&((h=l=Bt)&&(l=Lb(l,i.type,i.pendingProps,li),l!==null?(i.stateNode=l,rn=i,Bt=Qn(l.firstChild),li=!1,h=!0):h=!1),h||ks(i)),Ro(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,qd(h,d)?l=null:v!==null&&qd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Nf(t,i,tb,null,null,a),Rl._currentValue=h),ol(t,i),jt(t,i,l,a),i.child;case 6:return t===null&&je&&((t=a=Bt)&&(a=zb(a,i.pendingProps,li),a!==null?(i.stateNode=a,rn=i,Bt=null,t=!0):t=!1),t||ks(i)),null;case 13:return V_(t,i,a);case 4:return dr(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ms(i,null,l,a):jt(t,i,l,a),i.child;case 11:return C_(t,i,i.type,i.pendingProps,a);case 7:return jt(t,i,i.pendingProps,a),i.child;case 8:return jt(t,i,i.pendingProps.children,a),i.child;case 12:return jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Mr(i,i.type,l.value),jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,js(i),h=Qt(h),l=l(h),i.flags|=1,jt(t,i,l,a),i.child;case 14:return I_(t,i,i.type,i.pendingProps,a);case 15:return D_(t,i,i.type,i.pendingProps,a);case 19:return U_(t,i,a);case 22:return N_(t,i,a);case 24:return js(i),l=Qt(Ct),t===null?(h=If(),h===null&&(h=We,d=Rf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},ad(i),Mr(i,Ct,h)):(t.lanes&a&&(od(t,i),hl(i,null,null,a),cl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Mr(i,Ct,l)):(l=d.cache,Mr(i,Ct,l),l!==h.cache&&sd(i,[Ct],a,!0))),jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}var id=ze(null),Bs=null,Hi=null;function Mr(t,i,a){Qe(id,i._currentValue),i._currentValue=a}function Fi(t){t._currentValue=id.current,lt(id)}function rd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function sd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),rd(d.return,a,t),l||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),rd(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ll(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if(h.flags&524288)d=!0;else if(h.flags&262144)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;gn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===fr.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}h=h.return}t!==null&&sd(i,t,a,l),i.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function js(t){Bs=t,Hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return z_(Bs,t)}function dc(t,i){return Bs===null&&js(t),z_(t,i)}function z_(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Hi===null){if(t===null)throw Error(s(308));Hi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Hi=Hi.next=i;return a}var Vr=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ur(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,st&2){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Qu(t),Eg(t,null,a),i}return Ku(t,l,i,a),Qu(t)}function ul(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,vr(t,a)}}function ld(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var ud=!1;function cl(){if(ud){var t=ka;if(t!==null)throw t}}function hl(t,i,a,l){ud=!1;var h=t.updateQueue;Vr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,P=C.next;C.next=null,v===null?d=P:v.next=P,v=C;var X=t.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=P:T.next=P,X.lastBaseUpdate=C))}if(d!==null){var te=h.baseState;v=0,X=P=C=null,T=d;do{var H=T.lane&-536870913,Y=H!==T.lane;if(Y?(Ue&H)===H:(l&H)===H){H!==0&&H===xa&&(ud=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=t,be=T;H=i;var ft=a;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){te=fe.call(ft,te,H);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,H=typeof fe=="function"?fe.call(ft,te,H):fe,H==null)break e;te=I({},te,H);break e;case 2:Vr=!0}}H=T.callback,H!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(P=X=Y,C=te):X=X.next=Y,v|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(C=te),h.baseState=C,h.firstBaseUpdate=P,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),qr|=v,t.lanes=v,t.memoizedState=te}}function B_(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function j_(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)B_(a[t],i)}function fl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){Xe(i,i.return,T)}}function Lr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var C=a;try{T()}catch(P){Xe(h,C,P)}}}l=l.next}while(l!==d)}}catch(P){Xe(i,i.return,P)}}function q_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{j_(i,a)}catch(l){Xe(t,t.return,l)}}}function H_(t,i,a){a.props=zs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,i,l)}}function qs(t,i){try{var a=t.ref;if(a!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var h=l;break;default:h=l}typeof a=="function"?t.refCleanup=a(h):a.current=h}}catch(d){Xe(t,i,d)}}function _n(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Xe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xe(t,i,h)}else a.current=null}function F_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Xe(t,t.return,h)}}function G_(t,i,a){try{var l=t.stateNode;kb(l,t.type,a,i),l[bt]=i}catch(h){Xe(t,t.return,h)}}function K_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(t,i):a.insertBefore(t,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(t,a)):(i=a,i.appendChild(t)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Cc));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(hd(t,i,a),t=t.sibling;t!==null;)hd(t,i,a),t=t.sibling}function mc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(mc(t,i,a),t=t.sibling;t!==null;)mc(t,i,a),t=t.sibling}var Gi=!1,ct=!1,fd=!1,Q_=typeof WeakSet=="function"?WeakSet:Set,Pt=null,$_=!1;function ub(t,i){if(t=t.containerInfo,Bd=Mc,t=hg(t),mf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,C=-1,P=0,X=0,te=t,H=null;t:for(;;){for(var Y;te!==a||h!==0&&te.nodeType!==3||(T=v+h),te!==d||l!==0&&te.nodeType!==3||(C=v+l),te.nodeType===3&&(v+=te.nodeValue.length),(Y=te.firstChild)!==null;)H=te,te=Y;for(;;){if(te===t)break t;if(H===a&&++P===h&&(T=v),H===d&&++X===l&&(C=v),(Y=te.nextSibling)!==null)break;te=H,H=te.parentNode}te=Y}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(jd={focusedElem:t,selectionRange:a},Mc=!1,Pt=i;Pt!==null;)if(i=Pt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Pt=t;else for(;Pt!==null;){switch(i=Pt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=zs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Xe(a,a.return,be)}}break;case 3:if(t&1024){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Gd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Pt=t;break}Pt=i.return}return fe=$_,$_=!1,fe}function Y_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(t,a),l&4&&fl(5,a);break;case 1:if(Qi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(T){Xe(a,a.return,T)}else{var h=zs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Xe(a,a.return,T)}}l&64&&q_(a),l&512&&qs(a,a.return);break;case 3:if(Qi(t,a),l&64&&(l=a.updateQueue,l!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{j_(l,t)}catch(T){Xe(a,a.return,T)}}break;case 26:Qi(t,a),l&512&&qs(a,a.return);break;case 27:case 5:Qi(t,a),i===null&&l&4&&F_(a),l&512&&qs(a,a.return);break;case 12:Qi(t,a);break;case 13:Qi(t,a),l&4&&Z_(t,a);break;case 22:if(h=a.memoizedState!==null||Gi,!h){i=i!==null&&i.memoizedState!==null||ct;var d=Gi,v=ct;Gi=h,(ct=i)&&!v?zr(t,a,(a.subtreeFlags&8772)!==0):Qi(t,a),Gi=d,ct=v}l&512&&(a.memoizedProps.mode==="manual"?qs(a,a.return):_n(a,a.return));break;default:Qi(t,a)}}function X_(t){var i=t.alternate;i!==null&&(t.alternate=null,X_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ys(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Et=null,yn=!1;function Ki(t,i,a){for(a=a.child;a!==null;)W_(t,i,a),a=a.sibling}function W_(t,i,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(mr,a)}catch{}switch(a.tag){case 26:ct||_n(a,i),Ki(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ct||_n(a,i);var l=Et,h=yn;for(Et=a.stateNode,Ki(t,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);ys(a),Et=l,yn=h;break;case 5:ct||_n(a,i);case 6:h=Et;var d=yn;if(Et=null,Ki(t,i,a),Et=h,yn=d,Et!==null)if(yn)try{t=Et,l=a.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(v){Xe(a,i,v)}else try{Et.removeChild(a.stateNode)}catch(v){Xe(a,i,v)}break;case 18:Et!==null&&(yn?(i=Et,a=a.stateNode,i.nodeType===8?Fd(i.parentNode,a):i.nodeType===1&&Fd(i,a),Nl(i)):Fd(Et,a.stateNode));break;case 4:l=Et,h=yn,Et=a.stateNode.containerInfo,yn=!0,Ki(t,i,a),Et=l,yn=h;break;case 0:case 11:case 14:case 15:ct||Lr(2,a,i),ct||Lr(4,a,i),Ki(t,i,a);break;case 1:ct||(_n(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&H_(a,i,l)),Ki(t,i,a);break;case 21:Ki(t,i,a);break;case 22:ct||_n(a,i),ct=(l=ct)||a.memoizedState!==null,Ki(t,i,a),ct=l;break;default:Ki(t,i,a)}}function Z_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nl(t)}catch(a){Xe(i,i.return,a)}}function cb(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Q_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Q_),i;default:throw Error(s(435,t.tag))}}function dd(t,i){var a=cb(t);i.forEach(function(l){var h=bb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Pn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:case 5:Et=T.stateNode,yn=!1;break e;case 3:Et=T.stateNode.containerInfo,yn=!0;break e;case 4:Et=T.stateNode.containerInfo,yn=!0;break e}T=T.return}if(Et===null)throw Error(s(160));W_(d,v,h),Et=null,yn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)J_(i,t),i=i.sibling}var Kn=null;function J_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Pn(i,t),Un(t),l&4&&(Lr(3,t,t.return),fl(3,t),Lr(5,t,t.return));break;case 1:Pn(i,t),Un(t),l&512&&(ct||a===null||_n(a,a.return)),l&64&&Gi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Kn;if(Pn(i,t),Un(t),l&512&&(ct||a===null||_n(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Tr]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),qt(d,l,a),d[xt]=t,it(d),l=d;break e;case"link":var v=Fy("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(l),qt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=Fy("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(l),qt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=t,it(d),l=d}t.stateNode=l}else Gy(h,t.type,t.stateNode);else t.stateNode=Hy(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Gy(h,t.type,t.stateNode):Hy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&G_(t,t.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){h=t.stateNode,d=t.memoizedProps;try{for(var C=h.firstChild;C;){var P=C.nextSibling,X=C.nodeName;C[Tr]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&C.rel.toLowerCase()==="stylesheet"||h.removeChild(C),C=P}for(var te=t.type,H=h.attributes;H.length;)h.removeAttributeNode(H[0]);qt(h,te,d),h[xt]=t,h[bt]=d}catch(fe){Xe(t,t.return,fe)}}case 5:if(Pn(i,t),Un(t),l&512&&(ct||a===null||_n(a,a.return)),t.flags&32){h=t.stateNode;try{Cn(h,"")}catch(fe){Xe(t,t.return,fe)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,G_(t,h,a!==null?a.memoizedProps:h)),l&1024&&(fd=!0);break;case 6:if(Pn(i,t),Un(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){Xe(t,t.return,fe)}}break;case 3:if(Oc=null,h=Kn,Kn=Dc(i.containerInfo),Pn(i,t),Kn=h,Un(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Nl(i.containerInfo)}catch(fe){Xe(t,t.return,fe)}fd&&(fd=!1,ey(t));break;case 4:l=Kn,Kn=Dc(t.stateNode.containerInfo),Pn(i,t),Un(t),Kn=l;break;case 12:Pn(i,t),Un(t);break;case 13:Pn(i,t),Un(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ad=ln()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 22:if(l&512&&(ct||a===null||_n(a,a.return)),C=t.memoizedState!==null,P=a!==null&&a.memoizedState!==null,X=Gi,te=ct,Gi=X||C,ct=te||P,Pn(i,t),ct=te,Gi=X,Un(t),i=t.stateNode,i._current=t,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=C?i._visibility&-2:i._visibility|1,C&&(i=Gi||ct,a===null||P||i||Ua(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(a=null,i=t;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){P=a=i;try{if(h=P.stateNode,C)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{v=P.stateNode,T=P.memoizedProps.style;var Y=T!=null&&T.hasOwnProperty("display")?T.display:null;v.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(fe){Xe(P,P.return,fe)}}}else if(i.tag===6){if(a===null){P=i;try{P.stateNode.nodeValue=C?"":P.memoizedProps}catch(fe){Xe(P,P.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dd(t,a))));break;case 19:Pn(i,t),Un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 21:break;default:Pn(i,t),Un(t)}}function Un(t){var i=t.flags;if(i&2){try{if(t.tag!==27){e:{for(var a=t.return;a!==null;){if(K_(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var h=l.stateNode,d=cd(t);mc(t,d,h);break;case 5:var v=l.stateNode;l.flags&32&&(Cn(v,""),l.flags&=-33);var T=cd(t);mc(t,T,v);break;case 3:case 4:var C=l.stateNode.containerInfo,P=cd(t);hd(t,P,C);break;default:throw Error(s(161))}}}catch(X){Xe(t,t.return,X)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function ey(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;ey(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Qi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Y_(t,i.alternate,i),i=i.sibling}function Ua(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Ua(i);break;case 1:_n(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&H_(i,i.return,a),Ua(i);break;case 26:case 27:case 5:_n(i,i.return),Ua(i);break;case 22:_n(i,i.return),i.memoizedState===null&&Ua(i);break;default:Ua(i)}t=t.sibling}}function zr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:zr(h,d,a),fl(4,d);break;case 1:if(zr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Xe(l,l.return,P)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)B_(C[h],T)}catch(P){Xe(l,l.return,P)}}a&&v&64&&q_(d),qs(d,d.return);break;case 26:case 27:case 5:zr(h,d,a),a&&l===null&&v&4&&F_(d),qs(d,d.return);break;case 12:zr(h,d,a);break;case 13:zr(h,d,a),a&&v&4&&Z_(h,d);break;case 22:d.memoizedState===null&&zr(h,d,a),qs(d,d.return);break;default:zr(h,d,a)}i=i.sibling}}function md(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&nl(a))}function pd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t))}function Br(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ty(t,i,a,l),i=i.sibling}function ty(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Br(t,i,a,l),h&2048&&fl(9,i);break;case 3:Br(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t)));break;case 12:if(h&2048){Br(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Xe(i,i.return,C)}}else Br(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,i.memoizedState!==null?d._visibility&4?Br(t,i,a,l):dl(t,i):d._visibility&4?Br(t,i,a,l):(d._visibility|=4,La(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&md(i.alternate,i);break;case 24:Br(t,i,a,l),h&2048&&pd(i.alternate,i);break;default:Br(t,i,a,l)}}function La(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,T=a,C=l,P=v.flags;switch(v.tag){case 0:case 11:case 15:La(d,v,T,C,h),fl(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&4?La(d,v,T,C,h):dl(d,v):(X._visibility|=4,La(d,v,T,C,h)),h&&P&2048&&md(v.alternate,v);break;case 24:La(d,v,T,C,h),h&&P&2048&&pd(v.alternate,v);break;default:La(d,v,T,C,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&md(l.alternate,l);break;case 24:dl(a,l),h&2048&&pd(l.alternate,l);break;default:dl(a,l)}i=i.sibling}}var ml=8192;function za(t){if(t.subtreeFlags&ml)for(t=t.child;t!==null;)ny(t),t=t.sibling}function ny(t){switch(t.tag){case 26:za(t),t.flags&ml&&t.memoizedState!==null&&Zb(Kn,t.memoizedState,t.memoizedProps);break;case 5:za(t);break;case 3:case 4:var i=Kn;Kn=Dc(t.stateNode.containerInfo),za(t),Kn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=ml,ml=16777216,za(t),ml=i):za(t));break;default:za(t)}}function iy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function pl(t){var i=t.deletions;if(t.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,sy(l,t)}iy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ry(t),t=t.sibling}function ry(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&Lr(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&4&&(t.return===null||t.return.tag!==13)?(i._visibility&=-5,pc(t)):pl(t);break;default:pl(t)}}function pc(t){var i=t.deletions;if(t.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,sy(l,t)}iy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),pc(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,pc(i));break;default:pc(i)}t=t.sibling}}function sy(t,i){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Lr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=t;Pt!==null;){l=Pt;var h=l.sibling,d=l.return;if(X_(l),l===a){Pt=null;break e}if(h!==null){h.return=d,Pt=h;break e}Pt=d}}}function hb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,i,a,l){return new hb(t,i,a,l)}function gd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jr(t,i){var a=t.alternate;return a===null?(a=Ln(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&31457280,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ay(t,i){t.flags&=31457282;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function gc(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")gd(t)&&(v=1);else if(typeof t=="string")v=Xb(t,a,Jt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case p:return Hs(a.children,h,d,i);case _:v=8,h|=24;break;case E:return t=Ln(12,a,i,h|2),t.elementType=E,t.lanes=d,t;case F:return t=Ln(13,a,i,h),t.elementType=F,t.lanes=d,t;case L:return t=Ln(19,a,i,h),t.elementType=L,t.lanes=d,t;case Q:return oy(a,h,d,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S:case N:v=10;break e;case R:v=9;break e;case M:v=11;break e;case K:v=14;break e;case ee:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Ln(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Hs(t,i,a,l){return t=Ln(7,t,l,i),t.lanes=a,t}function oy(t,i,a,l){t=Ln(22,t,l,i),t.elementType=Q,t.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=h._current;if(d===null)throw Error(s(456));if(!(h._pendingVisibility&2)){var v=Dr(d,2);v!==null&&(h._pendingVisibility|=2,sn(v,d,2))}},attach:function(){var d=h._current;if(d===null)throw Error(s(456));if(h._pendingVisibility&2){var v=Dr(d,2);v!==null&&(h._pendingVisibility&=-3,sn(v,d,2))}}};return t.stateNode=h,t}function _d(t,i,a){return t=Ln(6,t,null,i),t.lanes=a,t}function yd(t,i,a){return i=Ln(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function $i(t){t.flags|=4}function ly(t,i){if(i.type!=="stylesheet"||i.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Ky(i)){if(i=Vn.current,i!==null&&((Ue&4194176)===Ue?ui!==null:(Ue&62914560)!==Ue&&!(Ue&536870912)||i!==ui))throw Jo=bf,wg;t.flags|=8192}}function _c(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?_r():536870912,t.lanes|=i,ja|=i)}function gl(t,i){if(!je)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&31457280,l|=h.flags&31457280,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function fb(t,i,a){var l=i.pendingProps;switch(Tf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fi(Ct),Ci(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Yo(i)?$i(i):t===null||t.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Gn!==null&&(Rd(Gn),Gn=null))),rt(i),null;case 26:return a=i.memoizedState,t===null?($i(i),a!==null?(rt(i),ly(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?($i(i),rt(i),ly(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==l&&$i(i),rt(i),i.flags&=-16777217),null;case 27:aa(i),a=Sn.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=Jt.current,Yo(i)?bg(i):(t=Ly(h,l,a),i.stateNode=t,$i(i))}return rt(i),null;case 5:if(aa(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=Jt.current,Yo(i))bg(i);else{switch(h=Ic(Sn.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[xt]=i,t[bt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(qt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&$i(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Sn.current,Yo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||xy(t.nodeValue,a)),t||ks(i)}else t=Ic(t).createTextNode(l),t[xt]=i,i.stateNode=t}return rt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Yo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=i}else Xo(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else Gn!==null&&(Rd(Gn),Gn=null),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),i.flags&128)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),rt(i),null;case 4:return Ci(),t===null&&Ud(i.stateNode.containerInfo),rt(i),null;case 10:return Fi(i.type),rt(i),null;case 19:if(lt(Rt),h=i.memoizedState,h===null)return rt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)gl(h,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=i.child;t!==null;){if(d=ec(t),d!==null){for(i.flags|=128,gl(h,!1),t=d.updateQueue,i.updateQueue=t,_c(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ay(a,t),a=a.sibling;return Qe(Rt,Rt.current&1|2),i.child}t=t.sibling}h.tail!==null&&ln()>yc&&(i.flags|=128,l=!0,gl(h,!1),i.lanes=4194304)}else{if(!l)if(t=ec(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,_c(i,t),gl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!je)return rt(i),null}else 2*ln()-h.renderingStartTime>yc&&a!==536870912&&(i.flags|=128,l=!0,gl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ln(),i.sibling=null,t=Rt.current,Qe(Rt,l?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Bi(i),wf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?a&536870912&&!(i.flags&128)&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&lt(Vs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Fi(Ct),rt(i),null;case 25:return null}throw Error(s(156,i.tag))}function db(t,i){switch(Tf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Fi(Ct),Ci(),t=i.flags,t&65536&&!(t&128)?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return aa(i),null;case 13:if(Bi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return lt(Rt),null;case 4:return Ci(),null;case 10:return Fi(i.type),null;case 22:case 23:return Bi(i),wf(),t!==null&&lt(Vs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Fi(Ct),null;case 25:return null;default:return null}}function uy(t,i){switch(Tf(i),i.tag){case 3:Fi(Ct),Ci();break;case 26:case 27:case 5:aa(i);break;case 4:Ci();break;case 13:Bi(i);break;case 19:lt(Rt);break;case 10:Fi(i.type);break;case 22:case 23:Bi(i),wf(),t!==null&&lt(Vs);break;case 24:Fi(Ct)}}var mb={getCacheForType:function(t){var i=Qt(Ct),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},pb=typeof WeakMap=="function"?WeakMap:Map,st=0,We=null,Ne=null,Ue=0,Ze=0,vn=null,Yi=!1,Ba=!1,vd=!1,Xi=0,ht=0,qr=0,Fs=0,Ed=0,zn=0,ja=0,_l=null,hi=null,Td=!1,Ad=0,yc=1/0,vc=null,Hr=null,Ec=!1,Gs=null,yl=0,bd=0,Sd=null,vl=0,wd=null;function En(){if(st&2&&Ue!==0)return Ue&-Ue;if(b.T!==null){var t=xa;return t!==0?t:kd()}return Ru()}function cy(){zn===0&&(zn=!(Ue&536870912)||je?Oo():536870912);var t=Vn.current;return t!==null&&(t.flags|=32),zn}function sn(t,i,a){(t===We&&Ze===2||t.cancelPendingCommit!==null)&&(qa(t,0),Wi(t,Ue,zn,!1)),dt(t,a),(!(st&2)||t!==We)&&(t===We&&(!(st&2)&&(Fs|=a),ht===4&&Wi(t,Ue,zn,!1)),fi(t))}function hy(t,i,a){if(st&6)throw Error(s(327));var l=!a&&(i&60)===0&&(i&t.expiredLanes)===0||gr(t,i),h=l?yb(t,i):Dd(t,i,!0),d=l;do{if(h===0){Ba&&!l&&Wi(t,i,0,!1);break}else if(h===6)Wi(t,i,0,!Yi);else{if(a=t.current.alternate,d&&!gb(a)){h=Dd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=_l;var C=T.current.memoizedState.isDehydrated;if(C&&(qa(T,v).flags|=256),v=Dd(T,v,!1),v!==2){if(vd&&!C){T.errorRecoveryDisabledLanes|=d,Fs|=d,h=4;break e}d=hi,hi=h,d!==null&&Rd(d)}h=v}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),Wi(t,i,0,!0);break}e:{switch(l=t,h){case 0:case 1:throw Error(s(345));case 4:if((i&4194176)===i){Wi(l,i,zn,!Yi);break e}break;case 2:hi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(d=Ad+300-ln(),10<d)){if(Wi(l,i,zn,!Yi),wn(l,0)!==0)break e;l.timeoutHandle=Vy(fy.bind(null,l,a,hi,vc,Td,i,zn,Fs,ja,Yi,2,-0,0),d);break e}fy(l,a,hi,vc,Td,i,zn,Fs,ja,Yi,0,-0,0)}}break}while(!0);fi(t)}function Rd(t){hi===null?hi=t:hi.push.apply(hi,t)}function fy(t,i,a,l,h,d,v,T,C,P,X,te,H){var Y=i.subtreeFlags;if((Y&8192||(Y&16785408)===16785408)&&(wl={stylesheets:null,count:0,unsuspend:Wb},ny(i),i=Jb(),i!==null)){t.cancelPendingCommit=i(vy.bind(null,t,a,l,h,v,T,C,1,te,H)),Wi(t,d,v,!P);return}vy(t,a,l,h,v,T,C,X,te,H)}function gb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!gn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wi(t,i,a,l){i&=~Ed,i&=~Fs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-en(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&yr(t,a,i)}function Tc(){return st&6?!0:(El(0),!1)}function Cd(){if(Ne!==null){if(Ze===0)var t=Ne.return;else t=Ne,Hi=Bs=null,kf(t),Na=null,el=0,t=Ne;for(;t!==null;)uy(t.alternate,t),t=t.return;Ne=null}}function qa(t,i){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Vb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Cd(),We=t,Ne=a=jr(t.current,null),Ue=i,Ze=0,vn=null,Yi=!1,Ba=gr(t,i),vd=!1,ja=zn=Ed=Fs=qr=ht=0,hi=_l=null,Td=!1,i&8&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-en(l),d=1<<h;i|=t[h],l&=~d}return Xi=i,Gu(),a}function dy(t,i){Ie=null,b.H=ci,i===Zo?(i=Ig(),Ze=3):i===wg?(i=Ig(),Ze=4):Ze=i===R_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Ne===null&&(ht=1,hc(t,xn(i,t.current)))}function my(){var t=b.H;return b.H=ci,t===null?ci:t}function py(){var t=b.A;return b.A=mb,t}function Id(){ht=4,Yi||(Ue&4194176)!==Ue&&Vn.current!==null||(Ba=!0),!(qr&134217727)&&!(Fs&134217727)||We===null||Wi(We,Ue,zn,!1)}function Dd(t,i,a){var l=st;st|=2;var h=my(),d=py();(We!==t||Ue!==i)&&(vc=null,qa(t,i)),i=!1;var v=ht;e:do try{if(Ze!==0&&Ne!==null){var T=Ne,C=vn;switch(Ze){case 8:Cd(),v=6;break e;case 3:case 2:case 6:Vn.current===null&&(i=!0);var P=Ze;if(Ze=0,vn=null,Ha(t,T,C,P),a&&Ba){v=0;break e}break;default:P=Ze,Ze=0,vn=null,Ha(t,T,C,P)}}_b(),v=ht;break}catch(X){dy(t,X)}while(!0);return i&&t.shellSuspendCounter++,Hi=Bs=null,st=l,b.H=h,b.A=d,Ne===null&&(We=null,Ue=0,Gu()),v}function _b(){for(;Ne!==null;)gy(Ne)}function yb(t,i){var a=st;st|=2;var l=my(),h=py();We!==t||Ue!==i?(vc=null,yc=ln()+500,qa(t,i)):Ba=gr(t,i);e:do try{if(Ze!==0&&Ne!==null){i=Ne;var d=vn;t:switch(Ze){case 1:Ze=0,vn=null,Ha(t,i,d,1);break;case 2:if(Rg(d)){Ze=0,vn=null,_y(i);break}i=function(){Ze===2&&We===t&&(Ze=7),fi(t)},d.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Rg(d)?(Ze=0,vn=null,_y(i)):(Ze=0,vn=null,Ha(t,i,d,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var T=Ne;if(!v||Ky(v)){Ze=0,vn=null;var C=T.sibling;if(C!==null)Ne=C;else{var P=T.return;P!==null?(Ne=P,Ac(P)):Ne=null}break t}}Ze=0,vn=null,Ha(t,i,d,5);break;case 6:Ze=0,vn=null,Ha(t,i,d,6);break;case 8:Cd(),ht=6;break e;default:throw Error(s(462))}}vb();break}catch(X){dy(t,X)}while(!0);return Hi=Bs=null,b.H=l,b.A=h,st=a,Ne!==null?0:(We=null,Ue=0,Gu(),ht)}function vb(){for(;Ne!==null&&!nf();)gy(Ne)}function gy(t){var i=L_(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,i===null?Ac(t):Ne=i}function _y(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=x_(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=x_(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:kf(i);default:uy(a,i),i=Ne=ay(i,Xi),i=L_(a,i,Xi)}t.memoizedProps=t.pendingProps,i===null?Ac(t):Ne=i}function Ha(t,i,a,l){Hi=Bs=null,kf(i),Na=null,el=0;var h=i.return;try{if(ob(t,h,i,a,Ue)){ht=1,hc(t,xn(a,t.current)),Ne=null;return}}catch(d){if(h!==null)throw Ne=h,d;ht=1,hc(t,xn(a,t.current)),Ne=null;return}i.flags&32768?(je||l===1?t=!0:Ba||Ue&536870912?t=!1:(Yi=t=!0,(l===2||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),yy(i,t)):Ac(i)}function Ac(t){var i=t;do{if(i.flags&32768){yy(i,Yi);return}t=i.return;var a=fb(i.alternate,i,Xi);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);ht===0&&(ht=5)}function yy(t,i){do{var a=db(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ht=6,Ne=null}function vy(t,i,a,l,h,d,v,T,C,P){var X=b.T,te=le.p;try{le.p=2,b.T=null,Eb(t,i,a,l,te,h,d,v,T,C,P)}finally{b.T=X,le.p=te}}function Eb(t,i,a,l,h,d,v,T){do Fa();while(Gs!==null);if(st&6)throw Error(s(327));var C=t.finishedWork;if(l=t.finishedLanes,C===null)return null;if(t.finishedWork=null,t.finishedLanes=0,C===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var P=C.lanes|C.childLanes;if(P|=yf,Su(t,l,P,d,v,T),t===We&&(Ne=We=null,Ue=0),!(C.subtreeFlags&10256)&&!(C.flags&10256)||Ec||(Ec=!0,bd=P,Sd=a,Sb(Ii,function(){return Fa(),null})),a=(C.flags&15990)!==0,C.subtreeFlags&15990||a?(a=b.T,b.T=null,d=le.p,le.p=2,v=st,st|=4,ub(t,C),J_(C,t),FA(jd,t.containerInfo),Mc=!!Bd,jd=Bd=null,t.current=C,Y_(t,C.alternate,C),Co(),st=v,le.p=d,b.T=a):t.current=C,Ec?(Ec=!1,Gs=t,yl=l):Ey(t,P),P=t.pendingLanes,P===0&&(Hr=null),Do(C.stateNode),fi(t),i!==null)for(h=t.onRecoverableError,C=0;C<i.length;C++)P=i[C],h(P.value,{componentStack:P.stack});return yl&3&&Fa(),P=t.pendingLanes,l&4194218&&P&42?t===wd?vl++:(vl=0,wd=t):vl=0,El(0),null}function Ey(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,nl(i)))}function Fa(){if(Gs!==null){var t=Gs,i=bd;bd=0;var a=wu(yl),l=b.T,h=le.p;try{if(le.p=32>a?32:a,b.T=null,Gs===null)var d=!1;else{a=Sd,Sd=null;var v=Gs,T=yl;if(Gs=null,yl=0,st&6)throw Error(s(331));var C=st;if(st|=4,ry(v.current),ty(v,v.current,T,a),st=C,El(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(mr,v)}catch{}d=!0}return d}finally{le.p=h,b.T=l,Ey(t,i)}}return!1}function Ty(t,i,a){i=xn(a,i),i=Qf(t.stateNode,i,2),t=Ur(t,i,2),t!==null&&(dt(t,2),fi(t))}function Xe(t,i,a){if(t.tag===3)Ty(t,t,a);else for(;i!==null;){if(i.tag===3){Ty(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hr===null||!Hr.has(l))){t=xn(a,t),a=S_(2),l=Ur(i,a,2),l!==null&&(w_(a,l,i,t),dt(l,2),fi(l));break}}i=i.return}}function Nd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new pb;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(vd=!0,h.add(a),t=Tb.bind(null,t,i,a),i.then(t,t))}function Tb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,We===t&&(Ue&a)===a&&(ht===4||ht===3&&(Ue&62914560)===Ue&&300>ln()-Ad?!(st&2)&&qa(t,0):Ed|=a,ja===Ue&&(ja=0)),fi(t)}function Ay(t,i){i===0&&(i=_r()),t=Dr(t,i),t!==null&&(dt(t,i),fi(t))}function Ab(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Ay(t,a)}function bb(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Ay(t,a)}function Sb(t,i){return ps(t,i)}var bc=null,Ga=null,Od=!1,Sc=!1,xd=!1,Ks=0;function fi(t){t!==Ga&&t.next===null&&(Ga===null?bc=Ga=t:Ga=Ga.next=t),Sc=!0,Od||(Od=!0,Rb(wb))}function El(t,i){if(!xd&&Sc){xd=!0;do for(var a=!1,l=bc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-en(42|t)+1)-1,d&=h&~(v&~T),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,wy(l,d))}else d=Ue,d=wn(l,l===We?d:0),!(d&3)||gr(l,d)||(a=!0,wy(l,d));l=l.next}while(a);xd=!1}}function wb(){Sc=Od=!1;var t=0;Ks!==0&&(Mb()&&(t=Ks),Ks=0);for(var i=ln(),a=null,l=bc;l!==null;){var h=l.next,d=by(l,i);d===0?(l.next=null,a===null?bc=h:a.next=h,h===null&&(Ga=a)):(a=l,(t!==0||d&3)&&(Sc=!0)),l=h}El(t)}function by(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-en(d),T=1<<v,C=h[v];C===-1?(!(T&a)||T&l)&&(h[v]=ua(T,i)):C<=i&&(t.expiredLanes|=T),d&=~T}if(i=We,a=Ue,a=wn(t,t===i?a:0),l=t.callbackNode,a===0||t===i&&Ze===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&la(l),t.callbackNode=null,t.callbackPriority=0;if(!(a&3)||gr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&la(l),wu(a)){case 2:case 8:a=Ot;break;case 32:a=Ii;break;case 268435456:a=Io;break;default:a=Ii}return l=Sy.bind(null,t),a=ps(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&la(l),t.callbackPriority=2,t.callbackNode=null,2}function Sy(t,i){var a=t.callbackNode;if(Fa()&&t.callbackNode!==a)return null;var l=Ue;return l=wn(t,t===We?l:0),l===0?null:(hy(t,l,i),by(t,ln()),t.callbackNode!=null&&t.callbackNode===a?Sy.bind(null,t):null)}function wy(t,i){if(Fa())return null;hy(t,i,!0)}function Rb(t){Pb(function(){st&6?ps(At,t):t()})}function kd(){return Ks===0&&(Ks=Oo()),Ks}function Ry(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ti(""+t)}function Cy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Cb(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Ry((h[bt]||null).action),v=l.submitter;v&&(i=(i=v[bt]||null)?Ry(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new ga("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ks!==0){var C=v?Cy(h,v):new FormData(h);qf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=v?Cy(h,v):new FormData(h),qf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Md=0;Md<vg.length;Md++){var Vd=vg[Md],Ib=Vd.toLowerCase(),Db=Vd[0].toUpperCase()+Vd.slice(1);Fn(Ib,"on"+Db)}Fn(mg,"onAnimationEnd"),Fn(pg,"onAnimationIteration"),Fn(gg,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(KA,"onTransitionRun"),Fn(QA,"onTransitionStart"),Fn($A,"onTransitionCancel"),Fn(_g,"onTransitionEnd"),un("onMouseEnter",["mouseout","mouseover"]),un("onMouseLeave",["mouseout","mouseover"]),un("onPointerEnter",["pointerout","pointerover"]),un("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Iy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],C=T.instance,P=T.currentTarget;if(T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=P;try{d(h)}catch(X){cc(X)}h.currentTarget=null,d=C}else for(v=0;v<l.length;v++){if(T=l[v],C=T.instance,P=T.currentTarget,T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=P;try{d(h)}catch(X){cc(X)}h.currentTarget=null,d=C}}}}function ke(t,i){var a=i[_s];a===void 0&&(a=i[_s]=new Set);var l=t+"__bubble";a.has(l)||(Dy(i,t,2,!1),a.add(l))}function Pd(t,i,a){var l=0;i&&(l|=4),Dy(a,t,l,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Ud(t){if(!t[wc]){t[wc]=!0,ko.forEach(function(a){a!=="selectionchange"&&(Nb.has(a)||Pd(a,!1,t),Pd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,Pd("selectionchange",!1,i))}}function Dy(t,i,a,l){switch(Zy(i)){case 2:var h=nS;break;case 8:h=iS;break;default:h=Xd}a=h.bind(null,i,a,t),h=void 0,!Dn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Ld(t,i,a,l,h){var d=l;if(!(i&1)&&!(i&2)&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(v===4)for(v=l.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;v=v.return}for(;T!==null;){if(v=Hn(T),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){l=d=v;continue e}T=T.parentNode}}l=l.return}Nu(function(){var P=d,X=pa(a),te=[];e:{var H=yg.get(t);if(H!==void 0){var Y=ga,fe=t;switch(t){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":Y=Aa;break;case"focusin":fe="focus",Y=va;break;case"focusout":fe="blur",Y=va;break;case"beforeblur":case"afterblur":Y=va;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Lu;break;case mg:case pg:case gg:Y=Ea;break;case _g:Y=Bu;break;case"scroll":case"scrollend":Y=Ou;break;case"wheel":Y=ba;break;case"copy":case"cut":case"paste":Y=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Go;break;case"toggle":case"beforetoggle":Y=qu}var be=(i&4)!==0,ft=!be&&(t==="scroll"||t==="scrollend"),z=be?H!==null?H+"Capture":null:H;be=[];for(var V=P,j;V!==null;){var W=V;if(j=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||j===null||z===null||(W=As(V,z),W!=null&&be.push(Al(V,W,j))),ft)break;V=V.return}0<be.length&&(H=new Y(H,fe,null,a,X),te.push({event:H,listeners:be}))}}if(!(i&7)){e:{if(H=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",H&&a!==In&&(fe=a.relatedTarget||a.fromElement)&&(Hn(fe)||fe[Di]))break e;if((Y||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(fe=a.relatedTarget||a.toElement,Y=P,fe=fe?Hn(fe):null,fe!==null&&(ft=ge(fe),be=fe.tag,fe!==ft||be!==5&&be!==27&&be!==6)&&(fe=null)):(Y=null,fe=P),Y!==fe)){if(be=Nn,W="onMouseLeave",z="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(be=Go,W="onPointerLeave",z="onPointerEnter",V="pointer"),ft=Y==null?H:Ar(Y),j=fe==null?H:Ar(fe),H=new be(W,V+"leave",Y,a,X),H.target=ft,H.relatedTarget=j,W=null,Hn(X)===P&&(be=new be(z,V+"enter",fe,a,X),be.target=j,be.relatedTarget=ft,W=be),ft=W,Y&&fe)t:{for(be=Y,z=fe,V=0,j=be;j;j=Ka(j))V++;for(j=0,W=z;W;W=Ka(W))j++;for(;0<V-j;)be=Ka(be),V--;for(;0<j-V;)z=Ka(z),j--;for(;V--;){if(be===z||z!==null&&be===z.alternate)break t;be=Ka(be),z=Ka(z)}be=null}else be=null;Y!==null&&Ny(te,H,Y,be,!1),fe!==null&&ft!==null&&Ny(te,ft,fe,be,!0)}}e:{if(H=P?Ar(P):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var he=ig;else if(wt(H))if(rg)he=qA;else{he=BA;var De=zA}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?P&&Lo(P.elementType)&&(he=ig):he=jA;if(he&&(he=he(t,P))){Ui(te,he,a,X);break e}De&&De(t,H,P),t==="focusout"&&P&&H.type==="number"&&P.memoizedProps.value!=null&&ma(H,"number",H.value)}switch(De=P?Ar(P):window,t){case"focusin":(wt(De)||De.contentEditable==="true")&&(Sa=De,pf=P,$o=null);break;case"focusout":$o=pf=Sa=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,fg(te,a,X);break;case"selectionchange":if(GA)break;case"keydown":case"keyup":fg(te,a,X)}var pe;if(ai)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Ve?G(t,a)&&(ye="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(y&&a.locale!=="ko"&&(Ve||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Ve&&(pe=Bo()):(ni=X,Ir="value"in ni?ni.value:ni.textContent,Ve=!0)),De=Rc(P,ye),0<De.length&&(ye=new Ho(ye,t,null,a,X),te.push({event:ye,listeners:De}),pe?ye.data=pe:(pe=se(a),pe!==null&&(ye.data=pe)))),(pe=g?St(t,a):Pe(t,a))&&(ye=Rc(P,"onBeforeInput"),0<ye.length&&(De=new Ho("onBeforeInput","beforeinput",null,a,X),te.push({event:De,listeners:ye}),De.data=pe)),Cb(te,t,P,a,X)}Iy(te,i)})}function Al(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=As(t,a),h!=null&&l.unshift(Al(t,h,d)),h=As(t,i),h!=null&&l.push(Al(t,h,d))),t=t.return}return l}function Ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ny(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,C=T.alternate,P=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||P===null||(C=P,h?(P=As(a,d),P!=null&&v.unshift(Al(a,P,C))):h||(P=As(a,d),P!=null&&v.push(Al(a,P,C)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var Ob=/\r\n?/g,xb=/\u0000|\uFFFD/g;function Oy(t){return(typeof t=="string"?t:""+t).replace(Ob,`
`).replace(xb,"")}function xy(t,i){return i=Oy(i),Oy(t)===i}function Cc(){}function Ye(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Cn(t,""+l);break;case"className":wr(t,"class",l);break;case"tabIndex":wr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(t,a,l);break;case"style":Du(t,l,d);break;case"data":if(i!=="object"){wr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ti(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ye(t,i,"name",h.name,h,null),Ye(t,i,"formEncType",h.formEncType,h,null),Ye(t,i,"formMethod",h.formMethod,h,null),Ye(t,i,"formTarget",h.formTarget,h,null)):(Ye(t,i,"encType",h.encType,h,null),Ye(t,i,"method",h.method,h,null),Ye(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ti(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Cc);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ti(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),Sr(t,"popover",l);break;case"xlinkActuate":Rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lf.get(a)||a,Sr(t,a,l))}}function zd(t,i,a,l,h,d){switch(a){case"style":Du(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&Cn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[bt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Sr(t,a,l)}}}function qt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ye(t,i,d,v,a,null)}}h&&Ye(t,i,"srcSet",a.srcSet,a,null),l&&Ye(t,i,"src",a.src,a,null);return;case"input":ke("invalid",t);var T=d=v=h=null,C=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":v=X;break;case"checked":C=X;break;case"defaultChecked":P=X;break;case"value":d=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Ye(t,i,l,X,a,null)}}Es(t,d,T,C,P,v,h,!1),vs(t);return;case"select":ke("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Ye(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Be(t,!!l,i,!1):a!=null&&Be(t,!!l,a,!0);return;case"textarea":ke("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ye(t,i,v,T,a,null)}Cr(t,l,h,d),vs(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ye(t,i,C,l,a,null)}return;case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Tl.length;l++)ke(Tl[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ye(t,i,P,l,a,null)}return;default:if(Lo(i)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&zd(t,i,X,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ye(t,i,T,l,a,null))}function kb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,C=null,P=null,X=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":C=te;default:l.hasOwnProperty(Y)||Ye(t,i,Y,null,l,te)}}for(var H in l){var Y=l[H];if(te=a[H],l.hasOwnProperty(H)&&(Y!=null||te!=null))switch(H){case"type":d=Y;break;case"name":h=Y;break;case"checked":P=Y;break;case"defaultChecked":X=Y;break;case"value":v=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==te&&Ye(t,i,H,Y,l,te)}}Rr(t,v,T,C,P,X,d,h);return;case"select":Y=v=T=H=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":Y=C;default:l.hasOwnProperty(d)||Ye(t,i,d,null,l,C)}for(h in l)if(d=l[h],C=a[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":H=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==C&&Ye(t,i,h,d,l,C)}i=T,a=v,l=Y,H!=null?Be(t,!!a,H,!1):!!l!=!!a&&(i!=null?Be(t,!!a,i,!0):Be(t,!!a,a?[]:"",!1));return;case"textarea":Y=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ye(t,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":H=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Ye(t,i,v,h,l,d)}Ts(t,H,Y);return;case"option":for(var fe in a)if(H=a[fe],a.hasOwnProperty(fe)&&H!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ye(t,i,fe,null,l,H)}for(C in l)if(H=l[C],Y=a[C],l.hasOwnProperty(C)&&H!==Y&&(H!=null||Y!=null))switch(C){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ye(t,i,C,H,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)H=a[be],a.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be)&&Ye(t,i,be,null,l,H);for(P in l)if(H=l[P],Y=a[P],l.hasOwnProperty(P)&&H!==Y&&(H!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Ye(t,i,P,H,l,Y)}return;default:if(Lo(i)){for(var ft in a)H=a[ft],a.hasOwnProperty(ft)&&H!==void 0&&!l.hasOwnProperty(ft)&&zd(t,i,ft,void 0,l,H);for(X in l)H=l[X],Y=a[X],!l.hasOwnProperty(X)||H===Y||H===void 0&&Y===void 0||zd(t,i,X,H,l,Y);return}}for(var z in a)H=a[z],a.hasOwnProperty(z)&&H!=null&&!l.hasOwnProperty(z)&&Ye(t,i,z,null,l,H);for(te in l)H=l[te],Y=a[te],!l.hasOwnProperty(te)||H===Y||H==null&&Y==null||Ye(t,i,te,H,l,Y)}var Bd=null,jd=null;function Ic(t){return t.nodeType===9?t:t.ownerDocument}function ky(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hd=null;function Mb(){var t=window.event;return t&&t.type==="popstate"?t===Hd?!1:(Hd=t,!0):(Hd=null,!1)}var Vy=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(Ub)}:Vy;function Ub(t){setTimeout(function(){throw t})}function Fd(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){t.removeChild(h),Nl(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);Nl(i)}function Gd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gd(a),ys(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Lb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Tr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function zb(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function Qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}function Uy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Ly(t,i,a){switch(i=Ic(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}var Bn=new Map,zy=new Set;function Dc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Zi=le.d;le.d={f:Bb,r:jb,D:qb,C:Hb,L:Fb,m:Gb,X:Qb,S:Kb,M:$b};function Bb(){var t=Zi.f(),i=Tc();return t||i}function jb(t){var i=Ni(t);i!==null&&i.tag===5&&i.type==="form"?f_(i):Zi.r(t)}var Qa=typeof document>"u"?null:document;function By(t,i,a){var l=Qa;if(l&&typeof i=="string"&&i){var h=ut(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),zy.has(h)||(zy.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),qt(i,"link",t),it(i),l.head.appendChild(i)))}}function qb(t){Zi.D(t),By("dns-prefetch",t,null)}function Hb(t,i){Zi.C(t,i),By("preconnect",t,i)}function Fb(t,i,a){Zi.L(t,i,a);var l=Qa;if(l&&t&&i){var h='link[rel="preload"][as="'+ut(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ut(a.imageSizes)+'"]')):h+='[href="'+ut(t)+'"]';var d=h;switch(i){case"style":d=$a(t);break;case"script":d=Ya(t)}Bn.has(d)||(t=I({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Bn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(bl(d))||i==="script"&&l.querySelector(Sl(d))||(i=l.createElement("link"),qt(i,"link",t),it(i),l.head.appendChild(i)))}}function Gb(t,i){Zi.m(t,i);var a=Qa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ut(l)+'"][href="'+ut(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ya(t)}if(!Bn.has(d)&&(t=I({rel:"modulepreload",href:t},i),Bn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(d)))return}l=a.createElement("link"),qt(l,"link",t),it(l),a.head.appendChild(l)}}}function Kb(t,i,a){Zi.S(t,i,a);var l=Qa;if(l&&t){var h=br(l).hoistableStyles,d=$a(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(bl(d)))T.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Bn.get(d))&&Kd(t,a);var C=v=l.createElement("link");it(C),qt(C,"link",t),C._p=new Promise(function(P,X){C.onload=P,C.onerror=X}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function Qb(t,i){Zi.X(t,i);var a=Qa;if(a&&t){var l=br(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(Sl(h)),d||(t=I({src:t,async:!0},i),(i=Bn.get(h))&&Qd(t,i),d=a.createElement("script"),it(d),qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function $b(t,i){Zi.M(t,i);var a=Qa;if(a&&t){var l=br(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(Sl(h)),d||(t=I({src:t,async:!0,type:"module"},i),(i=Bn.get(h))&&Qd(t,i),d=a.createElement("script"),it(d),qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function jy(t,i,a,l){var h=(h=Sn.current)?Dc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=$a(a.href),a=br(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=$a(a.href);var d=br(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(bl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Bn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(t,a),d||Yb(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ya(a),a=br(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function $a(t){return'href="'+ut(t)+'"'}function bl(t){return'link[rel="stylesheet"]['+t+"]"}function qy(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function Yb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),qt(i,"link",a),it(i),t.head.appendChild(i))}function Ya(t){return'[src="'+ut(t)+'"]'}function Sl(t){return"script[async]"+t}function Hy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ut(a.href)+'"]');if(l)return i.instance=l,it(l),l;var h=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),it(l),qt(l,"style",h),Nc(l,a.precedence,t),i.instance=l;case"stylesheet":h=$a(a.href);var d=t.querySelector(bl(h));if(d)return i.state.loading|=4,i.instance=d,it(d),d;l=qy(a),(h=Bn.get(h))&&Kd(l,h),d=(t.ownerDocument||t).createElement("link"),it(d);var v=d;return v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),qt(d,"link",l),i.state.loading|=4,Nc(d,a.precedence,t),i.instance=d;case"script":return d=Ya(a.src),(h=t.querySelector(Sl(d)))?(i.instance=h,it(h),h):(l=a,(h=Bn.get(d))&&(l=I({},a),Qd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),it(h),qt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(l=i.instance,i.state.loading|=4,Nc(l,a.precedence,t));return i.instance}function Nc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Kd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Qd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Oc=null;function Fy(t,i,a){if(Oc===null){var l=new Map,h=Oc=new Map;h.set(a,l)}else h=Oc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Tr]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function Gy(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Xb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ky(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var wl=null;function Wb(){}function Zb(t,i,a){if(wl===null)throw Error(s(475));var l=wl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var h=$a(a.href),d=t.querySelector(bl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=xc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,it(d);return}d=t.ownerDocument||t,a=qy(a),(h=Bn.get(h))&&Kd(a,h),d=d.createElement("link"),it(d);var v=d;v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),qt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&!(i.state.loading&3)&&(l.count++,i=xc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function Jb(){if(wl===null)throw Error(s(475));var t=wl;return t.stylesheets&&t.count===0&&$d(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&$d(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)$d(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function $d(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,i.forEach(eS,t),kc=null,xc.call(t))}function eS(t,i){if(!(i.state.loading&4)){var a=kc.get(t);if(a)var l=a.get(null);else{a=new Map,kc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Rl={$$typeof:N,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function tS(t,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.hiddenUpdates=ca(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Qy(t,i,a,l,h,d,v,T,C,P,X,te){return t=new tS(t,i,a,v,T,C,P,te),i=1,d===!0&&(i|=24),d=Ln(3,null,null,i),t.current=d,d.stateNode=t,i=Rf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},ad(d),t}function $y(t){return t?(t=Ca,t):Ca}function Yy(t,i,a,l,h,d){h=$y(h),l.context===null?l.context=h:l.pendingContext=h,l=Pr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ur(t,l,i),a!==null&&(sn(a,t,i),ul(a,t,i))}function Xy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Yd(t,i){Xy(t,i),(t=t.alternate)&&Xy(t,i)}function Wy(t){if(t.tag===13){var i=Dr(t,67108864);i!==null&&sn(i,t,67108864),Yd(t,67108864)}}var Mc=!0;function nS(t,i,a,l){var h=b.T;b.T=null;var d=le.p;try{le.p=2,Xd(t,i,a,l)}finally{le.p=d,b.T=h}}function iS(t,i,a,l){var h=b.T;b.T=null;var d=le.p;try{le.p=8,Xd(t,i,a,l)}finally{le.p=d,b.T=h}}function Xd(t,i,a,l){if(Mc){var h=Wd(l);if(h===null)Ld(t,i,l,Vc,a),Jy(t,l);else if(sS(h,t,i,a,l))l.stopPropagation();else if(Jy(t,l),i&4&&-1<rS.indexOf(t)){for(;h!==null;){var d=Ni(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=qn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var C=1<<31-en(v);T.entanglements[1]|=C,v&=~C}fi(d),!(st&6)&&(yc=ln()+500,El(0))}}break;case 13:T=Dr(d,2),T!==null&&sn(T,d,2),Tc(),Yd(d,2)}if(d=Wd(l),d===null&&Ld(t,i,l,Vc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Ld(t,i,l,null,a)}}function Wd(t){return t=pa(t),Zd(t)}var Vc=null;function Zd(t){if(Vc=null,t=Hn(t),t!==null){var i=ge(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=He(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Vc=t,null}function Zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Eu()){case At:return 2;case Ot:return 8;case Ii:case Tu:return 32;case Io:return 268435456;default:return 32}default:return 32}}var Jd=!1,Fr=null,Gr=null,Kr=null,Cl=new Map,Il=new Map,Qr=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(t,i){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Cl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(i.pointerId)}}function Dl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Ni(i),i!==null&&Wy(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function sS(t,i,a,l,h){switch(i){case"focusin":return Fr=Dl(Fr,t,i,a,l,h),!0;case"dragenter":return Gr=Dl(Gr,t,i,a,l,h),!0;case"mouseover":return Kr=Dl(Kr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Cl.set(d,Dl(Cl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Il.set(d,Dl(Il.get(d)||null,t,i,a,l,h)),!0}return!1}function ev(t){var i=Hn(t.target);if(i!==null){var a=ge(i);if(a!==null){if(i=a.tag,i===13){if(i=He(a),i!==null){t.blockedOn=i,Er(t.priority,function(){if(a.tag===13){var l=En(),h=Dr(a,l);h!==null&&sn(h,a,l),Yd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Wd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);In=l,a.target.dispatchEvent(l),In=null}else return i=Ni(a),i!==null&&Wy(i),t.blockedOn=a,!1;i.shift()}return!0}function tv(t,i,a){Pc(t)&&a.delete(i)}function aS(){Jd=!1,Fr!==null&&Pc(Fr)&&(Fr=null),Gr!==null&&Pc(Gr)&&(Gr=null),Kr!==null&&Pc(Kr)&&(Kr=null),Cl.forEach(tv),Il.forEach(tv)}function Uc(t,i){t.blockedOn===i&&(t.blockedOn=null,Jd||(Jd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aS)))}var Lc=null;function nv(t){Lc!==t&&(Lc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Lc===t&&(Lc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Zd(l||a)===null)continue;break}var d=Ni(a);d!==null&&(t.splice(i,3),i-=3,qf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Nl(t){function i(C){return Uc(C,t)}Fr!==null&&Uc(Fr,t),Gr!==null&&Uc(Gr,t),Kr!==null&&Uc(Kr,t),Cl.forEach(i),Il.forEach(i);for(var a=0;a<Qr.length;a++){var l=Qr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)ev(a),a.blockedOn===null&&Qr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[bt]||null;if(typeof d=="function")v||nv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[bt]||null)T=v.formAction;else if(Zd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),nv(a)}}}function em(t){this._internalRoot=t}zc.prototype.render=em.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=En();Yy(a,l,t,i,null,null)},zc.prototype.unmount=em.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;t.tag===0&&Fa(),Yy(t.current,2,null,t,null,null),Tc(),i[Di]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ru();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,t),a===0&&ev(t)}};var iv=e.version;if(iv!=="19.0.0")throw Error(s(527,iv,"19.0.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=ie(i),t=t!==null?de(t):null,t=t===null?null:t.stateNode,t};var oS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:b,findFiberByHostInstance:Hn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{mr=Bc.inject(oS),Kt=Bc}catch{}}return Ml.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=E_,d=T_,v=A_,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=Qy(t,1,!1,null,null,a,l,h,d,v,T,null),t[Di]=i.current,Ud(t.nodeType===8?t.parentNode:t),new em(i)},Ml.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=E_,v=T_,T=A_,C=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),i=Qy(t,1,!0,i,a??null,l,h,d,v,T,C,P),i.context=$y(null),a=i.current,l=En(),h=Pr(l),h.callback=null,Ur(a,h,l),i.current.lanes=l,dt(i,l),fi(i),t[Di]=i.current,Ud(t),new zc(i)},Ml.version="19.0.0",Ml}var vv;function Hw(){if(vv)return am.exports;vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),am.exports=qw(),am.exports}var Fw=Hw();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tT=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=q.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...m},p)=>q.createElement("svg",{ref:p,...Kw,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:tT("lucide",o),...m},[...f.map(([_,E])=>q.createElement(_,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=(r,e)=>{const n=q.forwardRef(({className:s,...o},u)=>q.createElement(Qw,{ref:u,iconNode:e,className:tT(`lucide-${Gw(r)}`,s),...o}));return n.displayName=`${r}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Yw=bn("ArrowLeft",$w);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ww=bn("Camera",Xw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ev=bn("Check",Zw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]],eR=bn("CircleFadingPlus",Jw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],nR=bn("Fingerprint",tR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],rR=bn("LogIn",iR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],aR=bn("MessageSquare",sR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],lR=bn("Moon",oR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],cR=bn("Search",uR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fR=bn("Send",hR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mR=bn("Sun",dR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],gR=bn("UserRound",pR);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yR=bn("X",_R);var Tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},vR=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,_=p?r[o+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let R=(m&15)<<2|_>>6,N=_&63;p||(N=64,f||(R=64)),s.push(n[E],n[S],n[R],n[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||_==null||S==null)throw new ER;const R=u<<2|m>>4;if(s.push(R),_!==64){const N=m<<4&240|_>>2;if(s.push(N),S!==64){const M=_<<6&192|S;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ER extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TR=function(r){const e=nT(r);return iT.encodeByteArray(e,!0)},uh=function(r){return TR(r).replace(/\./g,"")},rT=function(r){try{return iT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>AR().__FIREBASE_DEFAULTS__,SR=()=>{if(typeof process>"u"||typeof Tv>"u")return;const r=Tv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rT(r[1]);return e&&JSON.parse(e)},Oh=()=>{try{return bR()||SR()||wR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sT=r=>{var e,n;return(n=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},aT=r=>{const e=sT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},oT=()=>{var r;return(r=Oh())===null||r===void 0?void 0:r.config},lT=r=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[uh(JSON.stringify(n)),uh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function IR(){var r;const e=(r=Oh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xR(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function kR(){return!IR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MR(){try{return typeof indexedDB=="object"}catch{return!1}}function VR(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="FirebaseError";class wi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=PR,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?UR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new wi(o,m,s)}}function UR(r,e){return r.replace(LR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const LR=/\{\$([^}]+)}/g;function zR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Yl(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(Av(u)&&Av(f)){if(!Yl(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Av(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function BR(r,e){const n=new jR(r,e);return n.subscribe.bind(n)}class jR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");qR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=um),o.error===void 0&&(o.error=um),o.complete===void 0&&(o.complete=um);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r){return r&&r._delegate?r._delegate:r}class as{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new RR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GR(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:FR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FR(r){return r===Qs?void 0:r}function GR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const QR={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},$R=Oe.INFO,YR={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},XR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=YR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=$R,this._logHandler=XR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const WR=(r,e)=>e.some(n=>r instanceof n);let bv,Sv;function ZR(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JR(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,Rm=new WeakMap,hT=new WeakMap,cm=new WeakMap,sp=new WeakMap;function e1(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ts(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,r)}).catch(()=>{}),sp.set(e,r),e}function t1(r){if(Rm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Rm.set(r,e)}let Cm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Rm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||hT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function n1(r){Cm=r(Cm)}function i1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return hT.set(s,e.sort?e.sort():[e]),ts(s)}:JR().includes(r)?function(...e){return r.apply(hm(this),e),ts(cT.get(this))}:function(...e){return ts(r.apply(hm(this),e))}}function r1(r){return typeof r=="function"?i1(r):(r instanceof IDBTransaction&&t1(r),WR(r,ZR())?new Proxy(r,Cm):r)}function ts(r){if(r instanceof IDBRequest)return e1(r);if(cm.has(r))return cm.get(r);const e=r1(r);return e!==r&&(cm.set(r,e),sp.set(e,r)),e}const hm=r=>sp.get(r);function s1(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=ts(f);return s&&f.addEventListener("upgradeneeded",p=>{s(ts(f.result),p.oldVersion,p.newVersion,ts(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const a1=["get","getKey","getAll","getAllKeys","count"],o1=["put","add","delete","clear"],fm=new Map;function wv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(fm.get(e))return fm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=o1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||a1.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let _=p.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&p.done]))[0]};return fm.set(e,u),u}n1(r=>({...r,get:(e,n,s)=>wv(e,n)||r.get(e,n,s),has:(e,n)=>!!wv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function u1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Im="@firebase/app",Rv="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new rp("@firebase/app"),c1="@firebase/app-compat",h1="@firebase/analytics-compat",f1="@firebase/analytics",d1="@firebase/app-check-compat",m1="@firebase/app-check",p1="@firebase/auth",g1="@firebase/auth-compat",_1="@firebase/database",y1="@firebase/data-connect",v1="@firebase/database-compat",E1="@firebase/functions",T1="@firebase/functions-compat",A1="@firebase/installations",b1="@firebase/installations-compat",S1="@firebase/messaging",w1="@firebase/messaging-compat",R1="@firebase/performance",C1="@firebase/performance-compat",I1="@firebase/remote-config",D1="@firebase/remote-config-compat",N1="@firebase/storage",O1="@firebase/storage-compat",x1="@firebase/firestore",k1="@firebase/vertexai",M1="@firebase/firestore-compat",V1="firebase",P1="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]",U1={[Im]:"fire-core",[c1]:"fire-core-compat",[f1]:"fire-analytics",[h1]:"fire-analytics-compat",[m1]:"fire-app-check",[d1]:"fire-app-check-compat",[p1]:"fire-auth",[g1]:"fire-auth-compat",[_1]:"fire-rtdb",[y1]:"fire-data-connect",[v1]:"fire-rtdb-compat",[E1]:"fire-fn",[T1]:"fire-fn-compat",[A1]:"fire-iid",[b1]:"fire-iid-compat",[S1]:"fire-fcm",[w1]:"fire-fcm-compat",[R1]:"fire-perf",[C1]:"fire-perf-compat",[I1]:"fire-rc",[D1]:"fire-rc-compat",[N1]:"fire-gcs",[O1]:"fire-gcs-compat",[x1]:"fire-fst",[M1]:"fire-fst-compat",[k1]:"fire-vertex","fire-js":"fire-js",[V1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,L1=new Map,Nm=new Map;function Cv(r,e){try{r.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Zs(r){const e=r.name;if(Nm.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,r);for(const n of ch.values())Cv(n,r);for(const n of L1.values())Cv(n,r);return!0}function xh(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function er(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new au("app","Firebase",z1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=P1;function fT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Dm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ns.create("bad-app-name",{appName:String(o)});if(n||(n=oT()),!n)throw ns.create("no-options");const u=ch.get(o);if(u){if(Yl(n,u.options)&&Yl(s,u.config))return u;throw ns.create("duplicate-app",{appName:o})}const f=new KR(o);for(const p of Nm.values())f.addComponent(p);const m=new B1(n,s,f);return ch.set(o,m),m}function ap(r=Dm){const e=ch.get(r);if(!e&&r===Dm&&oT())return fT();if(!e)throw ns.create("no-app",{appName:r});return e}function gi(r,e,n){var s;let o=(s=U1[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(m.join(" "));return}Zs(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firebase-heartbeat-database",q1=1,Xl="firebase-heartbeat-store";let dm=null;function dT(){return dm||(dm=s1(j1,q1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(r=>{throw ns.create("idb-open",{originalErrorMessage:r.message})})),dm}async function H1(r){try{const n=(await dT()).transaction(Xl),s=await n.objectStore(Xl).get(mT(r));return await n.done,s}catch(e){if(e instanceof wi)lr.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function Iv(r,e){try{const s=(await dT()).transaction(Xl,"readwrite");await s.objectStore(Xl).put(e,mT(r)),await s.done}catch(n){if(n instanceof wi)lr.warn(n.message);else{const s=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(s.message)}}}function mT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1024,G1=30*24*60*60*1e3;class K1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Dv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=G1}),this._storage.overwrite(this._heartbeatsCache))}catch(s){lr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dv(),{heartbeatsToSend:s,unsentEntries:o}=Q1(this._heartbeatsCache.heartbeats),u=uh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return lr.warn(n),""}}}function Dv(){return new Date().toISOString().substring(0,10)}function Q1(r,e=F1){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Nv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Nv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class $1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MR()?VR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await H1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Nv(r){return uh(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r){Zs(new as("platform-logger",e=>new l1(e),"PRIVATE")),Zs(new as("heartbeat",e=>new K1(e),"PRIVATE")),gi(Im,Rv,r),gi(Im,Rv,"esm2017"),gi("fire-js","")}Y1("");var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,pT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,w){function b(){}b.prototype=w.prototype,O.D=w.prototype,O.prototype=new b,O.prototype.constructor=O,O.C=function(I,x,U){for(var D=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)D[Je-2]=arguments[Je];return w.prototype[x].apply(I,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,w,b){b||(b=0);var I=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)I[x]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(x=0;16>x;++x)I[x]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=O.g[0],b=O.g[1],x=O.g[2];var U=O.g[3],D=w+(U^b&(x^U))+I[0]+3614090360&4294967295;w=b+(D<<7&4294967295|D>>>25),D=U+(x^w&(b^x))+I[1]+3905402710&4294967295,U=w+(D<<12&4294967295|D>>>20),D=x+(b^U&(w^b))+I[2]+606105819&4294967295,x=U+(D<<17&4294967295|D>>>15),D=b+(w^x&(U^w))+I[3]+3250441966&4294967295,b=x+(D<<22&4294967295|D>>>10),D=w+(U^b&(x^U))+I[4]+4118548399&4294967295,w=b+(D<<7&4294967295|D>>>25),D=U+(x^w&(b^x))+I[5]+1200080426&4294967295,U=w+(D<<12&4294967295|D>>>20),D=x+(b^U&(w^b))+I[6]+2821735955&4294967295,x=U+(D<<17&4294967295|D>>>15),D=b+(w^x&(U^w))+I[7]+4249261313&4294967295,b=x+(D<<22&4294967295|D>>>10),D=w+(U^b&(x^U))+I[8]+1770035416&4294967295,w=b+(D<<7&4294967295|D>>>25),D=U+(x^w&(b^x))+I[9]+2336552879&4294967295,U=w+(D<<12&4294967295|D>>>20),D=x+(b^U&(w^b))+I[10]+4294925233&4294967295,x=U+(D<<17&4294967295|D>>>15),D=b+(w^x&(U^w))+I[11]+2304563134&4294967295,b=x+(D<<22&4294967295|D>>>10),D=w+(U^b&(x^U))+I[12]+1804603682&4294967295,w=b+(D<<7&4294967295|D>>>25),D=U+(x^w&(b^x))+I[13]+4254626195&4294967295,U=w+(D<<12&4294967295|D>>>20),D=x+(b^U&(w^b))+I[14]+2792965006&4294967295,x=U+(D<<17&4294967295|D>>>15),D=b+(w^x&(U^w))+I[15]+1236535329&4294967295,b=x+(D<<22&4294967295|D>>>10),D=w+(x^U&(b^x))+I[1]+4129170786&4294967295,w=b+(D<<5&4294967295|D>>>27),D=U+(b^x&(w^b))+I[6]+3225465664&4294967295,U=w+(D<<9&4294967295|D>>>23),D=x+(w^b&(U^w))+I[11]+643717713&4294967295,x=U+(D<<14&4294967295|D>>>18),D=b+(U^w&(x^U))+I[0]+3921069994&4294967295,b=x+(D<<20&4294967295|D>>>12),D=w+(x^U&(b^x))+I[5]+3593408605&4294967295,w=b+(D<<5&4294967295|D>>>27),D=U+(b^x&(w^b))+I[10]+38016083&4294967295,U=w+(D<<9&4294967295|D>>>23),D=x+(w^b&(U^w))+I[15]+3634488961&4294967295,x=U+(D<<14&4294967295|D>>>18),D=b+(U^w&(x^U))+I[4]+3889429448&4294967295,b=x+(D<<20&4294967295|D>>>12),D=w+(x^U&(b^x))+I[9]+568446438&4294967295,w=b+(D<<5&4294967295|D>>>27),D=U+(b^x&(w^b))+I[14]+3275163606&4294967295,U=w+(D<<9&4294967295|D>>>23),D=x+(w^b&(U^w))+I[3]+4107603335&4294967295,x=U+(D<<14&4294967295|D>>>18),D=b+(U^w&(x^U))+I[8]+1163531501&4294967295,b=x+(D<<20&4294967295|D>>>12),D=w+(x^U&(b^x))+I[13]+2850285829&4294967295,w=b+(D<<5&4294967295|D>>>27),D=U+(b^x&(w^b))+I[2]+4243563512&4294967295,U=w+(D<<9&4294967295|D>>>23),D=x+(w^b&(U^w))+I[7]+1735328473&4294967295,x=U+(D<<14&4294967295|D>>>18),D=b+(U^w&(x^U))+I[12]+2368359562&4294967295,b=x+(D<<20&4294967295|D>>>12),D=w+(b^x^U)+I[5]+4294588738&4294967295,w=b+(D<<4&4294967295|D>>>28),D=U+(w^b^x)+I[8]+2272392833&4294967295,U=w+(D<<11&4294967295|D>>>21),D=x+(U^w^b)+I[11]+1839030562&4294967295,x=U+(D<<16&4294967295|D>>>16),D=b+(x^U^w)+I[14]+4259657740&4294967295,b=x+(D<<23&4294967295|D>>>9),D=w+(b^x^U)+I[1]+2763975236&4294967295,w=b+(D<<4&4294967295|D>>>28),D=U+(w^b^x)+I[4]+1272893353&4294967295,U=w+(D<<11&4294967295|D>>>21),D=x+(U^w^b)+I[7]+4139469664&4294967295,x=U+(D<<16&4294967295|D>>>16),D=b+(x^U^w)+I[10]+3200236656&4294967295,b=x+(D<<23&4294967295|D>>>9),D=w+(b^x^U)+I[13]+681279174&4294967295,w=b+(D<<4&4294967295|D>>>28),D=U+(w^b^x)+I[0]+3936430074&4294967295,U=w+(D<<11&4294967295|D>>>21),D=x+(U^w^b)+I[3]+3572445317&4294967295,x=U+(D<<16&4294967295|D>>>16),D=b+(x^U^w)+I[6]+76029189&4294967295,b=x+(D<<23&4294967295|D>>>9),D=w+(b^x^U)+I[9]+3654602809&4294967295,w=b+(D<<4&4294967295|D>>>28),D=U+(w^b^x)+I[12]+3873151461&4294967295,U=w+(D<<11&4294967295|D>>>21),D=x+(U^w^b)+I[15]+530742520&4294967295,x=U+(D<<16&4294967295|D>>>16),D=b+(x^U^w)+I[2]+3299628645&4294967295,b=x+(D<<23&4294967295|D>>>9),D=w+(x^(b|~U))+I[0]+4096336452&4294967295,w=b+(D<<6&4294967295|D>>>26),D=U+(b^(w|~x))+I[7]+1126891415&4294967295,U=w+(D<<10&4294967295|D>>>22),D=x+(w^(U|~b))+I[14]+2878612391&4294967295,x=U+(D<<15&4294967295|D>>>17),D=b+(U^(x|~w))+I[5]+4237533241&4294967295,b=x+(D<<21&4294967295|D>>>11),D=w+(x^(b|~U))+I[12]+1700485571&4294967295,w=b+(D<<6&4294967295|D>>>26),D=U+(b^(w|~x))+I[3]+2399980690&4294967295,U=w+(D<<10&4294967295|D>>>22),D=x+(w^(U|~b))+I[10]+4293915773&4294967295,x=U+(D<<15&4294967295|D>>>17),D=b+(U^(x|~w))+I[1]+2240044497&4294967295,b=x+(D<<21&4294967295|D>>>11),D=w+(x^(b|~U))+I[8]+1873313359&4294967295,w=b+(D<<6&4294967295|D>>>26),D=U+(b^(w|~x))+I[15]+4264355552&4294967295,U=w+(D<<10&4294967295|D>>>22),D=x+(w^(U|~b))+I[6]+2734768916&4294967295,x=U+(D<<15&4294967295|D>>>17),D=b+(U^(x|~w))+I[13]+1309151649&4294967295,b=x+(D<<21&4294967295|D>>>11),D=w+(x^(b|~U))+I[4]+4149444226&4294967295,w=b+(D<<6&4294967295|D>>>26),D=U+(b^(w|~x))+I[11]+3174756917&4294967295,U=w+(D<<10&4294967295|D>>>22),D=x+(w^(U|~b))+I[2]+718787259&4294967295,x=U+(D<<15&4294967295|D>>>17),D=b+(U^(x|~w))+I[9]+3951481745&4294967295,O.g[0]=O.g[0]+w&4294967295,O.g[1]=O.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+x&4294967295,O.g[3]=O.g[3]+U&4294967295}s.prototype.u=function(O,w){w===void 0&&(w=O.length);for(var b=w-this.blockSize,I=this.B,x=this.h,U=0;U<w;){if(x==0)for(;U<=b;)o(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<w;)if(I[x++]=O.charCodeAt(U++),x==this.blockSize){o(this,I),x=0;break}}else for(;U<w;)if(I[x++]=O[U++],x==this.blockSize){o(this,I),x=0;break}}this.h=x,this.o+=w},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var w=1;w<O.length-8;++w)O[w]=0;var b=8*this.o;for(w=O.length-8;w<O.length;++w)O[w]=b&255,b/=256;for(this.u(O),O=Array(16),w=b=0;4>w;++w)for(var I=0;32>I;I+=8)O[b++]=this.g[w]>>>I&255;return O};function u(O,w){var b=m;return Object.prototype.hasOwnProperty.call(b,O)?b[O]:b[O]=w(O)}function f(O,w){this.h=w;for(var b=[],I=!0,x=O.length-1;0<=x;x--){var U=O[x]|0;I&&U==w||(b[x]=U,I=!1)}this.g=b}var m={};function p(O){return-128<=O&&128>O?u(O,function(w){return new f([w|0],0>w?-1:0)}):new f([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return S;if(0>O)return L(_(-O));for(var w=[],b=1,I=0;O>=b;I++)w[I]=O/b|0,b*=4294967296;return new f(w,0)}function E(O,w){if(O.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(O.charAt(0)=="-")return L(E(O.substring(1),w));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=_(Math.pow(w,8)),I=S,x=0;x<O.length;x+=8){var U=Math.min(8,O.length-x),D=parseInt(O.substring(x,x+U),w);8>U?(U=_(Math.pow(w,U)),I=I.j(U).add(_(D))):(I=I.j(b),I=I.add(_(D)))}return I}var S=p(0),R=p(1),N=p(16777216);r=f.prototype,r.m=function(){if(F(this))return-L(this).m();for(var O=0,w=1,b=0;b<this.g.length;b++){var I=this.i(b);O+=(0<=I?I:4294967296+I)*w,w*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(M(this))return"0";if(F(this))return"-"+L(this).toString(O);for(var w=_(Math.pow(O,6)),b=this,I="";;){var x=J(b,w).g;b=K(b,x.j(w));var U=((0<b.g.length?b.g[0]:b.h)>>>0).toString(O);if(b=x,M(b))return U+I;for(;6>U.length;)U="0"+U;I=U+I}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function M(O){if(O.h!=0)return!1;for(var w=0;w<O.g.length;w++)if(O.g[w]!=0)return!1;return!0}function F(O){return O.h==-1}r.l=function(O){return O=K(this,O),F(O)?-1:M(O)?0:1};function L(O){for(var w=O.g.length,b=[],I=0;I<w;I++)b[I]=~O.g[I];return new f(b,~O.h).add(R)}r.abs=function(){return F(this)?L(this):this},r.add=function(O){for(var w=Math.max(this.g.length,O.g.length),b=[],I=0,x=0;x<=w;x++){var U=I+(this.i(x)&65535)+(O.i(x)&65535),D=(U>>>16)+(this.i(x)>>>16)+(O.i(x)>>>16);I=D>>>16,U&=65535,D&=65535,b[x]=D<<16|U}return new f(b,b[b.length-1]&-2147483648?-1:0)};function K(O,w){return O.add(L(w))}r.j=function(O){if(M(this)||M(O))return S;if(F(this))return F(O)?L(this).j(L(O)):L(L(this).j(O));if(F(O))return L(this.j(L(O)));if(0>this.l(N)&&0>O.l(N))return _(this.m()*O.m());for(var w=this.g.length+O.g.length,b=[],I=0;I<2*w;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<O.g.length;x++){var U=this.i(I)>>>16,D=this.i(I)&65535,Je=O.i(x)>>>16,Ke=O.i(x)&65535;b[2*I+2*x]+=D*Ke,ee(b,2*I+2*x),b[2*I+2*x+1]+=U*Ke,ee(b,2*I+2*x+1),b[2*I+2*x+1]+=D*Je,ee(b,2*I+2*x+1),b[2*I+2*x+2]+=U*Je,ee(b,2*I+2*x+2)}for(I=0;I<w;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=w;I<2*w;I++)b[I]=0;return new f(b,0)};function ee(O,w){for(;(O[w]&65535)!=O[w];)O[w+1]+=O[w]>>>16,O[w]&=65535,w++}function Q(O,w){this.g=O,this.h=w}function J(O,w){if(M(w))throw Error("division by zero");if(M(O))return new Q(S,S);if(F(O))return w=J(L(O),w),new Q(L(w.g),L(w.h));if(F(w))return w=J(O,L(w)),new Q(L(w.g),w.h);if(30<O.g.length){if(F(O)||F(w))throw Error("slowDivide_ only works with positive integers.");for(var b=R,I=w;0>=I.l(O);)b=re(b),I=re(I);var x=ce(b,1),U=ce(I,1);for(I=ce(I,2),b=ce(b,2);!M(I);){var D=U.add(I);0>=D.l(O)&&(x=x.add(b),U=D),I=ce(I,1),b=ce(b,1)}return w=K(O,x.j(w)),new Q(x,w)}for(x=S;0<=O.l(w);){for(b=Math.max(1,Math.floor(O.m()/w.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),U=_(b),D=U.j(w);F(D)||0<D.l(O);)b-=I,U=_(b),D=U.j(w);M(U)&&(U=R),x=x.add(U),O=K(O,D)}return new Q(x,O)}r.A=function(O){return J(this,O).h},r.and=function(O){for(var w=Math.max(this.g.length,O.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)&O.i(I);return new f(b,this.h&O.h)},r.or=function(O){for(var w=Math.max(this.g.length,O.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)|O.i(I);return new f(b,this.h|O.h)},r.xor=function(O){for(var w=Math.max(this.g.length,O.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)^O.i(I);return new f(b,this.h^O.h)};function re(O){for(var w=O.g.length+1,b=[],I=0;I<w;I++)b[I]=O.i(I)<<1|O.i(I-1)>>>31;return new f(b,O.h)}function ce(O,w){var b=w>>5;w%=32;for(var I=O.g.length-b,x=[],U=0;U<I;U++)x[U]=0<w?O.i(U+b)>>>w|O.i(U+b+1)<<32-w:O.i(U+b);return new f(x,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,is=f}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gT,Ul,_T,Zc,Om,yT,vT,ET;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,y){return c==Array.prototype||c==Object.prototype||(c[g]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var g=0;g<c.length;++g){var y=c[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var y=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in y))break e;y=y[B]}c=c[c.length-1],A=y[c],g=g(A),g!=A&&g!=null&&e(y,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var y=0,A=!1,B={next:function(){if(!A&&y<c.length){var G=y++;return{value:g(G,c[G]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function _(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,y){return c.call.apply(c.bind,arguments)}function S(c,g,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function R(c,g,y){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,R.apply(null,arguments)}function N(c,g){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,g){function y(){}y.prototype=g.prototype,c.aa=g.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,B,G){for(var se=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)se[Ve-2]=arguments[Ve];return g.prototype[B].apply(A,se)}}function F(c){const g=c.length;if(0<g){const y=Array(g);for(let A=0;A<g;A++)y[A]=c[A];return y}return[]}function L(c,g){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(p(A)){const B=c.length||0,G=A.length||0;c.length=B+G;for(let se=0;se<G;se++)c[B+se]=A[se]}else c.push(A)}}class K{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ee(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var re=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ce(c,g,y){for(const A in c)g.call(y,c[A],A,c)}function O(c,g){for(const y in c)g.call(void 0,c[y],y,c)}function w(c){const g={};for(const y in c)g[y]=c[y];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,g){let y,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(y in A)c[y]=A[y];for(let G=0;G<b.length;G++)y=b[G],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function x(c){var g=1;c=c.split(":");const y=[];for(;0<g&&c.length;)y.push(c.shift()),g--;return c.length&&y.push(c.join(":")),y}function U(c){m.setTimeout(()=>{throw c},0)}function D(){var c=He;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Je{constructor(){this.h=this.g=null}add(g,y){const A=Ke.get();A.set(g,y),this.h?this.h.next=A:this.g=A,this.h=A}}var Ke=new K(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,ge=!1,He=new Je,k=()=>{const c=m.Promise.resolve(void 0);ve=()=>{c.then(ie)}};var ie=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(y){U(y)}var g=Ke;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ge=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,g),m.removeEventListener("test",y,g)}catch{}return c}();function Ce(c,g){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(re){e:{try{J(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else y=="mouseover"?g=c.fromElement:y=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}M(Ce,oe);var we={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),ze=0;function lt(c,g,y,A,B){this.listener=c,this.proxy=null,this.src=g,this.type=y,this.capture=!!A,this.ha=B,this.key=++ze,this.da=this.fa=!1}function Qe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jt(c){this.src=c,this.g={},this.h=0}Jt.prototype.add=function(c,g,y,A,B){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var se=Sn(c,g,A,B);return-1<se?(g=c[se],y||(g.fa=!1)):(g=new lt(g,this.src,G,!!A,B),g.fa=y,c.push(g)),g};function Ri(c,g){var y=g.type;if(y in c.g){var A=c.g[y],B=Array.prototype.indexOf.call(A,g,void 0),G;(G=0<=B)&&Array.prototype.splice.call(A,B,1),G&&(Qe(g),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Sn(c,g,y,A){for(var B=0;B<c.length;++B){var G=c[B];if(!G.da&&G.listener==g&&G.capture==!!y&&G.ha==A)return B}return-1}var fr="closure_lm_"+(1e6*Math.random()|0),dr={};function Ci(c,g,y,A,B){if(Array.isArray(g)){for(var G=0;G<g.length;G++)Ci(c,g[G],y,A,B);return null}return y=Eu(y),c&&c[_t]?c.K(g,y,_(A)?!!A.capture:!1,B):Ro(c,g,y,!1,A,B)}function Ro(c,g,y,A,B,G){if(!g)throw Error("Invalid event type");var se=_(B)?!!B.capture:!!B,Ve=Co(c);if(Ve||(c[fr]=Ve=new Jt(c)),y=Ve.add(g,y,A,se,G),y.proxy)return y;if(A=aa(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)le||(B=se),B===void 0&&(B=!1),c.addEventListener(g.toString(),A,B);else if(c.attachEvent)c.attachEvent(la(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function aa(){function c(y){return g.call(c.src,c.listener,y)}const g=nf;return c}function oa(c,g,y,A,B){if(Array.isArray(g))for(var G=0;G<g.length;G++)oa(c,g[G],y,A,B);else A=_(A)?!!A.capture:!!A,y=Eu(y),c&&c[_t]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],y=Sn(G,y,A,B),-1<y&&(Qe(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Co(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Sn(g,y,A,B)),(y=-1<c?g[c]:null)&&ps(y))}function ps(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[_t])Ri(g.i,c);else{var y=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(y,A,c.capture):g.detachEvent?g.detachEvent(la(y),A):g.addListener&&g.removeListener&&g.removeListener(A),(y=Co(g))?(Ri(y,c),y.h==0&&(y.src=null,g[fr]=null)):Qe(c)}}}function la(c){return c in dr?dr[c]:dr[c]="on"+c}function nf(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var y=c.listener,A=c.ha||c.src;c.fa&&ps(c),c=y.call(A,g)}return c}function Co(c){return c=c[fr],c instanceof Jt?c:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(c){return typeof c=="function"?c:(c[ln]||(c[ln]=function(g){return c.handleEvent(g)}),c[ln])}function At(){de.call(this),this.i=new Jt(this),this.M=this,this.F=null}M(At,de),At.prototype[_t]=!0,At.prototype.removeEventListener=function(c,g,y,A){oa(this,c,g,y,A)};function Ot(c,g){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new oe(g,c);else if(g instanceof oe)g.target=g.target||c;else{var B=g;g=new oe(A,c),I(g,B)}if(B=!0,y)for(var G=y.length-1;0<=G;G--){var se=g.g=y[G];B=Ii(se,A,!0,g)&&B}if(se=g.g=c,B=Ii(se,A,!0,g)&&B,B=Ii(se,A,!1,g)&&B,y)for(G=0;G<y.length;G++)se=g.g=y[G],B=Ii(se,A,!1,g)&&B}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var y=c.g[g],A=0;A<y.length;A++)Qe(y[A]);delete c.g[g],c.h--}}this.F=null},At.prototype.K=function(c,g,y,A){return this.i.add(String(c),g,!1,y,A)},At.prototype.L=function(c,g,y,A){return this.i.add(String(c),g,!0,y,A)};function Ii(c,g,y,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,G=0;G<g.length;++G){var se=g[G];if(se&&!se.da&&se.capture==y){var Ve=se.listener,St=se.ha||se.src;se.fa&&Ri(c.i,se),B=Ve.call(St,A)!==!1&&B}}return B&&!A.defaultPrevented}function Tu(c,g,y){if(typeof c=="function")y&&(c=R(c,y));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Io(c){c.g=Tu(()=>{c.g=null,c.i&&(c.i=!1,Io(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class rf extends de{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Io(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(c){de.call(this),this.h=c,this.g={}}M(gs,de);var mr=[];function Kt(c){ce(c.g,function(g,y){this.g.hasOwnProperty(y)&&ps(g)},c),c.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Kt(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Do=m.JSON.stringify,Wn=m.JSON.parse,en=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function No(){}No.prototype.h=null;function Au(c){return c.h||(c.h=c.i())}function bu(){}var Zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pr(){oe.call(this,"d")}M(pr,oe);function qn(){oe.call(this,"c")}M(qn,oe);var wn={},gr=null;function ua(){return gr=gr||new At}wn.La="serverreachability";function Oo(c){oe.call(this,wn.La,c)}M(Oo,oe);function _r(c){const g=ua();Ot(g,new Oo(g))}wn.STAT_EVENT="statevent";function ca(c,g){oe.call(this,wn.STAT_EVENT,c),this.stat=g}M(ca,oe);function dt(c){const g=ua();Ot(g,new ca(g,c))}wn.Ma="timingevent";function Su(c,g){oe.call(this,wn.Ma,c),this.size=g}M(Su,oe);function yr(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function vr(){this.g=!0}vr.prototype.xa=function(){this.g=!1};function wu(c,g,y,A,B,G){c.info(function(){if(c.g)if(G)for(var se="",Ve=G.split("&"),St=0;St<Ve.length;St++){var Pe=Ve[St].split("=");if(1<Pe.length){var Mt=Pe[0];Pe=Pe[1];var wt=Mt.split("_");se=2<=wt.length&&wt[1]=="type"?se+(Mt+"="+Pe+"&"):se+(Mt+"=redacted&")}}else se=null;else se=G;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+g+`
`+y+`
`+se})}function Ru(c,g,y,A,B,G,se){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+g+`
`+y+`
`+G+" "+se})}function Er(c,g,y,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+xt(c,y)+(A?" "+A:"")})}function Jn(c,g){c.info(function(){return"TIMEOUT: "+g})}vr.prototype.info=function(){};function xt(c,g){if(!c.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var G=B[0];if(G!="noop"&&G!="stop"&&G!="close")for(var se=1;se<B.length;se++)B[se]=""}}}}return Do(y)}catch{return g}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_s;function ha(){}M(ha,No),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},_s=new ha;function ei(c,g,y,A){this.j=c,this.i=g,this.l=y,this.R=A||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xo}function xo(){this.i=null,this.g="",this.h=!1}var Tr={},ys={};function Hn(c,g,y){c.L=1,c.v=Ts(ut(g)),c.m=y,c.P=!0,Ni(c,null)}function Ni(c,g){c.F=Date.now(),it(c),c.A=ut(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),ki(y.i,"t",A),c.C=0,y=c.j.J,c.h=new xo,c.g=Bu(c.j,y?g:null,!c.m),0<c.O&&(c.M=new rf(R(c.Y,c,c.g),c.O)),g=c.U,y=c.g,A=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(mr[0]=B.toString()),B=mr);for(var G=0;G<B.length;G++){var se=Ci(y,B[G],A||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),_r(),wu(c.i,c.u,c.A,c.l,c.R,c.m)}ei.prototype.ca=function(c){c=c.target;const g=this.M;g&&Nn(c)==3?g.j():this.Y(c)},ei.prototype.Y=function(c){try{if(c==this.g)e:{const wt=Nn(this.g);var g=this.g.Ba();const Ui=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||xu(this.g)))){this.J||wt!=4||g==7||(g==8||0>=Ui?_r(3):_r(2)),fa(this);var y=this.g.Z();this.X=y;t:if(Ar(this)){var A=xu(this.g);c="";var B=A.length,G=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),mn(this);var se="";break t}this.h.i=new m.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(G&&g==B-1)});A.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=y==200,Ru(this.i,this.u,this.A,this.l,this.R,wt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,St=this.g;if((Ve=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Ve)){var Pe=Ve;break t}}Pe=null}if(y=Pe)Er(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pn(this,y);else{this.o=!1,this.s=3,dt(12),un(this),mn(this);break e}}if(this.P){y=!0;let zt;for(;!this.J&&this.C<se.length;)if(zt=br(this,se),zt==ys){wt==4&&(this.s=4,dt(14),y=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Tr){this.s=4,dt(15),Er(this.i,this.l,se,"[Invalid Chunk]"),y=!1;break}else Er(this.i,this.l,zt,null),pn(this,zt);if(Ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||se.length!=0||this.h.h||(this.s=1,dt(16),y=!1),this.o=this.o&&y,!y)Er(this.i,this.l,se,"[Invalid Chunked Response]"),un(this),mn(this);else if(0<se.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Is(Mt),Mt.M=!0,dt(11))}}else Er(this.i,this.l,se,null),pn(this,se);wt==4&&un(this),this.o&&!this.J&&(wt==4?Uu(this.j,this):(this.o=!1,it(this)))}else cf(this.g),y==400&&0<se.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),un(this),mn(this)}}}catch{}finally{}};function Ar(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function br(c,g){var y=c.C,A=g.indexOf(`
`,y);return A==-1?ys:(y=Number(g.substring(y,A)),isNaN(y)?Tr:(A+=1,A+y>g.length?ys:(g=g.slice(A,A+y),c.C=A+y,g)))}ei.prototype.cancel=function(){this.J=!0,un(this)};function it(c){c.S=Date.now()+c.I,ko(c,c.I)}function ko(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yr(R(c.ba,c),g)}function fa(c){c.B&&(m.clearTimeout(c.B),c.B=null)}ei.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Jn(this.i,this.A),this.L!=2&&(_r(),dt(17)),un(this),this.s=2,mn(this)):ko(this,this.S-c)};function mn(c){c.j.G==0||c.J||Uu(c.j,c)}function un(c){fa(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Kt(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function pn(c,g){try{var y=c.j;if(y.G!=0&&(y.g==c||Sr(y.h,c))){if(!c.K&&Sr(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Aa(y),Ea(y);else break e;Fo(y),dt(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=yr(R(y.Za,y),6e3));if(1>=Cu(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pi(y,11)}else if((c.K||y.g==c)&&Aa(y),!ee(g))for(B=y.Da.g.parse(g),g=0;g<B.length;g++){let Pe=B[g];if(y.T=Pe[0],Pe=Pe[1],y.G==2)if(Pe[0]=="c"){y.K=Pe[1],y.ia=Pe[2];const Mt=Pe[3];Mt!=null&&(y.la=Mt,y.j.info("VER="+y.la));const wt=Pe[4];wt!=null&&(y.Aa=wt,y.j.info("SVER="+y.Aa));const Ui=Pe[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(A=1.5*Ui,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const zt=c.g;if(zt){const oi=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var G=A.h;G.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(wr(G,G.h),G.h=null))}if(A.D){const Ko=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(A.ya=Ko,Be(A.I,A.D,Ko))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var se=c;if(A.qa=zu(A,A.J?A.ia:null,A.W),se.K){Rn(A.h,se);var Ve=se,St=A.L;St&&(Ve.I=St),Ve.B&&(fa(Ve),it(Ve)),A.g=se}else Vu(A);0<y.i.length&&Ta(y)}else Pe[0]!="stop"&&Pe[0]!="close"||Pi(y,7);else y.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Pi(y,7):qo(y):Pe[0]!="noop"&&y.l&&y.l.ta(Pe),y.v=0)}}_r(4)}catch{}}var sf=class{constructor(c,g){this.g=c,this.map=g}};function Mo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cu(c){return c.h?1:c.g?c.g.size:0}function Sr(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function wr(c,g){c.g?c.g.add(g):c.h=g}function Rn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Mo.prototype.cancel=function(){if(this.i=tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const y of c.g.values())g=g.concat(y.D);return g}return F(c.i)}function Iu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],y=c.length,A=0;A<y;A++)g.push(c[A]);return g}g=[],y=0;for(A in c)g[y++]=c[A];return g}function af(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var y=0;y<c;y++)g.push(y);return g}g=[],y=0;for(const A in c)g[y++]=A;return g}}}function vs(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var y=af(c),A=Iu(c),B=A.length,G=0;G<B;G++)g.call(void 0,A[G],y&&y[G],c)}var Po=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function da(c,g){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),B=null;if(0<=A){var G=c[y].substring(0,A);B=c[y].substring(A+1)}else G=c[y];g(G,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Oi){this.h=c.h,Rr(this,c.j),this.o=c.o,this.g=c.g,Es(this,c.s),this.l=c.l;var g=c.i,y=new ti;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),ma(this,y),this.m=c.m}else c&&(g=String(c).match(Po))?(this.h=!1,Rr(this,g[1]||"",!0),this.o=Cr(g[2]||""),this.g=Cr(g[3]||"",!0),Es(this,g[4]),this.l=Cr(g[5]||"",!0),ma(this,g[6]||"",!0),this.m=Cr(g[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Oi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Cn(g,Uo,!0),":");var y=this.g;return(y||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Cn(g,Uo,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Cn(y,y.charAt(0)=="/"?Lo:Du,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Cn(y,uf)),c.join("")};function ut(c){return new Oi(c)}function Rr(c,g,y){c.j=y?Cr(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Es(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ma(c,g,y){g instanceof ti?(c.i=g,zo(c.i,c.h)):(y||(g=Cn(g,lf)),c.i=new ti(g,c.h))}function Be(c,g,y){c.i.set(g,y)}function Ts(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cr(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Cn(c,g,y){return typeof c=="string"?(c=encodeURI(c).replace(g,of),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function of(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uo=/[#\/\?@]/g,Du=/[#\?:]/g,Lo=/[#\?]/g,lf=/[#\?@]/g,uf=/#/g;function ti(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function In(c){c.g||(c.g=new Map,c.h=0,c.i&&da(c.i,function(g,y){c.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}r=ti.prototype,r.add=function(c,g){In(this),this.i=null,c=Mi(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(g),this.h+=1,this};function pa(c,g){In(c),g=Mi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function xi(c,g){return In(c),g=Mi(c,g),c.g.has(g)}r.forEach=function(c,g){In(this),this.g.forEach(function(y,A){y.forEach(function(B){c.call(g,B,A,this)},this)},this)},r.na=function(){In(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let A=0;A<g.length;A++){const B=c[A];for(let G=0;G<B.length;G++)y.push(g[A])}return y},r.V=function(c){In(this);let g=[];if(typeof c=="string")xi(this,c)&&(g=g.concat(this.g.get(Mi(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)g=g.concat(c[y])}return g},r.set=function(c,g){return In(this),this.i=null,c=Mi(this,c),xi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ki(c,g,y){pa(c,g),0<y.length&&(c.i=null,c.g.set(Mi(c,g),F(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var A=g[y];const G=encodeURIComponent(String(A)),se=this.V(A);for(A=0;A<se.length;A++){var B=G;se[A]!==""&&(B+="="+encodeURIComponent(String(se[A]))),c.push(B)}}return this.i=c.join("&")};function Mi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function zo(c,g){g&&!c.j&&(In(c),c.i=null,c.g.forEach(function(y,A){var B=A.toLowerCase();A!=B&&(pa(this,A),ki(this,B,y))},c)),c.j=g}function Nu(c,g){const y=new vr;if(m.Image){const A=new Image;A.onload=N(Dn,y,"TestLoadImage: loaded",!0,g,A),A.onerror=N(Dn,y,"TestLoadImage: error",!1,g,A),A.onabort=N(Dn,y,"TestLoadImage: abort",!1,g,A),A.ontimeout=N(Dn,y,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function As(c,g){const y=new vr,A=new AbortController,B=setTimeout(()=>{A.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(B),G.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Dn(y,"TestPingServer: error",!1,g)})}function Dn(c,g,y,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(y)}catch{}}function bs(){this.g=new en}function ni(c,g,y){const A=y||"";try{vs(c,function(B,G){let se=B;_(B)&&(se=Do(B)),g.push(A+G+"="+encodeURIComponent(se))})}catch(B){throw g.push(A+"type="+encodeURIComponent("_badmap")),B}}function Ir(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Ir,No),Ir.prototype.g=function(){return new Vi(this.l,this.j)},Ir.prototype.i=function(c){return function(){return c}}({});function Vi(c,g){At.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Vi,At),r=Vi.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ri(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ii(this):ri(this),this.readyState==3&&Bo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ii(this))},r.Qa=function(c){this.g&&(this.response=c,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ri(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=g.next();return c.join(`\r
`)};function ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jo(c){let g="";return ce(c,function(y,A){g+=A,g+=":",g+=y,g+=`\r
`}),g}function kt(c,g,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=jo(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Be(c,g,y))}function Fe(c){At.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Fe,At);var ga=/^https?$/i,Ss=["POST","PUT"];r=Fe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_s.g(),this.v=this.o?Au(this.o):Au(_s),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Ou(this,G);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)y.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())y.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ss,g,void 0))||A||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of y)this.g.setRequestHeader(G,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ws(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Ou(this,G)}};function Ou(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,_a(c),si(c)}function _a(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),si(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),Fe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},r.bb=function(){ya(this)};function ya(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)Tu(c.Ea,0,c);else if(Ot(c,"readystatechange"),Nn(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var A;if(A=se===0){var B=String(c.D).match(Po)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),A=!ga.test(B?B.toLowerCase():"")}y=A}if(y)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var G=2<Nn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",_a(c)}}finally{si(c)}}}}function si(c,g){if(c.g){ws(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ot(c,"ready");try{y.onreadystatechange=A}catch{}}}function ws(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Wn(g)}};function xu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function cf(c){const g={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ee(c[A]))continue;var y=x(c[A]);const B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=g[B]||[];g[B]=G,G.push(y)}O(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(c,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||g}function va(c){this.Aa=0,this.i=[],this.j=new vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rs("baseRetryDelayMs",5e3,c),this.cb=Rs("retryDelaySeedMs",1e4,c),this.Wa=Rs("forwardChannelMaxRetries",2,c),this.wa=Rs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Da=new bs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=va.prototype,r.la=8,r.G=1,r.connect=function(c,g,y,A){dt(0),this.W=c,this.H=g||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=zu(this,null,this.W),Ta(this)};function qo(c){if(ku(c),c.G==3){var g=c.U++,y=ut(c.I);if(Be(y,"SID",c.K),Be(y,"RID",g),Be(y,"TYPE","terminate"),Cs(c,y),g=new ei(c,c.j,g),g.L=2,g.v=Ts(ut(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=g.v,y=!0),y||(g.g=Bu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),it(g)}Lu(c)}function Ea(c){c.g&&(Is(c),c.g.cancel(),c.g=null)}function ku(c){Ea(c),c.u&&(m.clearTimeout(c.u),c.u=null),Aa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ta(c){if(!Vo(c.h)&&!c.s){c.s=!0;var g=c.Ga;ve||k(),ge||(ve(),ge=!0),He.add(g,c),c.B=0}}function hf(c,g){return Cu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yr(R(c.Ga,c,g),Go(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new ei(this,this.j,c);let G=this.o;if(this.S&&(G?(G=w(G),I(G,this.S)):G=this.S),this.m!==null||this.O||(B.H=G,G=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Mu(this,B,g),y=ut(this.I),Be(y,"RID",c),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),Cs(this,y),G&&(this.O?g="headers="+encodeURIComponent(String(jo(G)))+"&"+g:this.m&&kt(y,this.m,G)),wr(this.h,B),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",g),Be(y,"SID","null"),B.T=!0,Hn(B,y,null)):Hn(B,y,g),this.G=2}}else this.G==3&&(c?Ho(this,c):this.i.length==0||Vo(this.h)||Ho(this))};function Ho(c,g){var y;g?y=g.l:y=c.U++;const A=ut(c.I);Be(A,"SID",c.K),Be(A,"RID",y),Be(A,"AID",c.T),Cs(c,A),c.m&&c.o&&kt(A,c.m,c.o),y=new ei(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Mu(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wr(c.h,y),Hn(y,A,g)}function Cs(c,g){c.H&&ce(c.H,function(y,A){Be(g,A,y)}),c.l&&vs({},function(y,A){Be(g,A,y)})}function Mu(c,g,y){y=Math.min(c.i.length,y);var A=c.l?R(c.l.Na,c.l,c):null;e:{var B=c.i;let G=-1;for(;;){const se=["count="+y];G==-1?0<y?(G=B[0].g,se.push("ofs="+G)):G=0:se.push("ofs="+G);let Ve=!0;for(let St=0;St<y;St++){let Pe=B[St].g;const Mt=B[St].map;if(Pe-=G,0>Pe)G=Math.max(0,B[St].g-100),Ve=!1;else try{ni(Mt,se,"req"+Pe+"_")}catch{A&&A(Mt)}}if(Ve){A=se.join("&");break e}}}return c=c.i.splice(0,y),g.D=c,A}function Vu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ve||k(),ge||(ve(),ge=!0),He.add(g,c),c.v=0}}function Fo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yr(R(c.Fa,c),Go(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yr(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ea(this),Pu(this))};function Is(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Pu(c){c.g=new ei(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=ut(c.qa);Be(g,"RID","rpc"),Be(g,"SID",c.K),Be(g,"AID",c.T),Be(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(g,"TO",c.ja),Be(g,"TYPE","xmlhttp"),Cs(c,g),c.m&&c.o&&kt(g,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Ts(ut(g)),y.m=null,y.P=!0,Ni(y,c)}r.Za=function(){this.C!=null&&(this.C=null,Ea(this),Fo(this),dt(19))};function Aa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Uu(c,g){var y=null;if(c.g==g){Aa(c),Is(c),c.g=null;var A=2}else if(Sr(c.h,g))y=g.D,Rn(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;A=ua(),Ot(A,new Su(A,y)),Ta(c)}else Vu(c);else if(B=g.s,B==3||B==0&&0<g.X||!(A==1&&hf(c,g)||A==2&&Fo(c)))switch(y&&0<y.length&&(g=c.h,g.i=g.i.concat(y)),B){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function Go(c,g){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*g}function Pi(c,g){if(c.j.info("Error code "+g),g==2){var y=R(c.fb,c),A=c.Xa;const B=!A;A=new Oi(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Rr(A,"https"),Ts(A),B?Nu(A.toString(),y):As(A.toString(),y)}else dt(2);c.G=0,c.l&&c.l.sa(g),Lu(c),ku(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Lu(c){if(c.G=0,c.ka=[],c.l){const g=tn(c.h);(g.length!=0||c.i.length!=0)&&(L(c.ka,g),L(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function zu(c,g,y){var A=y instanceof Oi?ut(y):new Oi(y);if(A.g!="")g&&(A.g=g+"."+A.g),Es(A,A.s);else{var B=m.location;A=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var G=new Oi(null);A&&Rr(G,A),g&&(G.g=g),B&&Es(G,B),y&&(G.l=y),A=G}return y=c.D,g=c.ya,y&&g&&Be(A,y,g),Be(A,"VER",c.la),Cs(c,A),A}function Bu(c,g,y){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Fe(new Ir({eb:y})):new Fe(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}r=ju.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ba(){}ba.prototype.g=function(c,g){return new nn(c,g)};function nn(c,g){At.call(this),this.g=new va(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ee(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ee(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ai(this)}M(nn,At),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){qo(this.g)},nn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Do(c),c=y);g.i.push(new sf(g.Ya++,c)),g.G==3&&Ta(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,nn.aa.N.call(this)};function qu(c){pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const y in g){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}M(qu,pr);function Hu(){qn.call(this),this.status=1}M(Hu,qn);function ai(c){this.g=c}M(ai,ju),ai.prototype.ua=function(){Ot(this.g,"a")},ai.prototype.ta=function(c){Ot(this.g,new qu(c))},ai.prototype.sa=function(c){Ot(this.g,new Hu)},ai.prototype.ra=function(){Ot(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,ET=function(){return new ba},vT=function(){return ua()},yT=wn,Om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,Zc=bt,Di.COMPLETE="complete",_T=Di,bu.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",At.prototype.listen=At.prototype.K,Ul=bu,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,gT=Fe}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const xv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new rp("@firebase/firestore");function Za(){return Js.logLevel}function ue(r,...e){if(Js.logLevel<=Oe.DEBUG){const n=e.map(op);Js.debug(`Firestore (${Eo}): ${r}`,...n)}}function ur(r,...e){if(Js.logLevel<=Oe.ERROR){const n=e.map(op);Js.error(`Firestore (${Eo}): ${r}`,...n)}}function oo(r,...e){if(Js.logLevel<=Oe.WARN){const n=e.map(op);Js.warn(`Firestore (${Eo}): ${r}`,...n)}}function op(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+r;throw ur(e),new Error(e)}function Ge(r,e){r||Ee()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class W1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z1{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ar,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ar)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string"),new TT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Xt(e)}}class J1{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class eC{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new J1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ge(this.o===void 0);const s=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new tC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=iC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%e.length))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function lo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Dt(0,0))}static max(){return new Ae(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(),s===void 0?s=e.length-n:s>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof di?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=di.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=di.isNumericId(e),o=di.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?di.extractNumericId(e).compare(di.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class tt extends di{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const rC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends di{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return rC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(tt.fromString(e))}static fromName(e){return new _e(tt.fromString(e).popFirst(5))}static empty(){return new _e(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new tt(e.slice()))}}function sC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new Dt(n+1,0):new Dt(n,s));return new os(o,_e.empty(),e)}function aC(r){return new os(r.readTime,r.key,-1)}class os{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new os(Ae.min(),_e.empty(),-1)}static max(){return new os(Ae.max(),_e.empty(),-1)}}function oC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(r.documentKey,e.documentKey),n!==0?n:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==lC)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,s)=>{n(e)})}static reject(e){return new Z((n,s)=>{s(e)})}static waitFor(e){return new Z((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next(o=>o?Z.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new Z((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const _=p;n(e[_]).next(E=>{f[_]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new Z((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function cC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kh.oe=-1;function Mh(r){return r==null}function hh(r){return r===0&&1/r==-1/0}function hC(r){return typeof r=="number"&&Number.isInteger(r)&&!hh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=kv(e)),e=dC(r.get(n),e);return kv(e)}function dC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case"":n+="";break;default:n+=u}}return n}function kv(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ds(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function bT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=o??Ht.EMPTY,this.right=u??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Ht(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new Nt(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ST("Invalid base64 string: "+u):u}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const mC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(r){if(Ge(!!r),typeof r=="string"){let e=0;const n=mC.exec(r);if(Ge(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pt(r.seconds),nanos:pt(r.nanos)}}function pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function us(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vh(r){const e=r.mapValue.fields.__previous_value__;return lp(e)?Vh(e):e}function Wl(r){const e=ls(r.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,s,o,u,f,m,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=_}}class Zl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={mapValue:{}};function cs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lp(r)?4:_C(r)?9007199254740991:gC(r)?10:11:Ee()}function Ti(r,e){if(r===e)return!0;const n=cs(r);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Wl(r).isEqual(Wl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ls(o.timestampValue),m=ls(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return us(o.bytesValue).isEqual(us(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return pt(o.geoPointValue.latitude)===pt(u.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return pt(o.integerValue)===pt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=pt(o.doubleValue),m=pt(u.doubleValue);return f===m?hh(f)===hh(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return lo(r.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Mv(f)!==Mv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ti(f[p],m[p])))return!1;return!0}(r,e);default:return Ee()}}function Jl(r,e){return(r.values||[]).find(n=>Ti(n,e))!==void 0}function uo(r,e){if(r===e)return 0;const n=cs(r),s=cs(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return function(u,f){const m=pt(u.integerValue||u.doubleValue),p=pt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return Pv(r.timestampValue,e.timestampValue);case 4:return Pv(Wl(r),Wl(e));case 5:return Me(r.stringValue,e.stringValue);case 6:return function(u,f){const m=us(u),p=us(f);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let _=0;_<m.length&&_<p.length;_++){const E=Me(m[_],p[_]);if(E!==0)return E}return Me(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Me(pt(u.latitude),pt(f.latitude));return m!==0?m:Me(pt(u.longitude),pt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Uv(r.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,_,E;const S=u.fields||{},R=f.fields||{},N=(m=S.value)===null||m===void 0?void 0:m.arrayValue,M=(p=R.value)===null||p===void 0?void 0:p.arrayValue,F=Me(((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return F!==0?F:Uv(N,M)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===Fc.mapValue&&f===Fc.mapValue)return 0;if(u===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),_=f.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const R=Me(p[S],E[S]);if(R!==0)return R;const N=uo(m[p[S]],_[E[S]]);if(N!==0)return N}return Me(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ee()}}function Pv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const n=ls(r),s=ls(e),o=Me(n.seconds,s.seconds);return o!==0?o:Me(n.nanos,s.nanos)}function Uv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=uo(n[o],s[o]);if(u)return u}return Me(n.length,s.length)}function co(r){return xm(r)}function xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=ls(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return us(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return _e.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=xm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${xm(n.fields[f])}`;return o+"}"}(r.mapValue):Ee()}function Jc(r){switch(cs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(r);return e?16+Jc(e):16;case 5:return 2*r.stringValue.length;case 6:return us(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Jc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ds(s.fields,(u,f)=>{o+=u.length+Jc(f)}),o}(r.mapValue);default:throw Ee()}}function km(r){return!!r&&"integerValue"in r}function up(r){return!!r&&"arrayValue"in r}function Lv(r){return!!r&&"nullValue"in r}function zv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function eh(r){return!!r&&"mapValue"in r}function gC(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ds(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=jl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function _C(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=Ft.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=jl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ds(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new dn(jl(this.value))}}function wT(r){const e=[];return ds(r.fields,(n,s)=>{const o=new Ft([n]);if(eh(s)){const u=wT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Wt(e,0,Ae.min(),Ae.min(),Ae.min(),dn.empty(),0)}static newFoundDocument(e,n,s,o){return new Wt(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new Wt(e,2,n,Ae.min(),Ae.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Ae.min(),Ae.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.position=e,this.inclusive=n}}function Bv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=_e.comparator(_e.fromName(f.referenceValue),n.key):s=uo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function jv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ti(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function yC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{}class It extends RT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new EC(e,n,s):n==="array-contains"?new bC(e,s):n==="in"?new SC(e,s):n==="not-in"?new wC(e,s):n==="array-contains-any"?new RC(e,s):new It(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new TC(e,s):new AC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends RT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ai(e,n)}matches(e){return CT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function CT(r){return r.op==="and"}function IT(r){return vC(r)&&CT(r)}function vC(r){for(const e of r.filters)if(e instanceof Ai)return!1;return!0}function Mm(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+co(r.value);if(IT(r))return r.filters.map(e=>Mm(e)).join(",");{const e=r.filters.map(n=>Mm(n)).join(",");return`${r.op}(${e})`}}function DT(r,e){return r instanceof It?function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&Ti(s.value,o.value)}(r,e):r instanceof Ai?function(s,o){return o instanceof Ai&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&DT(f,o.filters[m]),!0):!1}(r,e):void Ee()}function NT(r){return r instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(r):r instanceof Ai?function(n){return n.op.toString()+" {"+n.getFilters().map(NT).join(" ,")+"}"}(r):"Filter"}class EC extends It{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class TC extends It{constructor(e,n){super(e,"in",n),this.keys=OT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AC extends It{constructor(e,n){super(e,"not-in",n),this.keys=OT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>_e.fromName(s.referenceValue))}class bC extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return up(n)&&Jl(n.arrayValue,this.value)}}class SC extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class wC extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jl(this.value.arrayValue,n)}}class RC extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!up(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Jl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.ue=null}}function qv(r,e=null,n=[],s=[],o=null,u=null,f=null){return new CC(r,e,n,s,o,u,f)}function cp(r){const e=Se(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Mm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>co(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>co(s)).join(",")),e.ue=n}return e.ue}function hp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!yC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!DT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!jv(r.startAt,e.startAt)&&jv(r.endAt,e.endAt)}function Vm(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IC(r,e,n,s,o,u,f,m){return new Ph(r,e,n,s,o,u,f,m)}function Uh(r){return new Ph(r)}function Hv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function DC(r){return r.collectionGroup!==null}function ql(r){const e=Se(r);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Nt(Ft.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new dh(u,s))}),n.has(Ft.keyField().canonicalString())||e.ce.push(new dh(Ft.keyField(),s))}return e.ce}function _i(r){const e=Se(r);return e.le||(e.le=NC(e,ql(r))),e.le}function NC(r,e){if(r.limitType==="F")return qv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new dh(o.field,u)});const n=r.endAt?new fh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new fh(r.startAt.position,r.startAt.inclusive):null;return qv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Pm(r,e,n){return new Ph(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Lh(r,e){return hp(_i(r),_i(e))&&r.limitType===e.limitType}function xT(r){return`${cp(_i(r))}|lt:${r.limitType}`}function Ja(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>NT(o)).join(", ")}]`),Mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>co(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>co(o)).join(",")),`Target(${s})`}(_i(r))}; limitType=${r.limitType})`}function zh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):_e.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const _=Bv(f,m,p);return f.inclusive?_<=0:_<0}(s.startAt,ql(s),o)||s.endAt&&!function(f,m,p){const _=Bv(f,m,p);return f.inclusive?_>=0:_>0}(s.endAt,ql(s),o))}(r,e)}function OC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kT(r){return(e,n)=>{let s=!1;for(const o of ql(r)){const u=xC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function xC(r,e,n){const s=r.field.isKeyField()?_e.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),_=m.data.field(u);return p!==null&&_!==null?uo(p,_):Ee()}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new at(_e.comparator);function cr(){return kC}const MT=new at(_e.comparator);function Ll(...r){let e=MT;for(const n of r)e=e.insert(n.key,n);return e}function VT(r){let e=MT;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $s(){return Hl()}function PT(){return Hl()}function Hl(){return new ra(r=>r.toString(),(r,e)=>r.isEqual(e))}const MC=new at(_e.comparator),VC=new Nt(_e.comparator);function xe(...r){let e=VC;for(const n of r)e=e.add(n);return e}const PC=new Nt(Me);function UC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function UT(r){return{integerValue:""+r}}function LC(r,e){return hC(e)?UT(e):fp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(){this._=void 0}}function zC(r,e,n){return r instanceof eu?function(o,u){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&lp(u)&&(u=Vh(u)),u&&(f.fields.__previous_value__=u),{mapValue:f}}(n,e):r instanceof ho?zT(r,e):r instanceof tu?BT(r,e):function(o,u){const f=LT(o,u),m=Fv(f)+Fv(o.Pe);return km(f)&&km(o.Pe)?UT(m):fp(o.serializer,m)}(r,e)}function BC(r,e,n){return r instanceof ho?zT(r,e):r instanceof tu?BT(r,e):n}function LT(r,e){return r instanceof mh?function(s){return km(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class eu extends Bh{}class ho extends Bh{constructor(e){super(),this.elements=e}}function zT(r,e){const n=jT(e);for(const s of r.elements)n.some(o=>Ti(o,s))||n.push(s);return{arrayValue:{values:n}}}class tu extends Bh{constructor(e){super(),this.elements=e}}function BT(r,e){let n=jT(e);for(const s of r.elements)n=n.filter(o=>!Ti(o,s));return{arrayValue:{values:n}}}class mh extends Bh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fv(r){return pt(r.integerValue||r.doubleValue)}function jT(r){return up(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.field=e,this.transform=n}}function jC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof ho&&o instanceof ho||s instanceof tu&&o instanceof tu?lo(s.elements,o.elements,Ti):s instanceof mh&&o instanceof mh?Ti(s.Pe,o.Pe):s instanceof eu&&o instanceof eu}(r.transform,e.transform)}class qC{constructor(e,n){this.version=e,this.transformResults=n}}class yi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jh{}function HT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new GT(r.key,yi.none()):new lu(r.key,r.data,yi.none());{const n=r.data,s=dn.empty();let o=new Nt(Ft.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ms(r.key,s,new Tn(o.toArray()),yi.none())}}function HC(r,e,n){r instanceof lu?function(o,u,f){const m=o.value.clone(),p=Kv(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,n):r instanceof ms?function(o,u,f){if(!th(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Kv(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(FT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Fl(r,e,n,s){return r instanceof lu?function(u,f,m,p){if(!th(u.precondition,f))return m;const _=u.value.clone(),E=Qv(u.fieldTransforms,p,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(r,e,n,s):r instanceof ms?function(u,f,m,p){if(!th(u.precondition,f))return m;const _=Qv(u.fieldTransforms,p,f),E=f.data;return E.setAll(FT(u)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,n,s):function(u,f,m){return th(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,n)}function FC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=LT(s.transform,o||null);u!=null&&(n===null&&(n=dn.empty()),n.set(s.field,u))}return n||null}function Gv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&lo(s,o,(u,f)=>jC(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class lu extends jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ms extends jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function FT(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function Kv(r,e,n){const s=new Map;Ge(r.length===n.length);for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,BC(f,m,n[o]))}return s}function Qv(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,zC(u,f,e))}return s}class GT extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GC extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&HC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Fl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Fl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=PT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=HT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,s)=>Gv(n,s))&&lo(this.baseMutations,e.baseMutations,(n,s)=>Gv(n,s))}}class dp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ge(e.mutations.length===s.length);let o=function(){return MC}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new dp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Le;function YC(r){switch(r){default:return Ee();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function KT(r){if(r===void 0)return ur("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Tt.OK:return ne.OK;case Tt.CANCELLED:return ne.CANCELLED;case Tt.UNKNOWN:return ne.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return ne.INTERNAL;case Tt.UNAVAILABLE:return ne.UNAVAILABLE;case Tt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Tt.NOT_FOUND:return ne.NOT_FOUND;case Tt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Tt.ABORTED:return ne.ABORTED;case Tt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Tt.DATA_LOSS:return ne.DATA_LOSS;default:return Ee()}}(Le=Tt||(Tt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new is([4294967295,4294967295],0);function $v(r){const e=XC().encode(r),n=new pT;return n.update(e),new Uint8Array(n.digest())}function Yv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new is([n,s],0),new is([o,u],0)]}class mp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(s<0)throw new zl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=is.fromNumber(this.Te)}de(e,n,s){let o=e.add(n.multiply(is.fromNumber(s)));return o.compare(WC)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=$v(e),[s,o]=Yv(n);for(let u=0;u<this.hashCount;u++){const f=this.de(s,o,u);if(!this.Ee(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new mp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Te===0)return;const n=$v(e),[s,o]=Yv(n);for(let u=0;u<this.hashCount;u++){const f=this.de(s,o,u);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new qh(Ae.min(),o,new at(Me),cr(),xe())}}class uu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new uu(s,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,s,o){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=o}}class QT{constructor(e,n){this.targetId=e,this.me=n}}class $T{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Xv{constructor(){this.fe=0,this.ge=Wv(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),s=xe();return this.ge.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ee()}}),new uu(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=Wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZC{constructor(e){this.Be=e,this.Le=new Map,this.ke=cr(),this.qe=Gc(),this.Qe=Gc(),this.Ke=new at(Me)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((s,o)=>{this.je(o)&&n(o)})}Je(e){const n=e.targetId,s=e.me.count,o=this.Ye(n);if(o){const u=o.target;if(Vm(u))if(s===0){const f=new _e(u.path);this.We(n,f,Wt.newNoDocument(f,Ae.min()))}else Ge(s===1);else{const f=this.Ze(n);if(f!==s){const m=this.Xe(e),p=m?this.et(m,e,f):1;if(p!==0){this.He(n);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,_)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=us(s).toUint8Array()}catch(p){if(p instanceof ST)return oo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new mp(f,o,u)}catch(p){return oo(p instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.Be.nt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.We(n,u,null),o++)}),o}it(e){const n=new Map;this.Le.forEach((u,f)=>{const m=this.Ye(f);if(m){if(u.current&&Vm(m.target)){const p=new _e(m.target.path);this.st(p).has(f)||this.ot(f,p)||this.We(f,p,Wt.newNoDocument(p,e))}u.be&&(n.set(f,u.ve()),u.Ce())}});let s=xe();this.Qe.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const _=this.Ye(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.ke.forEach((u,f)=>f.setReadTime(e));const o=new qh(e,n,this.Ke,this.ke,s);return this.ke=cr(),this.qe=Gc(),this.Qe=Gc(),this.Ke=new at(Me),o}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,n)?o.Fe(n,1):o.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new Xv,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Nt(Me),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Me),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Xv),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new at(_e.comparator)}function Wv(){return new at(_e.comparator)}const JC={asc:"ASCENDING",desc:"DESCENDING"},eI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tI={and:"AND",or:"OR"};class nI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Um(r,e){return r.useProto3Json||Mh(e)?e:{value:e}}function ph(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function iI(r,e){return ph(r,e.toTimestamp())}function vi(r){return Ge(!!r),Ae.fromTimestamp(function(n){const s=ls(n);return new Dt(s.seconds,s.nanos)}(r))}function pp(r,e){return Lm(r,e).canonicalString()}function Lm(r,e){const n=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function XT(r){const e=tt.fromString(r);return Ge(t0(e)),e}function zm(r,e){return pp(r.databaseId,e.path)}function mm(r,e){const n=XT(e);if(n.get(1)!==r.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new _e(ZT(n))}function WT(r,e){return pp(r.databaseId,e)}function rI(r){const e=XT(r);return e.length===4?tt.emptyPath():ZT(e)}function Bm(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ZT(r){return Ge(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Zv(r,e,n){return{name:zm(r,e),fields:n.value.mapValue.fields}}function sI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Ge(E===void 0||typeof E=="string"),Gt.fromBase64String(E||"")):(Ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Gt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(_){const E=_.code===void 0?ne.UNKNOWN:KT(_.code);return new me(E,_.message||"")}(f);n=new $T(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=mm(r,s.document.name),u=vi(s.document.updateTime),f=s.document.createTime?vi(s.document.createTime):Ae.min(),m=new dn({mapValue:{fields:s.document.fields}}),p=Wt.newFoundDocument(o,u,f,m),_=s.targetIds||[],E=s.removedTargetIds||[];n=new nh(_,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=mm(r,s.document),u=s.readTime?vi(s.readTime):Ae.min(),f=Wt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new nh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=mm(r,s.document),u=s.removedTargetIds||[];n=new nh([],u,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new $C(o,u),m=s.targetId;n=new QT(m,f)}}return n}function aI(r,e){let n;if(e instanceof lu)n={update:Zv(r,e.key,e.value)};else if(e instanceof GT)n={delete:zm(r,e.key)};else if(e instanceof ms)n={update:Zv(r,e.key,e.data),updateMask:pI(e.fieldMask)};else{if(!(e instanceof GC))return Ee();n={verify:zm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof eu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ho)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof tu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mh)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw Ee()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:iI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee()}(r,e.precondition)),n}function oI(r,e){return r&&r.length>0?(Ge(e!==void 0),r.map(n=>function(o,u){let f=o.updateTime?vi(o.updateTime):vi(u);return f.isEqual(Ae.min())&&(f=vi(u)),new qC(f,o.transformResults||[])}(n,e))):[]}function lI(r,e){return{documents:[WT(r,e.path)]}}function uI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=WT(r,o);const u=function(_){if(_.length!==0)return e0(Ai.create(_,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(_){if(_.length!==0)return _.map(E=>function(R){return{field:eo(R.field),direction:fI(R.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Um(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ct:n,parent:o}}function cI(r){let e=rI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ge(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(S){const R=JT(S);return R instanceof Ai&&IT(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(S){return S.map(R=>function(M){return new dh(to(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(R))}(n.orderBy));let m=null;n.limit&&(m=function(S){let R;return R=typeof S=="object"?S.value:S,Mh(R)?null:R}(n.limit));let p=null;n.startAt&&(p=function(S){const R=!!S.before,N=S.values||[];return new fh(N,R)}(n.startAt));let _=null;return n.endAt&&(_=function(S){const R=!S.before,N=S.values||[];return new fh(N,R)}(n.endAt)),IC(e,o,f,u,m,"F",p,_)}function hI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JT(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(n.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return It.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(r):r.fieldFilter!==void 0?function(n){return It.create(to(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Ai.create(n.compositeFilter.filters.map(s=>JT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(r):Ee()}function fI(r){return JC[r]}function dI(r){return eI[r]}function mI(r){return tI[r]}function eo(r){return{fieldPath:r.canonicalString()}}function to(r){return Ft.fromServerFormat(r.fieldPath)}function e0(r){return r instanceof It?function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(Lv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(Lv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:dI(n.op),value:n.value}}}(r):r instanceof Ai?function(n){const s=n.getFilters().map(o=>e0(o));return s.length===1?s[0]:{compositeFilter:{op:mI(n.op),filters:s}}}(r):Ee()}function pI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function t0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,s,o,u=Ae.min(),f=Ae.min(),m=Gt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.ht=e}}function _I(r){const e=cI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.ln=new vI}addToCollectionParentIndex(e,n){return this.ln.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(os.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class vI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Nt(tt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Nt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new fo(0)}static Qn(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE([r,e],[n,s]){const o=Me(r,n);return o===0?Me(e,s):o}class EI{constructor(e){this.Gn=e,this.buffer=new Nt(eE),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();eE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Yn(3e5)})}}class AI{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(kh.oe);const s=new EI(n);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Jv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jv):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,o,u,f,m,p,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,m=Date.now(),this.removeTargets(e,s,n))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(_=Date.now(),Za()<=Oe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(_-p)+`ms
Total Duration: ${_-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function bI(r,e){return new AI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Fl(s.mutation,o,Tn.empty(),Dt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=xe()){const o=$s();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Ll();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,xe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=cr();const f=Hl(),m=function(){return Hl()}();return n.forEach((p,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof ms)?u=u.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),Fl(E.mutation,_,E.mutation.getFieldMask(),Dt.now())):f.set(_.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((_,E)=>f.set(_,E)),n.forEach((_,E)=>{var S;return m.set(_,new wI(E,(S=f.get(_))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Hl();let o=new at((f,m)=>f-m),u=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const _=n.get(p);if(_===null)return;let E=s.get(p)||Tn.empty();E=m.applyToLocalView(_,E),s.set(p,E);const S=(o.get(m.batchId)||xe()).add(p);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),_=p.key,E=p.value,S=PT();E.forEach(R=>{if(!u.has(R)){const N=HT(n.get(R),s.get(R));N!==null&&S.set(R,N),u=u.add(R)}}),f.push(this.documentOverlayCache.saveOverlays(e,_,S))}return Z.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return _e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):Z.resolve($s());let m=-1,p=u;return f.next(_=>Z.forEach(_,(E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(e,E).next(R=>{p=p.insert(E,R)}))).next(()=>this.populateOverlays(e,_,u)).next(()=>this.computeViews(e,p,_,xe())).next(E=>({batchId:m,changes:VT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(s=>{let o=Ll();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(e,u).next(m=>Z.forEach(m,p=>{const _=function(S,R){return new Ph(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next(E=>{E.forEach((S,R)=>{f=f.insert(S,R)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,Wt.newInvalidDocument(E)))});let m=Ll();return f.forEach((p,_)=>{const E=u.get(p);E!==void 0&&Fl(E.mutation,_,Tn.empty(),Dt.now()),zh(n,_)&&(m=m.insert(p,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return Z.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:vi(o.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(o){return{name:o.name,query:_I(o.bundledQuery),readTime:vi(o.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.overlays=new at(_e.comparator),this.dr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return Z.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Tt(e,n,u)}),Z.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.dr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.dr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const o=$s(),u=n.length+1,f=new _e(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,_=p.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new at((_,E)=>_-E);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let E=u.get(_.largestBatchId);E===null&&(E=$s(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=$s(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return Z.resolve(m)}Tt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.dr.get(o.largestBatchId).delete(s.key);this.dr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new QC(n,s));let u=this.dr.get(n);u===void 0&&(u=xe(),this.dr.set(n,u)),this.dr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.Er=new Nt(Lt.Ar),this.Rr=new Nt(Lt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new Lt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new _e(new tt([])),s=new Lt(n,e),o=new Lt(n,e+1),u=[];return this.Rr.forEachInRange([s,o],f=>{this.gr(f),u.push(f.key)}),u}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new _e(new tt([])),s=new Lt(n,e),o=new Lt(n,e+1);let u=xe();return this.Rr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Lt(e,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return _e.comparator(e.key,n.key)||Me(e.br,n.br)}static Vr(e,n){return Me(e.br,n.br)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Nt(Lt.Ar)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new KC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.vr=this.vr.add(new Lt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Fr(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),o=new Lt(n,Number.POSITIVE_INFINITY),u=[];return this.vr.forEachInRange([s,o],f=>{const m=this.Cr(f.br);u.push(m)}),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Nt(Me);return n.forEach(o=>{const u=new Lt(o,0),f=new Lt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([u,f],m=>{s=s.add(m.br)})}),Z.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;_e.isDocumentKey(u)||(u=u.child(""));const f=new Lt(new _e(u),0);let m=new Nt(Me);return this.vr.forEachWhile(p=>{const _=p.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(p.br)),!0)},f),Z.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ge(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return Z.forEach(n.mutations,o=>{const u=new Lt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,n){const s=new Lt(n,0),o=this.vr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.Nr=e,this.docs=function(){return new at(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=cr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Wt.newInvalidDocument(o))}),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=cr();const f=n.path,m=new _e(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:_,value:{document:E}}=p.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||oC(aC(E),s)<=0||(o.has(E.key)||zh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ee()}Br(e,n){return Z.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new xI(this)}getSize(e){return Z.resolve(this.size)}}class xI extends SI{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),Z.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.persistence=e,this.Lr=new ra(n=>cp(n),hp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new gp,this.targetCount=0,this.Qr=fo.qn()}forEachTarget(e,n){return this.Lr.forEach((s,o)=>n(o)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),Z.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Un(n),Z.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Lr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Lr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Z.waitFor(u).next(()=>o)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.Lr.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),Z.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n){this.Kr={},this.overlays={},this.$r=new kh(0),this.Ur=!1,this.Ur=!0,this.Wr=new DI,this.referenceDelegate=e(this),this.Gr=new kI(this),this.indexManager=new yI,this.remoteDocumentCache=function(o){return new OI(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new gI(n),this.jr=new CI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new II,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new NI(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const o=new MI(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(u=>this.referenceDelegate.Jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Yr(e,n){return Z.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class MI extends uC{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Zr=new gp,this.Xr=null}static ei(e){return new _p(e)}get ti(){if(this.Xr)return this.Xr;throw Ee()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ti.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ti,s=>{const o=_e.fromPath(s);return this.ni(e,o).next(u=>{u||n.removeEntry(o,Ae.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return Z.or([()=>Z.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class gh{constructor(e,n){this.persistence=e,this.ri=new ra(s=>fC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=bI(this,n)}static ei(e,n){return new gh(e,n)}Hr(){}Jr(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return Z.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(u=>u?Z.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.Br(e,f=>this.ir(e,f,n).next(m=>{m||(s++,u.removeEntry(f,Ae.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),Z.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jc(e.data.value)),n}ir(e,n,s){return Z.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.ri.get(n);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=o}static zi(e,n){let s=xe(),o=xe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new yp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return kR()?8:cC(Zt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.Xi(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.es(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new VI;return this.ts(e,n,f).next(m=>{if(u.result=m,this.Hi)return this.ns(e,n,f,m.size)})}).next(()=>u.result)}ns(e,n,s,o){return s.documentReadCount<this.Ji?(Za()<=Oe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Z.resolve()):(Za()<=Oe.DEBUG&&ue("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(Za()<=Oe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(n))):Z.resolve())}Xi(e,n){if(Hv(n))return Z.resolve(null);let s=_i(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Pm(n,null,"F"),s=_i(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=xe(...u);return this.Zi.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const _=this.rs(n,m);return this.ss(n,_,f,p.readTime)?this.Xi(e,Pm(n,null,"F")):this.os(e,_,n,p)}))})))}es(e,n,s,o){return Hv(n)||o.isEqual(Ae.min())?Z.resolve(null):this.Zi.getDocuments(e,s).next(u=>{const f=this.rs(n,u);return this.ss(n,f,s,o)?Z.resolve(null):(Za()<=Oe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(n)),this.os(e,f,n,sC(o,-1)).next(m=>m))})}rs(e,n){let s=new Nt(kT(e));return n.forEach((o,u)=>{zh(e,u)&&(s=s.add(u))}),s}ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ts(e,n,s){return Za()<=Oe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.Zi.getDocumentsMatchingQuery(e,n,os.min(),s)}os(e,n,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,s,o){this.persistence=e,this._s=n,this.serializer=o,this.us=new at(Me),this.cs=new ra(u=>cp(u),hp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function LI(r,e,n,s){return new UI(r,e,n,s)}async function i0(r,e){const n=Se(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=xe();for(const _ of o){f.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(_=>({Ts:_,removedBatchIds:f,addedBatchIds:m}))})})}function zI(r,e){const n=Se(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,p,_,E){const S=_.batch,R=S.keys();let N=Z.resolve();return R.forEach(M=>{N=N.next(()=>E.getEntry(p,M)).next(F=>{const L=_.docVersions.get(M);Ge(L!==null),F.version.compareTo(L)<0&&(S.applyToRemoteDocument(F,_),F.isValidDocument()&&(F.setReadTime(_.commitVersion),E.addEntry(F)))})}),N.next(()=>m.mutationQueue.removeMutationBatch(p,S))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=xe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(p=p.add(m.batch.mutations[_].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function r0(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function BI(r,e){const n=Se(r),s=e.snapshotVersion;let o=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.hs.newChangeBuffer({trackRemovals:!0});o=n.us;const m=[];e.targetChanges.forEach((E,S)=>{const R=o.get(S);if(!R)return;m.push(n.Gr.removeMatchingKeys(u,E.removedDocuments,S).next(()=>n.Gr.addMatchingKeys(u,E.addedDocuments,S)));let N=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?N=N.withResumeToken(Gt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,s)),o=o.insert(S,N),function(F,L,K){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(R,N,E)&&m.push(n.Gr.updateTargetData(u,N))});let p=cr(),_=xe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(jI(u,f,e.documentUpdates).next(E=>{p=E.Is,_=E.ds})),!s.isEqual(Ae.min())){const E=n.Gr.getLastRemoteSnapshotVersion(u).next(S=>n.Gr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return Z.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,_)).next(()=>p)}).then(u=>(n.us=o,u))}function jI(r,e,n){let s=xe(),o=xe();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=cr();return n.forEach((m,p)=>{const _=u.get(m);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ue("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",p.version)}),{Is:f,ds:o}})}function qI(r,e){const n=Se(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function HI(r,e){const n=Se(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Gr.getTargetData(s,e).next(u=>u?(o=u,Z.resolve(o)):n.Gr.allocateTargetId(s).next(f=>(o=new es(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function jm(r,e,n){const s=Se(r),o=s.us.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Ao(f))throw f;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function tE(r,e,n){const s=Se(r);let o=Ae.min(),u=xe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,_,E){const S=Se(p),R=S.cs.get(E);return R!==void 0?Z.resolve(S.us.get(R)):S.Gr.getTargetData(_,E)}(s,f,_i(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s._s.getDocumentsMatchingQuery(f,e,n?o:Ae.min(),n?u:xe())).next(m=>(FI(s,OC(e),m),{documents:m,Es:u})))}function FI(r,e,n){let s=r.ls.get(e)||Ae.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.ls.set(e,s)}class nE{constructor(){this.activeTargetIds=UC()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(){this._o=new nE,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new nE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function pm(){return Kc===null?Kc=function(){return 268435456+Math.round(2147483648*Math.random())}():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class YI extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${o}/databases/${u}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Oo(n,s,o,u,f){const m=pm(),p=this.No(n,s.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${m}:`,p,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(_,u,f),this.Lo(n,p,_,o).then(E=>(ue("RestConnection",`Received RPC '${n}' ${m}: `,E),E),E=>{throw oo("RestConnection",`RPC '${n}' ${m} failed with error: `,E,"url: ",p,"request:",o),E})}ko(n,s,o,u,f,m){return this.Oo(n,s,o,u,f)}Bo(n,s,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((u,f)=>n[f]=u),o&&o.headers.forEach((u,f)=>n[f]=u)}No(n,s){const o=QI[n];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,s,o){const u=pm();return new Promise((f,m)=>{const p=new gT;p.setWithCredentials(!0),p.listenOnce(_T.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zc.NO_ERROR:const E=p.getResponseJson();ue(Yt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Zc.TIMEOUT:ue(Yt,`RPC '${e}' ${u} timed out`),m(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const S=p.getStatus();if(ue(Yt,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const N=R==null?void 0:R.error;if(N&&N.status&&N.message){const M=function(L){const K=L.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(K)>=0?K:ne.UNKNOWN}(N.status);m(new me(M,N.message))}else m(new me(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ue(Yt,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(o);ue(Yt,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",_,s,15)})}qo(e,n,s){const o=pm(),u=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ET(),m=vT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ue(Yt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const S=f.createWebChannel(E,p);let R=!1,N=!1;const M=new $I({Eo:L=>{N?ue(Yt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(R||(ue(Yt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),R=!0),ue(Yt,`RPC '${e}' stream ${o} sending:`,L),S.send(L))},Ao:()=>S.close()}),F=(L,K,ee)=>{L.listen(K,Q=>{try{ee(Q)}catch(J){setTimeout(()=>{throw J},0)}})};return F(S,Ul.EventType.OPEN,()=>{N||(ue(Yt,`RPC '${e}' stream ${o} transport opened.`),M.So())}),F(S,Ul.EventType.CLOSE,()=>{N||(N=!0,ue(Yt,`RPC '${e}' stream ${o} transport closed`),M.Do())}),F(S,Ul.EventType.ERROR,L=>{N||(N=!0,oo(Yt,`RPC '${e}' stream ${o} transport errored:`,L),M.Do(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),F(S,Ul.EventType.MESSAGE,L=>{var K;if(!N){const ee=L.data[0];Ge(!!ee);const Q=ee,J=(Q==null?void 0:Q.error)||((K=Q[0])===null||K===void 0?void 0:K.error);if(J){ue(Yt,`RPC '${e}' stream ${o} received error:`,J);const re=J.status;let ce=function(b){const I=Tt[b];if(I!==void 0)return KT(I)}(re),O=J.message;ce===void 0&&(ce=ne.INTERNAL,O="Unknown error status: "+re+" with message "+J.message),N=!0,M.Do(new me(ce,O)),S.close()}else ue(Yt,`RPC '${e}' stream ${o} received:`,ee),M.vo(ee)}}),F(m,yT.STAT_EVENT,L=>{L.stat===Om.PROXY?ue(Yt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Om.NOPROXY&&ue(Yt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.bo()},0),M}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r){return new nI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,s=1e3,o=1.5,u=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=o,this.$o=u,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,n-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,s,o,u,f,m,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new s0(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===n&&this.I_(s,o)},s=>{e(()=>{const o=new me(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(o)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.d_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XI extends a0{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=sI(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ae.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?vi(f.readTime):Ae.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=Bm(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Vm(p)?{documents:lI(u,p)}:{query:uI(u,p).ct},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=YT(u,f.resumeToken);const _=Um(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Ae.min())>0){m.readTime=ph(u,f.snapshotVersion.toTimestamp());const _=Um(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,e);const s=hI(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.c_(n)}}class WI extends a0{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=oI(e.writeResults,e.commitTime),s=vi(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=Bm(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>aI(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends class{}{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Oo(e,Lm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())})}ko(e,n,s,o,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.ko(e,Lm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ne.UNKNOWN,f.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class JI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ur(n),this.C_=!1):ue("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=u,this.Q_.uo(f=>{s.enqueueAndForget(async()=>{sa(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(p){const _=Se(p);_.k_.add(4),await cu(_),_.K_.set("Unknown"),_.k_.delete(4),await Fh(_)}(this))})}),this.K_=new JI(s,o)}}async function Fh(r){if(sa(r))for(const e of r.q_)await e(!0)}async function cu(r){for(const e of r.q_)await e(!1)}function o0(r,e){const n=Se(r);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),Ap(n)?Tp(n):bo(n).s_()&&Ep(n,e))}function vp(r,e){const n=Se(r),s=bo(n);n.L_.delete(e),s.s_()&&l0(n,e),n.L_.size===0&&(s.s_()?s.a_():sa(n)&&n.K_.set("Unknown"))}function Ep(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(r).V_(e)}function l0(r,e){r.U_.xe(e),bo(r).m_(e)}function Tp(r){r.U_=new ZC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),bo(r).start(),r.K_.F_()}function Ap(r){return sa(r)&&!bo(r).i_()&&r.L_.size>0}function sa(r){return Se(r).k_.size===0}function u0(r){r.U_=void 0}async function t2(r){r.K_.set("Online")}async function n2(r){r.L_.forEach((e,n)=>{Ep(r,e)})}async function i2(r,e){u0(r),Ap(r)?(r.K_.O_(e),Tp(r)):r.K_.set("Unknown")}async function r2(r,e,n){if(r.K_.set("Online"),e instanceof $T&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.L_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.L_.delete(m),o.U_.removeTarget(m))}(r,e)}catch(s){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _h(r,s)}else if(e instanceof nh?r.U_.$e(e):e instanceof QT?r.U_.Je(e):r.U_.Ge(e),!n.isEqual(Ae.min()))try{const s=await r0(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.U_.it(f);return m.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.L_.get(_);E&&u.L_.set(_,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,_)=>{const E=u.L_.get(p);if(!E)return;u.L_.set(p,E.withResumeToken(Gt.EMPTY_BYTE_STRING,E.snapshotVersion)),l0(u,p);const S=new es(E.target,p,_,E.sequenceNumber);Ep(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ue("RemoteStore","Failed to raise snapshot:",s),await _h(r,s)}}async function _h(r,e,n){if(!Ao(e))throw e;r.k_.add(1),await cu(r),r.K_.set("Offline"),n||(n=()=>r0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),r.k_.delete(1),await Fh(r)})}function c0(r,e){return e().catch(n=>_h(r,n,e))}async function Gh(r){const e=Se(r),n=hs(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;s2(e);)try{const o=await qI(e.localStore,s);if(o===null){e.B_.length===0&&n.a_();break}s=o.batchId,a2(e,o)}catch(o){await _h(e,o)}h0(e)&&f0(e)}function s2(r){return sa(r)&&r.B_.length<10}function a2(r,e){r.B_.push(e);const n=hs(r);n.s_()&&n.f_&&n.g_(e.mutations)}function h0(r){return sa(r)&&!hs(r).i_()&&r.B_.length>0}function f0(r){hs(r).start()}async function o2(r){hs(r).w_()}async function l2(r){const e=hs(r);for(const n of r.B_)e.g_(n.mutations)}async function u2(r,e,n){const s=r.B_.shift(),o=dp.from(s,e,n);await c0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Gh(r)}async function c2(r,e){e&&hs(r).f_&&await async function(s,o){if(function(f){return YC(f)&&f!==ne.ABORTED}(o.code)){const u=s.B_.shift();hs(s).__(),await c0(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Gh(s)}}(r,e),h0(r)&&f0(r)}async function rE(r,e){const n=Se(r);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const s=sa(n);n.k_.add(3),await cu(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Fh(n)}async function h2(r,e){const n=Se(r);e?(n.k_.delete(2),await Fh(n)):e||(n.k_.add(2),await cu(n),n.K_.set("Unknown"))}function bo(r){return r.W_||(r.W_=function(n,s,o){const u=Se(n);return u.b_(),new XI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Ro:t2.bind(null,r),mo:n2.bind(null,r),po:i2.bind(null,r),R_:r2.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Ap(r)?Tp(r):r.K_.set("Unknown")):(await r.W_.stop(),u0(r))})),r.W_}function hs(r){return r.G_||(r.G_=function(n,s,o){const u=Se(n);return u.b_(),new WI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:o2.bind(null,r),po:c2.bind(null,r),p_:l2.bind(null,r),y_:u2.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Gh(r)):(await r.G_.stop(),r.B_.length>0&&(ue("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new bp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(r,e){if(ur("AsyncQueue",`${e}: ${r}`),Ao(r))return new me(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Ll(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.z_=new at(_e.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Ee():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class mo{constructor(e,n,s,o,u,f,m,p,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new mo(e,n,io.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class d2{constructor(){this.queries=aE(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const o=Se(n),u=o.queries;o.queries=aE(),u.forEach((f,m)=>{for(const p of m.J_)p.onError(s)})})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function aE(){return new ra(r=>xT(r),Lh)}async function wp(r,e){const n=Se(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Y_()&&e.Z_()&&(s=2):(u=new f2,s=e.Z_()?0:1);try{switch(s){case 0:u.H_=await n.onListen(o,!0);break;case 1:u.H_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Sp(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.J_.push(e),e.ea(n.onlineState),u.H_&&e.ta(u.H_)&&Cp(n)}async function Rp(r,e){const n=Se(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.J_.indexOf(e);f>=0&&(u.J_.splice(f,1),u.J_.length===0?o=e.Z_()?0:1:!u.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function m2(r,e){const n=Se(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.J_)m.ta(o)&&(s=!0);f.H_=o}}s&&Cp(n)}function p2(r,e,n){const s=Se(r),o=s.queries.get(e);if(o)for(const u of o.J_)u.onError(n);s.queries.delete(e)}function Cp(r){r.X_.forEach(e=>{e.next()})}var qm,oE;(oE=qm||(qm={})).na="default",oE.Cache="cache";class Ip{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.key=e}}class m0{constructor(e){this.key=e}}class g2{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=xe(),this.mutatedKeys=xe(),this.Va=kT(e),this.ma=new io(this.Va)}get fa(){return this.Ea}ga(e,n){const s=n?n.pa:new sE,o=n?n.ma:this.ma;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const R=o.get(E),N=zh(this.query,S)?S:null,M=!!R&&this.mutatedKeys.has(R.key),F=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;R&&N?R.data.isEqual(N.data)?M!==F&&(s.track({type:3,doc:N}),L=!0):this.ya(R,N)||(s.track({type:2,doc:N}),L=!0,(p&&this.Va(N,p)>0||_&&this.Va(N,_)<0)&&(m=!0)):!R&&N?(s.track({type:0,doc:N}),L=!0):R&&!N&&(s.track({type:1,doc:R}),L=!0,(p||_)&&(m=!0)),L&&(N?(f=f.add(N),u=F?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{ma:f,pa:s,ss:m,mutatedKeys:u}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const f=e.pa.j_();f.sort((E,S)=>function(N,M){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return F(N)-F(M)}(E.type,S.type)||this.Va(E.doc,S.doc)),this.wa(s),o=o!=null&&o;const m=n&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,_=p!==this.Aa;return this.Aa=p,f.length!==0||_?{snapshot:new mo(this.query,e.ma,u,f,e.mutatedKeys,p===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sE,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=xe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new m0(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new d0(s))}),n}va(e){this.Ea=e.Es,this.Ra=xe();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return mo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class _2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class y2{constructor(e){this.key=e,this.Fa=!1}}class v2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Ma={},this.xa=new ra(m=>xT(m),Lh),this.Oa=new Map,this.Na=new Set,this.Ba=new at(_e.comparator),this.La=new Map,this.ka=new gp,this.qa={},this.Qa=new Map,this.Ka=fo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function E2(r,e,n=!0){const s=E0(r);let o;const u=s.xa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Ca()):o=await p0(s,e,n,!0),o}async function T2(r,e){const n=E0(r);await p0(n,e,!0,!1)}async function p0(r,e,n,s){const o=await HI(r.localStore,_i(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await A2(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&o0(r.remoteStore,o),m}async function A2(r,e,n,s,o){r.Ua=(S,R,N)=>async function(F,L,K,ee){let Q=L.view.ga(K);Q.ss&&(Q=await tE(F.localStore,L.query,!1).then(({documents:O})=>L.view.ga(O,Q)));const J=ee&&ee.targetChanges.get(L.targetId),re=ee&&ee.targetMismatches.get(L.targetId)!=null,ce=L.view.applyChanges(Q,F.isPrimaryClient,J,re);return uE(F,L.targetId,ce.ba),ce.snapshot}(r,S,R,N);const u=await tE(r.localStore,e,!0),f=new g2(e,u.Es),m=f.ga(u.documents),p=uu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(m,r.isPrimaryClient,p);uE(r,n,_.ba);const E=new _2(e,n,f);return r.xa.set(e,E),r.Oa.has(n)?r.Oa.get(n).push(e):r.Oa.set(n,[e]),_.snapshot}async function b2(r,e,n){const s=Se(r),o=s.xa.get(e),u=s.Oa.get(o.targetId);if(u.length>1)return s.Oa.set(o.targetId,u.filter(f=>!Lh(f,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await jm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&vp(s.remoteStore,o.targetId),Hm(s,o.targetId)}).catch(To)):(Hm(s,o.targetId),await jm(s.localStore,o.targetId,!0))}async function S2(r,e){const n=Se(r),s=n.xa.get(e),o=n.Oa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),vp(n.remoteStore,s.targetId))}async function w2(r,e,n){const s=x2(r);try{const o=await function(f,m){const p=Se(f),_=Dt.now(),E=m.reduce((N,M)=>N.add(M.key),xe());let S,R;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let M=cr(),F=xe();return p.hs.getEntries(N,E).next(L=>{M=L,M.forEach((K,ee)=>{ee.isValidDocument()||(F=F.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,M)).next(L=>{S=L;const K=[];for(const ee of m){const Q=FC(ee,S.get(ee.key).overlayedDocument);Q!=null&&K.push(new ms(ee.key,Q,wT(Q.value.mapValue),yi.exists(!0)))}return p.mutationQueue.addMutationBatch(N,_,K,m)}).next(L=>{R=L;const K=L.applyToLocalDocumentSet(S,F);return p.documentOverlayCache.saveOverlays(N,L.batchId,K)})}).then(()=>({batchId:R.batchId,changes:VT(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let _=f.qa[f.currentUser.toKey()];_||(_=new at(Me)),_=_.insert(m,p),f.qa[f.currentUser.toKey()]=_}(s,o.batchId,n),await hu(s,o.changes),await Gh(s.remoteStore)}catch(o){const u=Sp(o,"Failed to persist write");n.reject(u)}}async function g0(r,e){const n=Se(r);try{const s=await BI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.La.get(u);f&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Fa=!0:o.modifiedDocuments.size>0?Ge(f.Fa):o.removedDocuments.size>0&&(Ge(f.Fa),f.Fa=!1))}),await hu(n,s,e)}catch(s){await To(s)}}function lE(r,e,n){const s=Se(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.xa.forEach((u,f)=>{const m=f.view.ea(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Se(f);p.onlineState=m;let _=!1;p.queries.forEach((E,S)=>{for(const R of S.J_)R.ea(m)&&(_=!0)}),_&&Cp(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function R2(r,e,n){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.La.get(e),u=o&&o.key;if(u){let f=new at(_e.comparator);f=f.insert(u,Wt.newNoDocument(u,Ae.min()));const m=xe().add(u),p=new qh(Ae.min(),new Map,new at(Me),f,m);await g0(s,p),s.Ba=s.Ba.remove(u),s.La.delete(e),Dp(s)}else await jm(s.localStore,e,!1).then(()=>Hm(s,e,n)).catch(To)}async function C2(r,e){const n=Se(r),s=e.batch.batchId;try{const o=await zI(n.localStore,e);y0(n,s,null),_0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await hu(n,o)}catch(o){await To(o)}}async function I2(r,e,n){const s=Se(r);try{const o=await function(f,m){const p=Se(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.mutationQueue.lookupMutationBatch(_,m).next(S=>(Ge(S!==null),E=S.keys(),p.mutationQueue.removeMutationBatch(_,S))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>p.localDocuments.getDocuments(_,E))})}(s.localStore,e);y0(s,e,n),_0(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await hu(s,o)}catch(o){await To(o)}}function _0(r,e){(r.Qa.get(e)||[]).forEach(n=>{n.resolve()}),r.Qa.delete(e)}function y0(r,e,n){const s=Se(r);let o=s.qa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Hm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),n&&r.Ma.Wa(s,n);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||v0(r,s)})}function v0(r,e){r.Na.delete(e.path.canonicalString());const n=r.Ba.get(e);n!==null&&(vp(r.remoteStore,n),r.Ba=r.Ba.remove(e),r.La.delete(n),Dp(r))}function uE(r,e,n){for(const s of n)s instanceof d0?(r.ka.addReference(s.key,e),D2(r,s)):s instanceof m0?(ue("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||v0(r,s.key)):Ee()}function D2(r,e){const n=e.key,s=n.path.canonicalString();r.Ba.get(n)||r.Na.has(s)||(ue("SyncEngine","New document in limbo: "+n),r.Na.add(s),Dp(r))}function Dp(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const n=new _e(tt.fromString(e)),s=r.Ka.next();r.La.set(s,new y2(n)),r.Ba=r.Ba.insert(n,s),o0(r.remoteStore,new es(_i(Uh(n.path)),s,"TargetPurposeLimboResolution",kh.oe))}}async function hu(r,e,n){const s=Se(r),o=[],u=[],f=[];s.xa.isEmpty()||(s.xa.forEach((m,p)=>{f.push(s.Ua(p,e,n).then(_=>{var E;if((_||n)&&s.isPrimaryClient){const S=_?!_.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(_){o.push(_);const S=yp.zi(p.targetId,_);u.push(S)}}))}),await Promise.all(f),s.Ma.R_(o),await async function(p,_){const E=Se(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Z.forEach(_,R=>Z.forEach(R.Wi,N=>E.persistence.referenceDelegate.addReference(S,R.targetId,N)).next(()=>Z.forEach(R.Gi,N=>E.persistence.referenceDelegate.removeReference(S,R.targetId,N)))))}catch(S){if(!Ao(S))throw S;ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of _){const R=S.targetId;if(!S.fromCache){const N=E.us.get(R),M=N.snapshotVersion,F=N.withLastLimboFreeSnapshotVersion(M);E.us=E.us.insert(R,F)}}}(s.localStore,u))}async function N2(r,e){const n=Se(r);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const s=await i0(n.localStore,e);n.currentUser=e,function(u,f){u.Qa.forEach(m=>{m.forEach(p=>{p.reject(new me(ne.CANCELLED,f))})}),u.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await hu(n,s.Ts)}}function O2(r,e){const n=Se(r),s=n.La.get(e);if(s&&s.Fa)return xe().add(s.key);{let o=xe();const u=n.Oa.get(e);if(!u)return o;for(const f of u){const m=n.xa.get(f);o=o.unionWith(m.view.fa)}return o}}function E0(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=g0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.Ma.R_=m2.bind(null,e.eventManager),e.Ma.Wa=p2.bind(null,e.eventManager),e}function x2(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I2.bind(null,e),e}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return LI(this.persistence,new PI,e.initialUser,this.serializer)}ja(e){return new n0(_p.ei,this.serializer)}za(e){return new GI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class k2 extends yh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ge(this.persistence.referenceDelegate instanceof gh);const s=this.persistence.referenceDelegate.garbageCollector;return new TI(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new n0(s=>gh.ei(s,n),this.serializer)}}class Fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>lE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=N2.bind(null,this.syncEngine),await h2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d2}()}createDatastore(e){const n=Hh(e.databaseInfo.databaseId),s=function(u){return new YI(u)}(e.databaseInfo);return function(u,f,m,p){return new ZI(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new e2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>lE(this.syncEngine,n,0),function(){return iE.p()?new iE:new KI}())}createSyncEngine(e,n){return function(o,u,f,m,p,_,E){const S=new v2(o,u,f,m,p,_);return E&&(S.$a=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Se(o);ue("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await cu(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=AT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ue("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ue("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Sp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function _m(r,e){r.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await i0(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function cE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await V2(r);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>rE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>rE(e.remoteStore,o)),r._onlineComponents=e}async function V2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await _m(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await _m(r,new yh)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await _m(r,new k2(void 0));return r._offlineComponents}async function T0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(r,r._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await cE(r,new Fm))),r._onlineComponents}function P2(r){return T0(r).then(e=>e.syncEngine)}async function vh(r){const e=await T0(r),n=e.eventManager;return n.onListen=E2.bind(null,e.syncEngine),n.onUnlisten=b2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=S2.bind(null,e.syncEngine),n}function U2(r,e,n={}){const s=new ar;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,_){const E=new Np({next:R=>{E.eu(),f.enqueueAndForget(()=>Rp(u,S));const N=R.docs.has(m);!N&&R.fromCache?_.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&R.fromCache&&p&&p.source==="server"?_.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),S=new Ip(Uh(m.path),E,{includeMetadataChanges:!0,ua:!0});return wp(u,S)}(await vh(r),r.asyncQueue,e,n,s)),s.promise}function L2(r,e,n={}){const s=new ar;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,_){const E=new Np({next:R=>{E.eu(),f.enqueueAndForget(()=>Rp(u,S)),R.fromCache&&p.source==="server"?_.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),S=new Ip(m,E,{includeMetadataChanges:!0,ua:!0});return wp(u,S)}(await vh(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function z2(r,e,n,s){if(e===!0&&s===!0)throw new me(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function fE(r){if(!_e.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function dE(r){if(_e.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Op(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee()}function jn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(r);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new X1;switch(s.type){case"firstParty":return new eC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=hE.get(n);s&&(ue("ComponentProvider","Removing Datastore"),hE.delete(n),s.terminate())}(this),Promise.resolve()}}function B2(r,e,n,s={}){var o;const u=(r=jn(r,Kh))._getSettings(),f=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==f&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:f,ssl:!1})),s.mockUserToken){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Xt.MOCK_USER;else{m=uT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Xt(_)}r._authCredentials=new W1(new TT(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fu(this.firestore,e,this._query)}}class on{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class rs extends fu{constructor(e,n,s){super(e,n,Uh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new _e(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function j2(r,e,...n){if(r=gt(r),b0("collection","path",e),r instanceof Kh){const s=tt.fromString(e,...n);return dE(s),new rs(r,null,s)}{if(!(r instanceof on||r instanceof rs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return dE(s),new rs(r.firestore,null,s)}}function tr(r,e,...n){if(r=gt(r),arguments.length===1&&(e=AT.newId()),b0("doc","path",e),r instanceof Kh){const s=tt.fromString(e,...n);return fE(s),new on(r,null,new _e(s))}{if(!(r instanceof on||r instanceof rs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return fE(s),new on(r.firestore,r instanceof rs?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new s0(this,"async_queue_retry"),this.fu=()=>{const s=gm();s&&ue("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new ar;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ao(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw ur("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const o=bp.createAndSchedule(this,e,n,s,u=>this.Su(u));return this.Eu.push(o),o}pu(){this.Au&&Ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function gE(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class ea extends Kh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new pE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pE(e),this._firestoreClient=void 0,await e}}}function q2(r,e){const n=typeof r=="object"?r:ap(),s=typeof r=="string"?r:"(default)",o=xh(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=aT("firestore");u&&B2(o,...u)}return o}function Qh(r){if(r._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||H2(r),r._firestoreClient}function H2(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,_,E){return new pC(m,p,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,A0(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new M2(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(Gt.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=/^__.*__$/;class G2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new lu(e,this.data,n,this.fieldTransforms)}}class S0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function w0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Yh{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Fu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Yh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.xu({path:s,Nu:!1});return o.Bu(e),o}Lu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Eh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(w0(this.Mu)&&F2.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class K2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Hh(e)}$u(e,n,s,o=!1){return new Yh({Mu:e,methodName:n,Ku:s,path:Ft.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function R0(r){const e=r._freezeSettings(),n=Hh(r._databaseId);return new K2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Q2(r,e,n,s,o,u={}){const f=r.$u(u.merge||u.mergeFields?2:0,e,n,o);Pp("Data must be an object, but it was:",f,s);const m=C0(s,f);let p,_;if(u.merge)p=new Tn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const R=Gm(e,S,n);if(!f.contains(R))throw new me(ne.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);D0(E,R)||E.push(R)}p=new Tn(E),_=f.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,_=f.fieldTransforms;return new G2(new dn(m),p,_)}class Xh extends du{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function $2(r,e,n){return new Yh({Mu:3,Ku:e.settings.Ku,methodName:r._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mp extends du{_toFieldTransform(e){return new qT(e.path,new eu)}isEqual(e){return e instanceof Mp}}class Vp extends du{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=$2(this,e,!0),s=this.Uu.map(u=>mu(u,n)),o=new ho(s);return new qT(e.path,o)}isEqual(e){return e instanceof Vp&&Yl(this.Uu,e.Uu)}}function Y2(r,e,n,s){const o=r.$u(1,e,n);Pp("Data must be an object, but it was:",o,s);const u=[],f=dn.empty();ds(s,(p,_)=>{const E=Up(e,p,n);_=gt(_);const S=o.Lu(E);if(_ instanceof Xh)u.push(E);else{const R=mu(_,S);R!=null&&(u.push(E),f.set(E,R))}});const m=new Tn(u);return new S0(f,m,o.fieldTransforms)}function X2(r,e,n,s,o,u){const f=r.$u(1,e,n),m=[Gm(e,s,n)],p=[o];if(u.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(Gm(e,u[R])),p.push(u[R+1]);const _=[],E=dn.empty();for(let R=m.length-1;R>=0;--R)if(!D0(_,m[R])){const N=m[R];let M=p[R];M=gt(M);const F=f.Lu(N);if(M instanceof Xh)_.push(N);else{const L=mu(M,F);L!=null&&(_.push(N),E.set(N,L))}}const S=new Tn(_);return new S0(E,S,f.fieldTransforms)}function mu(r,e){if(I0(r=gt(r)))return Pp("Unsupported field value:",e,r),C0(r,e);if(r instanceof du)return function(s,o){if(!w0(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=mu(m,o.ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=gt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Dt.fromDate(s);return{timestampValue:ph(o.serializer,u)}}if(s instanceof Dt){const u=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ph(o.serializer,u)}}if(s instanceof xp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof po)return{bytesValue:YT(o.serializer,s._byteString)};if(s instanceof on){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.qu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof kp)return function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.qu("VectorValues must only contain numeric values.");return fp(m.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${Op(s)}`)}(r,e)}function C0(r,e){const n={};return bT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(r,(s,o)=>{const u=mu(o,e.Ou(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function I0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Dt||r instanceof xp||r instanceof po||r instanceof on||r instanceof du||r instanceof kp)}function Pp(r,e,n){if(!I0(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Op(n);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function Gm(r,e,n){if((e=gt(e))instanceof $h)return e._internalPath;if(typeof e=="string")return Up(r,e);throw Eh("Field path arguments must be of type string or ",r,!1,void 0,n)}const W2=new RegExp("[~\\*/\\[\\]]");function Up(r,e,n){if(e.search(W2)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new $h(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Eh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new me(ne.INVALID_ARGUMENT,m+r+p)}function D0(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(O0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z2 extends N0{data(){return super.data()}}function O0(r,e){return typeof e=="string"?Up(r,e):e instanceof $h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J2{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ds(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>pt(f.doubleValue));return new kp(u)}convertGeoPoint(e){return new xp(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Vh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=ls(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Ge(t0(s));const o=new Zl(s.get(1),s.get(3)),u=new _e(s.popFirst(5));return o.isEqual(n)||ur(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k0 extends N0{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(O0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ih extends k0{data(e={}){return super.data(e)}}class M0{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ih(this._firestore,this._userDataWriter,s.key,s,new Bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:tD(m.type),doc:p,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(r){r=jn(r,on);const e=jn(r.firestore,ea);return U2(Qh(e),r._key).then(n=>P0(e,r,n))}class Lp extends J2{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function iD(r){r=jn(r,fu);const e=jn(r.firestore,ea),n=Qh(e),s=new Lp(e);return x0(r._query),L2(n,r._query).then(o=>new M0(e,s,r,o))}function Gl(r,e,n){r=jn(r,on);const s=jn(r.firestore,ea),o=eD(r.converter,e,n);return V0(s,[Q2(R0(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,yi.none())])}function rD(r,e,n,...s){r=jn(r,on);const o=jn(r.firestore,ea),u=R0(o);let f;return f=typeof(e=gt(e))=="string"||e instanceof $h?X2(u,"updateDoc",r._key,e,n,s):Y2(u,"updateDoc",r._key,e),V0(o,[f.toMutation(r._key,yi.exists(!0))])}function Th(r,...e){var n,s,o;r=gt(r);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||gE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(gE(e[f])){const S=e[f];e[f]=(n=S.next)===null||n===void 0?void 0:n.bind(S),e[f+1]=(s=S.error)===null||s===void 0?void 0:s.bind(S),e[f+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let p,_,E;if(r instanceof on)_=jn(r.firestore,ea),E=Uh(r._key.path),p={next:S=>{e[f]&&e[f](P0(_,r,S))},error:e[f+1],complete:e[f+2]};else{const S=jn(r,fu);_=jn(S.firestore,ea),E=S._query;const R=new Lp(_);p={next:N=>{e[f]&&e[f](new M0(_,R,S,N))},error:e[f+1],complete:e[f+2]},x0(r._query)}return function(R,N,M,F){const L=new Np(F),K=new Ip(N,L,M);return R.asyncQueue.enqueueAndForget(async()=>wp(await vh(R),K)),()=>{L.eu(),R.asyncQueue.enqueueAndForget(async()=>Rp(await vh(R),K))}}(Qh(_),E,m,p)}function V0(r,e){return function(s,o){const u=new ar;return s.asyncQueue.enqueueAndForget(async()=>w2(await P2(s),o,u)),u.promise}(Qh(r),e)}function P0(r,e,n){const s=n.docs.get(e._key),o=new Lp(r);return new k0(r,o,e._key,s,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}function ym(){return new Mp("serverTimestamp")}function sD(...r){return new Vp("arrayUnion",r)}(function(e,n=!0){(function(o){Eo=o})(ia),Zs(new as("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ea(new Z1(s.getProvider("auth-internal")),new nC(s.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(_.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),gi(xv,"4.7.6",e),gi(xv,"4.7.6","esm2017")})();var aD="firebase",oD="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(aD,oD,"app");function zp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function U0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lD=U0,L0=new au("auth","Firebase",U0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new rp("@firebase/auth");function uD(r,...e){Ah.logLevel<=Oe.WARN&&Ah.warn(`Auth (${ia}): ${r}`,...e)}function rh(r,...e){Ah.logLevel<=Oe.ERROR&&Ah.error(`Auth (${ia}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(r,...e){throw jp(r,...e)}function $n(r,...e){return jp(r,...e)}function Bp(r,e,n){const s=Object.assign(Object.assign({},lD()),{[e]:n});return new au("auth","Firebase",s).create(e,{appName:r.name})}function Xs(r){return Bp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cD(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&bi(r,"argument-error"),Bp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return L0.create(r,...e)}function Te(r,e,...n){if(!r)throw jp(e,...n)}function nr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rh(e),new Error(e)}function hr(r,e){r||nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function hD(){return _E()==="http:"||_E()==="https:"}function _E(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hD()||NR()||"connection"in navigator)?navigator.onLine:!0}function dD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=CR()||OR()}get(){return fD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(r,e){hr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=new pu(3e4,6e4);function Hp(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function So(r,e,n,s,o={}){return B0(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=ou(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:p},u);return DR()||(_.referrerPolicy="no-referrer"),z0.fetch()(j0(r,r.config.apiHost,n,m),_)})}async function B0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},mD),e);try{const o=new _D(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Qc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,_]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Qc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Qc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Bp(r,E,_);bi(r,E)}}catch(o){if(o instanceof wi)throw o;bi(r,"network-request-failed",{message:String(o)})}}async function gD(r,e,n,s,o={}){const u=await So(r,e,n,s,o);return"mfaPendingCredential"in u&&bi(r,"multi-factor-auth-required",{_serverResponse:u}),u}function j0(r,e,n,s){const o=`${e}${n}?${s}`;return r.config.emulator?qp(r.config,o):`${r.config.apiScheme}://${o}`}class _D{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s($n(this.auth,"network-request-failed")),pD.get())})}}function Qc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=$n(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(r,e){return So(r,"POST","/v1/accounts:delete",e)}async function q0(r,e){return So(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vD(r,e=!1){const n=gt(r),s=await n.getIdToken(e),o=Fp(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Kl(vm(o.auth_time)),issuedAtTime:Kl(vm(o.iat)),expirationTime:Kl(vm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function vm(r){return Number(r)*1e3}function Fp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rT(n);return o?JSON.parse(o):(rh("Failed to decode base64 JWT payload"),null)}catch(o){return rh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function yE(r){const e=Fp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wi&&ED(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ED({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await nu(r,q0(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?H0(u.providerUserInfo):[],m=bD(r.providerData,f),p=r.isAnonymous,_=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?_:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Qm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,S)}async function AD(r){const e=gt(r);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bD(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function H0(r){return r.map(e=>{var{providerId:n}=e,s=zp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(r,e){const n=await B0(r,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=j0(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",z0.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wD(r,e){return So(r,"POST","/v2/accounts:revokeToken",Hp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=yE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await SD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new ro;return s&&(Te(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Qm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vD(this,e)}reload(){return AD(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await nu(this,yD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,_,E;const S=(s=n.displayName)!==null&&s!==void 0?s:void 0,R=(o=n.email)!==null&&o!==void 0?o:void 0,N=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(f=n.photoURL)!==null&&f!==void 0?f:void 0,F=(m=n.tenantId)!==null&&m!==void 0?m:void 0,L=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,K=(_=n.createdAt)!==null&&_!==void 0?_:void 0,ee=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Q,emailVerified:J,isAnonymous:re,providerData:ce,stsTokenManager:O}=n;Te(Q&&O,e,"internal-error");const w=ro.fromJSON(this.name,O);Te(typeof Q=="string",e,"internal-error"),Yr(S,e.name),Yr(R,e.name),Te(typeof J=="boolean",e,"internal-error"),Te(typeof re=="boolean",e,"internal-error"),Yr(N,e.name),Yr(M,e.name),Yr(F,e.name),Yr(L,e.name),Yr(K,e.name),Yr(ee,e.name);const b=new ir({uid:Q,auth:e,email:R,emailVerified:J,displayName:S,isAnonymous:re,photoURL:M,phoneNumber:N,tenantId:F,stsTokenManager:w,createdAt:K,lastLoginAt:ee});return ce&&Array.isArray(ce)&&(b.providerData=ce.map(I=>Object.assign({},I))),L&&(b._redirectEventId=L),b}static async _fromIdTokenResponse(e,n,s=!1){const o=new ro;o.updateFromServerResponse(n);const u=new ir({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await bh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?H0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ro;m.updateFromIdToken(s);const p=new ir({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;function rr(r){hr(r instanceof Function,"Expected a class definition");let e=vE.get(r);return e?(hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,vE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F0.type="NONE";const EE=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(r,e,n){return`firebase:${r}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=sh(this.userKey,o.apiKey,u),this.fullPersistenceKey=sh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(rr(EE),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||rr(EE);const f=sh(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){const S=ir._fromJSON(e,E);_!==u&&(m=S),u=_;break}}catch{}const p=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new so(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new so(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X0(e))return"Blackberry";if(W0(e))return"Webos";if(K0(e))return"Safari";if((e.includes("chrome/")||Q0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function G0(r=Zt()){return/firefox\//i.test(r)}function K0(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q0(r=Zt()){return/crios\//i.test(r)}function $0(r=Zt()){return/iemobile/i.test(r)}function Y0(r=Zt()){return/android/i.test(r)}function X0(r=Zt()){return/blackberry/i.test(r)}function W0(r=Zt()){return/webos/i.test(r)}function Gp(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RD(r=Zt()){var e;return Gp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CD(){return xR()&&document.documentMode===10}function Z0(r=Zt()){return Gp(r)||Y0(r)||W0(r)||X0(r)||/windows phone/i.test(r)||$0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(r,e=[]){let n;switch(r){case"Browser":n=TE(Zt());break;case"Worker":n=`${TE(Zt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(r,e={}){return So(r,"GET","/v2/passwordPolicy",Hp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=6;class OD{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:ND,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AE(this),this.idTokenSubscription=new AE(this),this.beforeStateQueue=new ID(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await q0(this,{idToken:e}),s=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Xs(this));const n=e?gt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DD(this),n=new OD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await wD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wh(r){return gt(r)}class AE{constructor(e){this.auth=e,this.observer=null,this.addObserver=BR(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kD(r){Kp=r}function MD(r){return Kp.loadJS(r)}function VD(){return Kp.gapiScript}function PD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(r,e){const n=xh(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Yl(u,e??{}))return o;bi(o,"already-initialized")}return n.initialize({options:e})}function LD(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(rr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function zD(r,e,n){const s=Wh(r);Te(s._canInitEmulator,s,"emulator-config-failed"),Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=eA(e),{host:f,port:m}=BD(e),p=m===null?"":`:${m}`;s.config.emulator={url:`${u}//${f}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),jD()}function eA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function BD(r){const e=eA(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:bE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:bE(f)}}}function bE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jD(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,n){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(r,e){return gD(r,"POST","/v1/accounts:signInWithIdp",Hp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="http://localhost";class ta extends tA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=zp(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ta(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:qD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Qp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends gu{constructor(){super("facebook.com")}static credential(e){return ta._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ta._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ji.credential(n,s)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends gu{constructor(){super("github.com")}static credential(e){return ta._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends gu{constructor(){super("twitter.com")}static credential(e,n){return ta._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ir._fromIdTokenResponse(e,s,o),f=SE(s);return new go({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=SE(s);return new go({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function SE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends wi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Sh(e,n,s,o)}}function nA(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(r,u,e,s):u})}async function HD(r,e,n=!1){const s=await nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return go._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(r,e,n=!1){const{auth:s}=r;if(er(s.app))return Promise.reject(Xs(s));const o="reauthenticate";try{const u=await nu(r,nA(s,o,e,r),n);Te(u.idToken,s,"internal-error");const f=Fp(u.idToken);Te(f,s,"internal-error");const{sub:m}=f;return Te(r.uid===m,s,"user-mismatch"),go._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&bi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(r,e,n=!1){if(er(r.app))return Promise.reject(Xs(r));const s="signIn",o=await nA(r,s,e),u=await go._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function KD(r,e,n,s){return gt(r).onIdTokenChanged(e,n,s)}function QD(r,e,n){return gt(r).beforeAuthStateChanged(e,n)}function iA(r,e,n,s){return gt(r).onAuthStateChanged(e,n,s)}function $D(r){return gt(r).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=1e3,XD=10;class sA extends rA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);CD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,XD):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},YD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sA.type="LOCAL";const WD=sA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends rA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aA.type="SESSION";const oA=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,u)),p=await ZD(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const _=$p("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(S){const R=S;if(R.data.eventId===_)switch(R.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function eN(r){Ei().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function tN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function iN(){return lA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebaseLocalStorageDb",rN=1,Rh="firebaseLocalStorage",cA="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jh(r,e){return r.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function sN(){const r=indexedDB.deleteDatabase(uA);return new _u(r).toPromise()}function $m(){const r=indexedDB.open(uA,rN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Rh,{keyPath:cA})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await sN(),e(await $m()))})})}async function wE(r,e,n){const s=Jh(r,!0).put({[cA]:e,value:n});return new _u(s).toPromise()}async function aN(r,e){const n=Jh(r,!1).get(e),s=await new _u(n).toPromise();return s===void 0?null:s.value}function RE(r,e){const n=Jh(r,!0).delete(e);return new _u(n).toPromise()}const oN=800,lN=3;class hA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>lN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(iN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tN(),!this.activeServiceWorker)return;this.sender=new JD(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await wE(e,wh,"1"),await RE(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>aN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Jh(o,!1).getAll();return new _u(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hA.type="LOCAL";const uN=hA;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(r,e){return e?rr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends tA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cN(r){return GD(r.auth,new Yp(r),r.bypassAuthState)}function hN(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),FD(n,new Yp(r),r.bypassAuthState)}async function fN(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),HD(n,new Yp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cN;case"linkViaPopup":case"linkViaRedirect":return fN;case"reauthViaPopup":case"reauthViaRedirect":return hN;default:bi(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new pu(2e3,1e4);async function mN(r,e,n){if(er(r.app))return Promise.reject($n(r,"operation-not-supported-in-this-environment"));const s=Wh(r);cD(r,e,Qp);const o=fA(s,n);return new Ys(s,"signInViaPopup",e,o).executeNotNull()}class Ys extends dA{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=$p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dN.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="pendingRedirect",ah=new Map;class gN extends dA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const s=await _N(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _N(r,e){const n=EN(e),s=vN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function yN(r,e){ah.set(r._key(),e)}function vN(r){return rr(r._redirectPersistence)}function EN(r){return sh(pN,r.config.apiKey,r.name)}async function TN(r,e,n=!1){if(er(r.app))return Promise.reject(Xs(r));const s=Wh(r),o=fA(s,e),f=await new gN(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=10*60*1e3;class bN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!mA(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError($n(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AN&&this.cachedEventUids.clear(),this.cachedEventUids.has(CE(e))}saveEventToCache(e){this.cachedEventUids.add(CE(e)),this.lastProcessedEventTime=Date.now()}}function CE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function mA({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mA(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e={}){return So(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CN=/^https?/;async function IN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await wN(r);for(const n of e)try{if(DN(n))return}catch{}bi(r,"unauthorized-domain")}function DN(r){const e=Km(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!CN.test(n))return!1;if(RN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new pu(3e4,6e4);function IE(){const r=Ei().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function ON(r){return new Promise((e,n)=>{var s,o,u;function f(){IE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IE(),n($n(r,"network-request-failed"))},timeout:NN.get()})}if(!((o=(s=Ei().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ei().gapi)===null||u===void 0)&&u.load)f();else{const m=PD("iframefcb");return Ei()[m]=()=>{gapi.load?f():n($n(r,"network-request-failed"))},MD(`${VD()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw oh=null,e})}let oh=null;function xN(r){return oh=oh||ON(r),oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new pu(5e3,15e3),MN="__/auth/iframe",VN="emulator/auth/iframe",PN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LN(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?qp(e,VN):`https://${r.config.authDomain}/${MN}`,s={apiKey:e.apiKey,appName:r.name,v:ia},o=UN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function zN(r){const e=await xN(r),n=Ei().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:LN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=$n(r,"network-request-failed"),m=Ei().setTimeout(()=>{u(f)},kN.get());function p(){Ei().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jN=500,qN=600,HN="_blank",FN="http://localhost";class DE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GN(r,e,n,s=jN,o=qN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},BN),{width:s.toString(),height:o.toString(),top:u,left:f}),_=Zt().toLowerCase();n&&(m=Q0(_)?HN:n),G0(_)&&(e=e||FN,p.scrollbars="yes");const E=Object.entries(p).reduce((R,[N,M])=>`${R}${N}=${M},`,"");if(RD(_)&&m!=="_self")return KN(e||"",m),new DE(null);const S=window.open(e||"",m,E);Te(S,r,"popup-blocked");try{S.focus()}catch{}return new DE(S)}function KN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="__/auth/handler",$N="emulator/auth/handler",YN=encodeURIComponent("fac");async function NE(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ia,eventId:o};if(e instanceof Qp){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",zR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))f[E]=S}if(e instanceof gu){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),_=p?`#${YN}=${encodeURIComponent(p)}`:"";return`${XN(r)}?${ou(m).slice(1)}${_}`}function XN({config:r}){return r.emulator?qp(r,$N):`https://${r.authDomain}/${QN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class WN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oA,this._completeRedirectFn=TN,this._overrideRedirectResult=yN}async _openPopup(e,n,s,o){var u;hr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await NE(e,n,s,Km(),o);return GN(e,f,$p())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await NE(e,n,s,Km(),o);return eN(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(hr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await zN(e),s=new bN(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Em,{type:Em},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Em];f!==void 0&&n(!!f),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z0()||K0()||Gp()}}const ZN=WN;var OE="@firebase/auth",xE="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tO(r){Zs(new as("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J0(r)},_=new xD(s,o,u,p);return LD(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Zs(new as("auth-internal",e=>{const n=Wh(e.getProvider("auth").getImmediate());return(s=>new JN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(OE,xE,eO(r)),gi(OE,xE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=5*60,iO=lT("authIdTokenMaxAge")||nO;let kE=null;const rO=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>iO)return;const o=n==null?void 0:n.token;kE!==o&&(kE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sO(r=ap()){const e=xh(r,"auth");if(e.isInitialized())return e.getImmediate();const n=UD(r,{popupRedirectResolver:ZN,persistence:[uN,WD,oA]}),s=lT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=rO(u.toString());QD(n,f,()=>f(n.currentUser)),KD(n,m=>f(m))}}const o=sT("auth");return o&&zD(n,`http://${o}`),n}function aO(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}kD({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=$n("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",aO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tO("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebasestorage.googleapis.com",gA="storageBucket",oO=2*60*1e3,lO=10*60*1e3,uO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends wi{constructor(e,n,s=0){super(Tm(e),`Firebase Storage: ${n} (${Tm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Tm(r){return"storage/"+r}function Xp(){const r="An unknown error occurred, please check the error payload for server response.";return new ot(et.UNKNOWN,r)}function cO(r){return new ot(et.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function hO(r){return new ot(et.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fO(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(et.UNAUTHENTICATED,r)}function dO(){return new ot(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mO(r){return new ot(et.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function _A(){return new ot(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yA(){return new ot(et.CANCELED,"User canceled the upload/download.")}function pO(r){return new ot(et.INVALID_URL,"Invalid URL '"+r+"'.")}function gO(r){return new ot(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function _O(){return new ot(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gA+"' property when initializing the app?")}function vA(){return new ot(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yO(){return new ot(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vO(){return new ot(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EO(r){return new ot(et.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ym(r){return new ot(et.INVALID_ARGUMENT,r)}function EA(){return new ot(et.APP_DELETED,"The Firebase app was deleted.")}function TO(r){return new ot(et.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ql(r,e){return new ot(et.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Vl(r){throw new ot(et.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=An.makeFromUrl(e,n)}catch{return new An(e,"")}if(s.path==="")return s;throw gO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),p={bucket:1,path:3};function _(J){J.path_=decodeURIComponent(J.path)}const E="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",N=new RegExp(`^https?://${S}/${E}/b/${o}/o${R}`,"i"),M={bucket:1,path:3},F=n===pA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",K=new RegExp(`^https?://${F}/${o}/${L}`,"i"),Q=[{regex:m,indices:p,postModify:u},{regex:N,indices:M,postModify:_},{regex:K,indices:{bucket:1,path:2},postModify:_}];for(let J=0;J<Q.length;J++){const re=Q[J],ce=re.regex.exec(e);if(ce){const O=ce[re.indices.bucket];let w=ce[re.indices.path];w||(w=""),s=new An(O,w),re.postModify(s);break}}if(s==null)throw pO(e);return s}}class AO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(r,e,n){let s=1,o=null,u=null,f=!1,m=0;function p(){return m===2}let _=!1;function E(...L){_||(_=!0,e.apply(null,L))}function S(L){o=setTimeout(()=>{o=null,r(N,p())},L)}function R(){u&&clearTimeout(u)}function N(L,...K){if(_){R();return}if(L){R(),E.call(null,L,...K);return}if(p()||f){R(),E.call(null,L,...K);return}s<64&&(s*=2);let Q;m===1?(m=2,Q=0):Q=(s+Math.random())*1e3,S(Q)}let M=!1;function F(L){M||(M=!0,R(),!_&&(o!==null?(L||(m=2),clearTimeout(o),S(0)):L||(m=1)))}return S(0),u=setTimeout(()=>{f=!0,F(!0)},n),F}function SO(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(r){return r!==void 0}function RO(r){return typeof r=="function"}function CO(r){return typeof r=="object"&&!Array.isArray(r)}function ef(r){return typeof r=="string"||r instanceof String}function ME(r){return Wp()&&r instanceof Blob}function Wp(){return typeof Blob<"u"}function VE(r,e,n,s){if(s<e)throw Ym(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw Ym(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function TA(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ws;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ws||(Ws={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n,s,o,u,f,m,p,_,E,S,R=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,M)=>{this.resolve_=N,this.reject_=M,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new $c(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const p=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,_)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===Ws.NO_ERROR,p=u.getStatus();if(!m||AA(p,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===Ws.ABORT;s(!1,new $c(!1,null,E));return}const _=this.successCodes_.indexOf(p)!==-1;s(!0,new $c(_,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());wO(p)?u(p):u()}catch(p){f(p)}else if(m!==null){const p=Xp();p.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,p)):f(p)}else if(o.canceled){const p=this.appDelete_?EA():yA();f(p)}else{const p=_A();f(p)}};this.canceled_?n(!1,new $c(!1,null,!0)):this.backoffId_=bO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $c{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function DO(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function NO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function xO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function kO(r,e,n,s,o,u,f=!0){const m=TA(r.urlParams),p=r.url+m,_=Object.assign({},r.headers);return OO(_,e),DO(_,n),NO(_,u),xO(_,s),new IO(p,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VO(...r){const e=MO();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Wp())return new Blob(r);throw new ot(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PO(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(r){if(typeof atob>"u")throw EO("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Am{constructor(e,n){this.data=e,this.contentType=n||null}}function LO(r,e){switch(r){case mi.RAW:return new Am(bA(e));case mi.BASE64:case mi.BASE64URL:return new Am(SA(r,e));case mi.DATA_URL:return new Am(BO(e),jO(e))}throw Xp()}function bA(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function zO(r){let e;try{e=decodeURIComponent(r)}catch{throw Ql(mi.DATA_URL,"Malformed data URL.")}return bA(e)}function SA(r,e){switch(r){case mi.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Ql(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case mi.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Ql(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=UO(e)}catch(o){throw o.message.includes("polyfill")?o:Ql(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class wA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ql(mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=qO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function BO(r){const e=new wA(r);return e.base64?SA(mi.BASE64,e.rest):zO(e.rest)}function jO(r){return new wA(r).contentType}function qO(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){let s=0,o="";ME(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(ME(this.data_)){const s=this.data_,o=PO(s,e,n);return o===null?null:new Jr(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Jr(s,!0)}}static getBlob(...e){if(Wp()){const n=e.map(s=>s instanceof Jr?s.data_:s);return new Jr(VO.apply(null,n))}else{const n=e.map(f=>ef(f)?LO(mi.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new Jr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(r){let e;try{e=JSON.parse(r)}catch{return null}return CO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function FO(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function CA(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(r,e){return e}class an{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||GO}}let Yc=null;function KO(r){return!ef(r)||r.length<2?r:CA(r)}function IA(){if(Yc)return Yc;const r=[];r.push(new an("bucket")),r.push(new an("generation")),r.push(new an("metageneration")),r.push(new an("name","fullPath",!0));function e(u,f){return KO(f)}const n=new an("name");n.xform=e,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new an("size");return o.xform=s,r.push(o),r.push(new an("timeCreated")),r.push(new an("updated")),r.push(new an("md5Hash",null,!0)),r.push(new an("cacheControl",null,!0)),r.push(new an("contentDisposition",null,!0)),r.push(new an("contentEncoding",null,!0)),r.push(new an("contentLanguage",null,!0)),r.push(new an("contentType",null,!0)),r.push(new an("metadata","customMetadata",!0)),Yc=r,Yc}function QO(r,e){function n(){const s=r.bucket,o=r.fullPath,u=new An(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function $O(r,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,e[f.server])}return QO(s,r),s}function DA(r,e,n){const s=RA(e);return s===null?null:$O(r,s,n)}function YO(r,e,n,s){const o=RA(e);if(o===null||!ef(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(_=>{const E=r.bucket,S=r.fullPath,R="/b/"+f(E)+"/o/"+f(S),N=yu(R,n,s),M=TA({alt:"media",token:_});return N+M})[0]}function NA(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class wo{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(r){if(!r)throw Xp()}function Zp(r,e){function n(s,o){const u=DA(r,o,e);return or(u!==null),u}return n}function XO(r,e){function n(s,o){const u=DA(r,o,e);return or(u!==null),YO(u,o,r.host,r._protocol)}return n}function vu(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=dO():o=fO():n.getStatus()===402?o=hO(r.bucket):n.getStatus()===403?o=mO(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function OA(r){const e=vu(r);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=cO(r.path)),u.serverResponse=o.serverResponse,u}return n}function WO(r,e,n){const s=e.fullServerUrl(),o=yu(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new wo(o,u,Zp(r,n),f);return m.errorHandler=OA(e),m}function ZO(r,e,n){const s=e.fullServerUrl(),o=yu(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new wo(o,u,XO(r,n),f);return m.errorHandler=OA(e),m}function JO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function xA(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=JO(null,e)),s}function ex(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let Q="";for(let J=0;J<2;J++)Q=Q+Math.random().toString().slice(2);return Q}const p=m();f["Content-Type"]="multipart/related; boundary="+p;const _=xA(e,s,o),E=NA(_,n),S="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+p+`\r
Content-Type: `+_.contentType+`\r
\r
`,R=`\r
--`+p+"--",N=Jr.getBlob(S,s,R);if(N===null)throw vA();const M={name:_.fullPath},F=yu(u,r.host,r._protocol),L="POST",K=r.maxUploadRetryTime,ee=new wo(F,L,Zp(r,n),K);return ee.urlParams=M,ee.headers=f,ee.body=N.uploadData(),ee.errorHandler=vu(e),ee}class Ch{constructor(e,n,s,o){this.current=e,this.total=n,this.finalized=!!s,this.metadata=o||null}}function Jp(r,e){let n=null;try{n=r.getResponseHeader("X-Goog-Upload-Status")}catch{or(!1)}return or(!!n&&(e||["active"]).indexOf(n)!==-1),n}function tx(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),f=xA(e,s,o),m={name:f.fullPath},p=yu(u,r.host,r._protocol),_="POST",E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":f.contentType,"Content-Type":"application/json; charset=utf-8"},S=NA(f,n),R=r.maxUploadRetryTime;function N(F){Jp(F);let L;try{L=F.getResponseHeader("X-Goog-Upload-URL")}catch{or(!1)}return or(ef(L)),L}const M=new wo(p,_,N,R);return M.urlParams=m,M.headers=E,M.body=S,M.errorHandler=vu(e),M}function nx(r,e,n,s){const o={"X-Goog-Upload-Command":"query"};function u(_){const E=Jp(_,["active","final"]);let S=null;try{S=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{or(!1)}S||or(!1);const R=Number(S);return or(!isNaN(R)),new Ch(R,s.size(),E==="final")}const f="POST",m=r.maxUploadRetryTime,p=new wo(n,f,u,m);return p.headers=o,p.errorHandler=vu(e),p}const PE=256*1024;function ix(r,e,n,s,o,u,f,m){const p=new Ch(0,0);if(f?(p.current=f.current,p.total=f.total):(p.current=0,p.total=s.size()),s.size()!==p.total)throw yO();const _=p.total-p.current;let E=_;o>0&&(E=Math.min(E,o));const S=p.current,R=S+E;let N="";E===0?N="finalize":_===E?N="upload, finalize":N="upload";const M={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${p.current}`},F=s.slice(S,R);if(F===null)throw vA();function L(J,re){const ce=Jp(J,["active","final"]),O=p.current+E,w=s.size();let b;return ce==="final"?b=Zp(e,u)(J,re):b=null,new Ch(O,w,ce==="final",b)}const K="POST",ee=e.maxUploadRetryTime,Q=new wo(n,K,L,ee);return Q.headers=M,Q.body=F.uploadData(),Q.progressCallback=m||null,Q.errorHandler=vu(r),Q}const fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bm(r){switch(r){case"running":case"pausing":case"canceling":return fn.RUNNING;case"paused":return fn.PAUSED;case"success":return fn.SUCCESS;case"canceled":return fn.CANCELED;case"error":return fn.ERROR;default:return fn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,s){if(RO(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class sx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ws.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ws.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ws.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o){if(this.sent_)throw Vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ax extends sx{initXhr(){this.xhr_.responseType="text"}}function no(){return new ax}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=IA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(AA(o.status,[]))if(u)o=_A();else{this.sleepTime=Math.max(this.sleepTime*2,uO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=tx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,no,e,n);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const o=nx(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,no,n,s);this._request=u,u.getPromise().then(f=>{f=f,this._request=void 0,this._updateProgress(f.current),this._needToFetchStatus=!1,f.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=PE*this._chunkMultiplier,n=new Ch(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((o,u)=>{let f;try{f=ix(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(p){this._error=p,this._transition("error");return}const m=this._ref.storage._makeRequest(f,no,o,u,!1);this._request=m,m.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){PE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=WO(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(s,no,e,n);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=ex(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,no,e,n);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=yA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=bm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,o){const u=new rx(n||void 0,s||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(bm(this._state)){case fn.SUCCESS:Xa(this._resolve.bind(null,this.snapshot))();break;case fn.CANCELED:case fn.ERROR:const n=this._reject;Xa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bm(this._state)){case fn.RUNNING:case fn.PAUSED:e.next&&Xa(e.next.bind(e,this.snapshot))();break;case fn.SUCCESS:e.complete&&Xa(e.complete.bind(e))();break;case fn.CANCELED:case fn.ERROR:e.error&&Xa(e.error.bind(e,this._error))();break;default:e.error&&Xa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this._service=e,n instanceof An?this._location=n:this._location=An.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new na(e,n)}get root(){const e=new An(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CA(this._location.path)}get storage(){return this._service}get parent(){const e=HO(this._location.path);if(e===null)return null;const n=new An(this._location.bucket,e);return new na(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TO(e)}}function lx(r,e,n){return r._throwIfRoot("uploadBytesResumable"),new ox(r,new Jr(e),n)}function ux(r){r._throwIfRoot("getDownloadURL");const e=ZO(r.storage,r._location,IA());return r.storage.makeRequestWithTokens(e,no).then(n=>{if(n===null)throw vO();return n})}function cx(r,e){const n=FO(r._location.path,e),s=new An(r._location.bucket,n);return new na(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(r){return/^[A-Za-z]+:\/\//.test(r)}function fx(r,e){return new na(r,e)}function kA(r,e){if(r instanceof eg){const n=r;if(n._bucket==null)throw _O();const s=new na(n,n._bucket);return e!=null?kA(s,e):s}else return e!==void 0?cx(r,e):r}function dx(r,e){if(e&&hx(e)){if(r instanceof eg)return fx(r,e);throw Ym("To use ref(service, url), the first argument must be a Storage instance.")}else return kA(r,e)}function UE(r,e){const n=e==null?void 0:e[gA];return n==null?null:An.makeFromBucketSpec(n,r)}function mx(r,e,n,s={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=s;o&&(r._overrideAuthToken=typeof o=="string"?o:uT(o,r.app.options.projectId))}class eg{constructor(e,n,s,o,u){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=pA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oO,this._maxUploadRetryTime=lO,this._requests=new Set,o!=null?this._bucket=An.makeFromBucketSpec(o,this._host):this._bucket=UE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=An.makeFromBucketSpec(this._url,e):this._bucket=UE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new na(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new AO(EA());{const f=kO(e,this._appId,s,o,n,this._firebaseVersion,u);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const LE="@firebase/storage",zE="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="storage";function px(r,e,n){return r=gt(r),lx(r,e,n)}function gx(r){return r=gt(r),ux(r)}function _x(r,e){return r=gt(r),dx(r,e)}function VA(r=ap(),e){r=gt(r);const s=xh(r,MA).getImmediate({identifier:e}),o=aT("storage");return o&&yx(s,...o),s}function yx(r,e,n,s={}){mx(r,e,n,s)}function vx(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new eg(n,s,o,e,ia)}function Ex(){Zs(new as(MA,vx,"PUBLIC").setMultipleInstances(!0)),gi(LE,zE,""),gi(LE,zE,"esm2017")}Ex();const Tx={apiKey:"AIzaSyC96HPMvSsVR1sx2rH0MpzSBYFiYDKXDJ4",authDomain:"chatapp-df689.firebaseapp.com",projectId:"chatapp-df689",storageBucket:"chatapp-df689.firebasestorage.app",messagingSenderId:"1059566033754",appId:"1:1059566033754:web:e3a6ed7bdf231e6fdd7163"},tg=fT(Tx),pi=q2(tg),iu=sO(tg);VA(tg);const PA=q.createContext(),ng=()=>q.useContext(PA),Ax=({children:r})=>{const[e,n]=q.useState(()=>localStorage.getItem("isLoggedIn")==="true");q.useEffect(()=>{localStorage.setItem("isLoggedIn",e)},[e]);const u={isLoggedIn:e,login:()=>{n(!0)},logout:()=>{n(!1)}};return $.jsx(PA.Provider,{value:u,children:r})};async function bx(r){const e=r.user,n=e.uid,s=e.displayName,o=e.photoURL;await Gl(tr(pi,"users",n),{id:n,name:s,profile_pic:o})}function Sx(r){const e=Dh(),{login:n}=ng(),s=async()=>{const o=await mN(iu,new Ji);console.log("Logged In"),bx(o),n(),e("/")};return $.jsxs("div",{className:"relative w-full h-[100vh]",children:[$.jsx("div",{className:"bg-[#04a784] h-[40vh] w-full"}),$.jsx("div",{className:"bg-[#eff2f5] h-[60vh] w-full"}),$.jsxs("div",{className:`absolute md:w-[50%] h-[60vh] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 \r
      bg-white flex flex-col justify-center items-center shadow-2xl rounded-xl p-6`,children:[$.jsxs("div",{className:"flex items-center gap-3 absolute -top-24 -left-52",children:[$.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp Logo",className:"w-8"}),$.jsx("h1",{className:"text-white text-2xl font-semibold",children:"WHATSAPP"})]}),$.jsx(nR,{size:100,strokeWidth:2,className:"text-gray-700"}),$.jsx("h2",{className:"text-lg font-semibold mt-5",children:"Sign In"}),$.jsxs("p",{className:"text-center text-gray-400 text-sm mt-2",children:["Sign in with your Google account ",$.jsx("br",{})," to get started"]}),$.jsxs("button",{onClick:s,className:"mt-7 px-4 py-2 bg-[#04a784] text-white rounded flex items-center gap-3",children:["Sign in with Google ",$.jsx(rR,{})]})]})]})}const UA=q.createContext(),tf=()=>q.useContext(UA),wx=({children:r})=>{const[e,n]=q.useState(()=>localStorage.getItem("theme")||"light");q.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("theme",e)},[e]);const s=()=>{n(o=>o==="light"?"dark":"light")};return $.jsx(UA.Provider,{value:{theme:e,toggleTheme:s},children:r})};function Rx({onBack:r,isOpen:e}){const n=Dh(),{logout:s}=ng(),{theme:o}=tf(),[u,f]=q.useState(null),[m,p]=q.useState(""),[_,E]=q.useState(""),[S,R]=q.useState(null),[N,M]=q.useState(!1),[F,L]=q.useState(!1),[K,ee]=q.useState(!1);q.useEffect(()=>{const b=localStorage.getItem("user");b&&f(JSON.parse(b));const I=iA(iu,async x=>{if(x){f(x),localStorage.setItem("user",JSON.stringify(x));const U=tr(pi,"users",x.uid),D=Th(U,Je=>{if(Je.exists()){const Ke=Je.data();p(Ke.name||""),E(Ke.status||"Busy"),Ke.profilePic&&R(Ke.profilePic),localStorage.setItem("userData",JSON.stringify(Ke))}});return()=>D()}else f(null),localStorage.removeItem("user"),localStorage.removeItem("userData")});return()=>I()},[]);const Q=async()=>{if(u)try{await Gl(tr(pi,"users",u.uid),{name:m},{merge:!0}),localStorage.setItem("userData",JSON.stringify({name:m,status:_})),L(!0),setTimeout(()=>{L(!1)},1500)}catch(b){console.error("Error saving name:",b)}},J=async()=>{if(u)try{await Gl(tr(pi,"users",u.uid),{status:_},{merge:!0}),localStorage.setItem("userData",JSON.stringify({name:m,status:_})),ee(!0),setTimeout(()=>{ee(!1)},1500)}catch(b){console.error("Error saving status:",b)}},re=b=>{if(b.target.files[0]){const I=b.target.files[0];R(URL.createObjectURL(I)),ce(I)}},ce=async b=>{if(!b||!u)return;M(!0);const I=_x(VA(),`profileImages/${u.uid}`),x=px(I,b);x.on("state_changed",null,U=>{console.error("Upload error:",U),M(!1)},async()=>{const U=await gx(x.snapshot.ref);await Gl(tr(pi,"users",u.uid),{profilePic:U},{merge:!0}),localStorage.setItem("userData",JSON.stringify({...JSON.parse(localStorage.getItem("userData")),profilePic:U})),R(U),M(!1)})},O=async()=>{try{await $D(iu),s(),n("/login"),localStorage.removeItem("user"),localStorage.removeItem("userData")}catch(b){console.error("Error logging out:",b)}},w=o==="dark"?"#059669":"#04a784";return $.jsxs("div",{className:`fixed top-0 left-0 w-[30%] h-full z-20 shadow-lg transition-transform duration-300 ${e?"translate-x-0":"-translate-x-full"} ${o==="dark"?"bg-gray-900":"bg-white"}`,children:[$.jsxs("header",{className:"px-4 py-3 flex items-center gap-3",style:{backgroundColor:w},children:[$.jsx("button",{onClick:r,className:"flex items-center justify-center",children:$.jsx(Yw,{className:"text-white",size:20})}),$.jsx("h1",{className:"text-xl font-medium text-white",children:"Profile"})]}),$.jsxs("div",{className:"p-6 flex flex-col items-center",children:[$.jsxs("div",{className:"relative w-36 h-36 rounded-full bg-gray-500 flex items-center justify-center mb-12 mt-24 overflow-hidden",children:[S?$.jsx("img",{src:S,alt:"Profile",className:"w-full h-full object-cover"}):$.jsx("span",{className:"text-white text-6xl font-light",children:m?m.charAt(0).toUpperCase():"A"}),N&&$.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:$.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}),$.jsx("label",{htmlFor:"fileInput",className:"absolute bottom-2 right-2 bg-black/70 p-3 rounded-full cursor-pointer hover:opacity-80 transition-opacity",children:$.jsx(Ww,{className:"text-white",size:24})}),$.jsx("input",{type:"file",id:"fileInput",accept:"image/*",onChange:re,className:"hidden"})]}),$.jsxs("div",{className:"w-full mb-6 relative",children:[$.jsx("p",{className:"text-sm mb-2",style:{color:w},children:"Your Name"}),$.jsxs("div",{className:`flex justify-between items-center p-3 border ${o==="dark"?"bg-gray-800 border-gray-700":"bg-gray-100"} ${F?"border-green-500":""} transition-all duration-300`,children:[$.jsx("input",{type:"text",value:m,onChange:b=>p(b.target.value),className:`w-full focus:outline-none ${o==="dark"?"text-white bg-gray-800":"text-gray-800 bg-gray-100"} border-b border-gray-400`}),$.jsx("button",{onClick:Q,className:`p-2 rounded-full transition-colors ${F?"bg-green-100":"hover:bg-gray-200"}`,children:$.jsx(Ev,{size:20,style:{color:F?"#10B981":w},className:`transition-transform ${F?"scale-110":""}`})})]}),F&&$.jsx("div",{className:"absolute right-0 -bottom-6 text-green-500 text-sm font-medium",children:"Name saved successfully!"})]}),$.jsxs("div",{className:"w-full mb-12 relative",children:[$.jsx("p",{className:"text-sm mb-2",style:{color:w},children:"Status"}),$.jsxs("div",{className:`flex justify-between items-center p-3 border ${o==="dark"?"bg-gray-800 border-gray-700":"bg-gray-100"} ${K?"border-green-500":""} transition-all duration-300`,children:[$.jsx("input",{type:"text",value:_,onChange:b=>E(b.target.value),className:`w-full focus:outline-none ${o==="dark"?"text-white bg-gray-800":"text-gray-800 bg-gray-100"} border-b border-gray-400`}),$.jsx("button",{onClick:J,className:`p-2 rounded-full transition-colors ${K?"bg-green-100":"hover:bg-gray-200"}`,children:$.jsx(Ev,{size:20,style:{color:K?"#10B981":w},className:`transition-transform ${K?"scale-110":""}`})})]}),K&&$.jsx("div",{className:"absolute right-0 -bottom-6 text-green-500 text-sm font-medium",children:"Status saved successfully!"})]}),$.jsx("div",{className:"mt-auto mb-8 flex justify-center w-full",children:$.jsx("button",{onClick:O,style:{backgroundColor:w},className:"text-white font-medium py-2 px-8 rounded-md",children:"Logout"})})]})]})}const Wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAIAAABt+uBvAAAAA3NCSVQICAjb4U/gAAAABmJLR0QAeACQAJw0S3fuAAAE2klEQVR4nO2cTVNaVxjH70UuKgIBvCAgCoqIAr5hojXWTtI2M+lMN1111U0/RT9GP0D7Fbpsd51xmmTqjI3VKjZRrKJC8IUSSHwB4XahORwEeajIOSye37g4/3vPPfPMj/t2Dozid9//ICA3o+JdQLODggBQEAAKAkBBACgIAAUBoCAAFASAggBQEAAKAkBBACgIAAUBoCAAFASAggBQEAAKAkBBACgIAAUBoCAAFASAggBQEAAKAkBBAGreBVzx9dNHo4P9JD5fWvv5twWO9RCa5Qzq77arRJH8Dbq6eVd0RVMIejjuN+i09BaLyehtDkdNIWjE239ti0olTgWHuBRzDf6CZKOh29pZvt1lt7Ivphz+guZCI5K6wrNC36GdCwXZ13MN/oI8PQ7SPstmL/J5EgMeN4eCSuEsaMznMRsNJEbjB4njFIkOa6dM7eUCZ0Gh4QHxQ1sRhOVXWxvRPbJXUqs/Do1wKYzA+UWxx2Yh7VT63cv1DY0kzYz6WzXS5UaP086ptCt4nkFPZx+0t7aSuBNLCIKQzeX2D47Ixk6jYcTbx6G4D/AU5HM7STtfKCz8tX7ZXotsk+2iKIaGvYwLo+EmaKDXYTWbSDxMprZjicv2iz/DmZNTsquX6wsRN0FTwSGVityghY1ojN67++aAtLVtrZ9/FGJXWSncBLm7baR9ns3NLy7Te5fWNxVFIdHn7mFXWSl8BH0yOarXtpMYOzx+f3pGd1jd3E6+zZBok03OLpldfRR8BAUGXHQMR3bK+5BbkiAI6paWmTF/w8uqBAdBNtlkl4uz08zJ6bOl1fJuv6+E8/kCiX3dfF6IOAianQhK6hYSo/GDit32EkeJ5L8kmgy6+4HBhhdXBgdB/dS5oCjKH+HXN/WM7JY82sYGPQ0s6wZYC5r0e0339CQep9LrW9GbOs8vrpxncyQ6bbJGkhpbXxmsBY37irNTQRD+2X9TpfP707P44TGJbRrNZ9MTDSutMkwFaSSJnp1e5PMvlteqHxLeKnnAsV/MZzqbfzITItN0QRAURfjmyyfgUYqiiOLVaWc1mzxOe2Qv3qgSy2AqyNtb8vlL6hYzdT+qBZVKnB4dZimI3SXmc/dYzMb6x3E5uuofpHbYCXoQ9KlEEe4HYejQzk4E6h+nRthdYi578ZNXBCGyG1MKSpX+NPqOdptsJjHocT9fAu7udwUjQY+nxnXaNhJT6Xc//vRL7Yd7nPZvv/qCLI84rLLZoE+mM9WPuhMYXWL+/l46bseqvf6UE9mLH6XekqiR1HOTjBbzWQhydsn0BZIvFBZW/v6/g1ybdnh6GM1dWQh6OBZQtxRnpwfJ1E48UaV/RZ69XM1dFL9TlI33Ah5Xlf53BQtBfU4bHTej+7cYJJnOxI+K0w5RFCf9LCb3DRc0PTJk1OtIPM/m5hdXbjfUq+09OrJZzG+4IPp3Y0Kl1dXa+XVh6eTsnMSO9rZPp8brKq4GGivIoNNeW0umv/O6BfuJIzoO9fXe1POuaKygR/fH6BWczMlpnS94K6+36Gi3mB2WCr8tukNE/Bdd1eH/+6AmBwUBoCAAFASAggBQEAAKAkBBACgIAAUBoCAAFASAggBQEAAKAkBBACgIAAUBoCAAFASAggBQEAAKAkBBACgIAAUBoCAAFATwH+DGGWY9f9zUAAAAAElFTkSuQmCC";function Cx({onProfileClick:r,onSelectUser:e,currentUserId:n}){const{theme:s,toggleTheme:o}=tf(),[u,f]=q.useState([]),[m,p]=q.useState([]),[_,E]=q.useState(!0),[S,R]=q.useState(null),[N,M]=q.useState(""),[F,L]=q.useState(Wa);q.useEffect(()=>{(async()=>{if(n)try{const J=j2(pi,"users"),ce=(await iD(J)).docs.map(O=>{const w=O.data();return{id:O.id,name:w.name,profilePic:w.profilePic||w.profile_pic||Wa,...w}}).filter(O=>O.id!==n);f(ce),p(ce),E(!1)}catch(J){console.error("Error fetching users:",J),E(!1)}})()},[n]),q.useEffect(()=>{if(!n)return;const Q=tr(pi,"users",n),J=Th(Q,re=>{if(re.exists()){const ce=re.data();L(ce.profilePic||ce.profile_pic||Wa)}});return()=>J()},[n]),q.useEffect(()=>{if(!n||u.length===0)return;const Q=u.map(J=>{const re=tr(pi,"users",J.id);return Th(re,ce=>{if(ce.exists()){const O=ce.data();f(w=>w.map(b=>b.id===J.id?{...b,profilePic:O.profile_pic||Wa,name:O.name}:b))}})});return()=>Q.forEach(J=>J())},[n]),q.useEffect(()=>{if(N.trim()==="")p(u);else{const Q=N.toLowerCase(),J=u.filter(re=>re.name.toLowerCase().includes(Q));p(J)}},[N,u]);const K=Q=>{!n||Q.id===n||(R(Q.id),e(Q))},ee=()=>{M("")};return $.jsxs("div",{className:`w-[30%] h-screen border-r ${s==="dark"?"bg-gray-900 text-white":"bg-white text-black"} relative`,children:[$.jsxs("header",{className:`flex justify-between items-center shadow-sm p-3 ${s==="dark"?"bg-gray-800":"bg-gray-200"}`,children:[$.jsx("button",{onClick:r,children:$.jsx("img",{src:F,className:"w-10 h-10 rounded-full object-cover",alt:"Profile",onError:Q=>{Q.target.src=Wa}})}),$.jsxs("div",{className:"flex gap-3",children:[$.jsx("button",{onClick:o,children:s==="dark"?$.jsx(mR,{}):$.jsx(lR,{})}),$.jsx(eR,{}),$.jsx(aR,{}),$.jsx(gR,{})]})]}),$.jsxs("div",{className:`p-3 ${s==="dark"?"bg-gray-900":"bg-white"}`,children:[$.jsxs("div",{className:`flex items-center ${s==="dark"?"bg-gray-700":"bg-gray-200"} mb-3 p-2 shadow-sm rounded-sm`,children:[$.jsx(cR,{className:"text-gray-500 mr-2",size:18}),$.jsx("input",{type:"text",value:N,onChange:Q=>M(Q.target.value),placeholder:"Search users",className:`bg-transparent flex-1 outline-none text-sm ${s==="dark"?"text-white":"text-black"}`}),N&&$.jsx("button",{onClick:ee,className:"text-gray-500",children:$.jsx(yR,{size:16})})]}),_?$.jsx("p",{className:"text-center text-gray-500 py-4",children:"Loading users..."}):$.jsx("div",{className:"max-h-[calc(100vh-120px)] overflow-y-auto",children:m.length===0?$.jsx("p",{className:"text-center text-gray-500 py-4",children:N?`No users matching "${N}"`:"No users found"}):$.jsx("ul",{children:m.map((Q,J)=>$.jsxs(dS.Fragment,{children:[$.jsxs("li",{className:`flex gap-3 p-2 cursor-pointer transition 
                        ${S===Q.id?s==="dark"?"bg-gray-700":"bg-gray-200":s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,onClick:()=>K(Q),children:[$.jsx("img",{src:Q.profilePic,className:"w-8 h-8 rounded-full object-cover",alt:`${Q.name}'s profile`,onError:re=>{re.target.src=Wa}}),$.jsx("p",{className:`${s==="dark"?"text-white":"text-black"}`,children:Q.name})]}),J!==m.length-1&&$.jsx("hr",{className:"border-gray-300"})]},Q.id))})})]})]})}function Ix(){const{theme:r}=tf();return $.jsx("div",{className:`flex flex-col items-center justify-center h-full flex-1 ${r==="dark"?"bg-gray-800 text-white":"bg-gray-50 text-gray-600"}`,children:$.jsxs("div",{className:"text-center p-8",children:[$.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),$.jsx("h2",{className:`text-xl font-semibold mb-2 ${r==="dark"?"text-gray-200":"text-gray-800"}`,children:"Select a conversation"}),$.jsx("p",{className:`${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"Choose a contact from the left panel to start chatting"})]})})}function LA({user:r,currentUserId:e}){const{theme:n}=tf(),[s,o]=q.useState([]),[u,f]=q.useState(""),[m,p]=q.useState(!0),[_,E]=q.useState(null),[S,R]=q.useState(!1),N=q.useRef(null),M=q.useRef(null),F=()=>[e,r.id].sort().join("_"),L=J=>J?(J.toDate?J.toDate():new Date(J)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"Sending...",K=()=>{var J;(J=N.current)==null||J.scrollIntoView({behavior:"smooth"})};q.useEffect(()=>{if(!(r!=null&&r.id)||!e){p(!0);return}const J=F(),re=tr(pi,"chats",J);(async()=>{try{(await nD(re)).exists()||await Gl(re,{participants:[e,r.id],messages:[],createdAt:ym(),updatedAt:ym()})}catch{E("Failed to initialize chat")}finally{p(!1)}})();const O=Th(re,w=>{var b;if(w.exists()){const x=[...w.data().messages||[]].sort((U,D)=>{var Je,Ke;return(((Je=U.timestamp)==null?void 0:Je.seconds)||0)-(((Ke=D.timestamp)==null?void 0:Ke.seconds)||0)});if(o(x),M.current){const U=M.current;(U.scrollHeight-U.scrollTop-U.clientHeight<100||((b=x[x.length-1])==null?void 0:b.senderId)===e)&&setTimeout(K,100)}}},w=>E("Failed to load messages"));return()=>O()},[r==null?void 0:r.id,e]),q.useEffect(()=>{s.length>0&&K()},[s]);const ee=async J=>{var re;if(J.preventDefault(),!!u.trim()){R(!0),E(null);try{const ce=F(),O=tr(pi,"chats",ce),w={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,senderId:e,senderName:((re=iu.currentUser)==null?void 0:re.displayName)||"Unknown",text:u.trim(),timestamp:new Date};await rD(O,{messages:sD(w),updatedAt:ym()}),f(""),setTimeout(K,100)}catch{E("Failed to send message.")}finally{R(!1)}}};if(_)return $.jsx("div",{className:`flex items-center justify-center h-full ${n==="dark"?"bg-gray-900 text-red-400":"bg-gray-50 text-red-500"}`,children:_});if(m)return $.jsx("div",{className:`flex items-center justify-center h-full ${n==="dark"?"bg-gray-900 text-white":"bg-gray-50 text-black"}`,children:$.jsxs("div",{className:"flex items-center",children:[$.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[$.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),$.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading chat..."]})});const Q=n==="dark"?"#059669":"#16a34a";return $.jsxs("div",{className:`flex flex-col h-full flex-1 ${n==="dark"?"bg-gray-900":"bg-gray-50"} relative`,children:[$.jsxs("header",{className:`flex items-center shadow-sm p-3 w-full absolute top-0 left-0 z-0 ${n==="dark"?"bg-gray-800":"bg-gray-200"}`,children:[$.jsx("img",{src:r.profile_pic||"/default-avatar.png",alt:"Profile",className:"w-10 h-10 rounded-full object-cover mr-2"}),$.jsx("h1",{className:`text-lg font-semibold ${n==="dark"?"text-white":"text-gray-800"}`,children:r.name})]}),$.jsxs("div",{ref:M,className:`flex-1 overflow-y-auto p-4 space-y-4 mt-14 ${n==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[s.length===0?$.jsx("div",{className:`text-center mt-4 ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"No messages yet. Start the conversation!"}):s.map(J=>$.jsx("div",{className:`flex ${J.senderId===e?"justify-end":"justify-start"}`,children:$.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${J.senderId===e?"bg-green-600 text-white rounded-br-none":n==="dark"?"bg-gray-800 text-gray-200 rounded-bl-none":"bg-gray-200 text-gray-900 rounded-bl-none"}`,children:[$.jsx("p",{className:"break-words",children:J.text}),$.jsx("p",{className:`text-xs mt-1 ${J.senderId===e?"opacity-70":n==="dark"?"text-gray-400":"text-gray-500"}`,children:L(J.timestamp)})]})},J.id)),$.jsx("div",{ref:N})]}),$.jsx("form",{onSubmit:ee,className:`sticky bottom-0 border-t p-4 shadow-md ${n==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:$.jsxs("div",{className:"flex space-x-2",children:[$.jsx("input",{type:"text",value:u,onChange:J=>f(J.target.value),placeholder:"Type a message...",className:`flex-1 px-4 py-2 rounded-full focus:outline-none ${n==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-green-500":"bg-gray-100 border-gray-300 text-gray-900 focus:border-green-500"}`,disabled:S}),$.jsx("button",{type:"submit",disabled:!u.trim()||S,className:`px-4 py-2 rounded-full transition-colors flex items-center justify-center ${!u.trim()||S?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,style:{backgroundColor:Q,color:"white"},children:S?"Sending...":$.jsx(fR,{size:18})})]})})]})}function Dx(){const[r,e]=q.useState(!1),[n,s]=q.useState(null),[o,u]=q.useState(null);q.useEffect(()=>{const p=iA(iu,_=>{_?(console.log("User logged in:",_.uid),u(_.uid)):(console.log("User logged out"),u(null),s(null))});return()=>p()},[]);const f=()=>{e(p=>!p)},m=p=>{!o||p.id===o||s(p)};return $.jsxs("div",{className:"flex h-screen relative",children:[$.jsx(Cx,{onProfileClick:f,onSelectUser:m,currentUserId:o}),$.jsx(Rx,{isOpen:r,onBack:f}),$.jsx("div",{className:"flex-1 flex",children:n&&o?$.jsx(LA,{user:n,currentUserId:o,onBack:()=>s(null)}):$.jsx(Ix,{})})]})}function Nx(){return $.jsx($.Fragment,{children:$.jsx("div",{children:"PageNotFound"})})}function BE({children:r}){const{isLoggedIn:e}=ng();return e?r:$.jsx(nw,{to:"/login"})}function Ox(){const[r,e]=q.useState(()=>localStorage.getItem("isLoggedIn")==="true");return q.useEffect(()=>{localStorage.setItem("isLoggedIn",r)},[r]),$.jsx($.Fragment,{children:$.jsx(wx,{children:$.jsx(Ax,{children:$.jsxs(rw,{children:[$.jsx(Pl,{path:"/login",element:$.jsx(Sx,{setIsLoggedIn:e})}),$.jsx(Pl,{path:"/",element:$.jsx(BE,{isLoggedIn:r,setIsLoggedIn:e,children:$.jsx(Dx,{setIsLoggedIn:e})})}),$.jsx(Pl,{path:"/chat/:chatid",element:$.jsx(BE,{isLoggedIn:r,setIsLoggedIn:e,children:$.jsx(LA,{isLoggedIn:r})})}),$.jsx(Pl,{path:"*",element:$.jsx(Nx,{})})]})})})})}Fw.createRoot(document.getElementById("root")).render($.jsx(Iw,{children:$.jsx(Ox,{})}));
